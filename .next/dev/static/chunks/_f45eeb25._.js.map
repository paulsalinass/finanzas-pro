{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/CommitmentModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { Commitment } from '@/types';\r\n\r\ninterface CommitmentModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    commitmentToEdit?: Commitment | null;\r\n}\r\n\r\nexport const CommitmentModal = ({ isOpen, onClose, commitmentToEdit }: CommitmentModalProps) => {\r\n    const {\r\n        addCommitment,\r\n        updateCommitment,\r\n        accounts,\r\n        categories,\r\n        ledgers,\r\n        activeBookId\r\n    } = useFinance();\r\n\r\n    const [name, setName] = useState('');\r\n    const [amount, setAmount] = useState('');\r\n    const [frequency, setFrequency] = useState<'MONTHLY' | 'WEEKLY' | 'ANNUAL' | 'DAILY' | 'BIWEEKLY' | 'QUARTERLY' | 'SEMIANNUAL'>('MONTHLY');\r\n    const [type, setType] = useState<'FIXED' | 'TEMPORAL'>('FIXED');\r\n    const [status, setStatus] = useState<'PENDING' | 'PAID' | 'LATE' | 'SKIPPED'>('PENDING');\r\n    const [transactionType, setTransactionType] = useState<'INCOME' | 'EXPENSE'>('EXPENSE');\r\n    const [nextDueDate, setNextDueDate] = useState('');\r\n    const [endDate, setEndDate] = useState(''); // Optional\r\n    const [categoryId, setCategoryId] = useState('');\r\n    const [accountId, setAccountId] = useState('');\r\n    const [isActive, setIsActive] = useState(true);\r\n\r\n    // Populate form on open\r\n    useEffect(() => {\r\n        if (!isOpen) return; // Only run when opening\r\n\r\n        if (commitmentToEdit) {\r\n            setName(commitmentToEdit.name);\r\n            setAmount(commitmentToEdit.amount.toString());\r\n            setFrequency(commitmentToEdit.frequency);\r\n            setType(commitmentToEdit.type || 'FIXED');\r\n            setStatus(commitmentToEdit.status || 'PENDING');\r\n            setTransactionType(commitmentToEdit.transaction_type || 'EXPENSE');\r\n\r\n            // Format date for input type=\"date\"\r\n            const dueDate = commitmentToEdit.nextDueDate ? new Date(commitmentToEdit.nextDueDate).toISOString().split('T')[0] : '';\r\n            setNextDueDate(dueDate);\r\n\r\n            const endD = commitmentToEdit.endDate ? new Date(commitmentToEdit.endDate).toISOString().split('T')[0] : '';\r\n            setEndDate(endD);\r\n\r\n            setCategoryId(commitmentToEdit.categoryId || categories.find(c => c.name === commitmentToEdit.category)?.id || '');\r\n            setAccountId(commitmentToEdit.accountId || accounts.find(a => a.name === commitmentToEdit.account)?.id || '');\r\n            setIsActive(commitmentToEdit.isActive ?? true);\r\n        } else {\r\n            // Only reset if we are NOT already editing (prevent clearing on minor re-renders if logic was flaky, but mostly focus on open)\r\n            // Actually, we just want to set defaults for NEW.\r\n            // Problem: If I type, and this effect runs again, it wipes it.\r\n            // Solution: This effect should ONLY run when `isOpen` changes.\r\n            // But we need `commitmentToEdit` in deps.\r\n            // We can check if we have already initialized? No, simpler to trust dependencies but ensure parent doesn't unstable-ref `commitmentToEdit`.\r\n            // Better: Only reset if `name` is empty? No.\r\n            // Best: Split into two effects or use a ref tracking previous `isOpen`. \r\n            // OR simply remove `accounts` and `categories` from deps? \r\n            // If they load late, we might miss setting initial IDs.\r\n            // But for 'New', we set defaults.\r\n\r\n            // Let's go with the standard pattern:\r\n            setName('');\r\n            setAmount('');\r\n            setFrequency('MONTHLY');\r\n            setType('FIXED');\r\n            setStatus('PENDING');\r\n            setTransactionType('EXPENSE');\r\n            setNextDueDate(new Date().toISOString().split('T')[0]);\r\n            setEndDate('');\r\n            setCategoryId('');\r\n            setAccountId(accounts[0]?.id || '');\r\n            setIsActive(true);\r\n        }\r\n    }, [isOpen, commitmentToEdit]); // Removed accounts/categories to prevent reset on background fetch\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        const numAmount = parseFloat(amount);\r\n        if (isNaN(numAmount) || numAmount <= 0) {\r\n            alert('Por favor ingresa un monto válido');\r\n            return;\r\n        }\r\n\r\n        if (!name.trim()) {\r\n            alert('Por favor ingresa un nombre para el compromiso');\r\n            return;\r\n        }\r\n\r\n        const data: any = {\r\n            name,\r\n            amount: numAmount,\r\n            frequency,\r\n            type,\r\n            status,\r\n            transaction_type: transactionType,\r\n            nextDueDate: new Date(nextDueDate).toISOString(),\r\n            isActive,\r\n            categoryId: categoryId || undefined,\r\n            accountId: accountId || undefined,\r\n            category: categories.find(c => c.id === categoryId)?.name,\r\n            account: accounts.find(a => a.id === accountId)?.name\r\n        };\r\n\r\n        if (endDate) {\r\n            data.endDate = new Date(endDate).toISOString();\r\n        }\r\n\r\n        try {\r\n            if (commitmentToEdit) {\r\n                await updateCommitment(commitmentToEdit.id, data);\r\n            } else {\r\n                await addCommitment(data);\r\n            }\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(\"Error saving commitment:\", error);\r\n        }\r\n    };\r\n\r\n    // Close on Escape\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape' && isOpen) onClose();\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [isOpen, onClose]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\r\n    const currencyCode = activeLedger?.currency || 'USD';\r\n    const currencySymbol = currencyCode === 'PEN' ? 'S/.' : (currencyCode === 'EUR' ? '€' : '$');\r\n\r\n    // Helper to get frequency label\r\n    const getFrequencyLabel = (freq: string) => {\r\n        const map: any = { 'WEEKLY': 'Semanas', 'BIWEEKLY': 'Quincenas', 'MONTHLY': 'Meses', 'QUARTERLY': 'Trimestres', 'SEMIANNUAL': 'Semestres', 'ANNUAL': 'Años' };\r\n        return map[freq] || 'Meses';\r\n    };\r\n\r\n    // Helper text for summary\r\n    const frequencyText = frequency === 'MONTHLY' ? '1 mes' :\r\n        frequency === 'WEEKLY' ? '1 semana' :\r\n            frequency === 'ANNUAL' ? '1 año' :\r\n                frequency === 'BIWEEKLY' ? '2 semanas' :\r\n                    frequency === 'QUARTERLY' ? '3 meses' : '1 periodo';\r\n\r\n    const accountName = accounts.find(a => a.id === accountId)?.name || '...';\r\n    const categoryName = categories.find(c => c.id === categoryId)?.name || '...';\r\n    const startDateFormatted = nextDueDate ? new Date(nextDueDate).toLocaleDateString('es-ES') : '...';\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"bg-white dark:bg-[#1e2530] w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n                {/* Header */}\r\n                <div className=\"px-8 py-5 border-b border-gray-100 dark:border-white/5 flex justify-between items-start\">\r\n                    <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white\">\r\n                            {commitmentToEdit ? 'Editar Compromiso' : 'Nuevo Compromiso'}\r\n                        </h2>\r\n                        <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">Configura los detalles de tus transacciones automáticas.</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\">\r\n                        <span className=\"material-icons text-gray-500\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"flex-1 overflow-y-auto p-8 pt-6\">\r\n\r\n                    {/* Tabs (Visual only for now as Commitments are typically Expenses) */}\r\n                    <div className=\"flex justify-center mb-8\">\r\n                        <div className=\"bg-gray-100 dark:bg-slate-800 p-1 rounded-2xl flex w-full max-w-md\">\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setTransactionType('INCOME')}\r\n                                className={`flex-1 py-1.5 rounded-xl text-sm font-bold transition-all ${transactionType === 'INCOME' ? 'bg-white dark:bg-[#1e2530] text-success shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:text-gray-400'}`}\r\n                            >\r\n                                Ingreso\r\n                            </button>\r\n                            <button\r\n                                type=\"button\"\r\n                                onClick={() => setTransactionType('EXPENSE')}\r\n                                className={`flex-1 py-1.5 rounded-xl text-sm font-bold transition-all ${transactionType === 'EXPENSE' ? 'bg-white dark:bg-[#1e2530] text-primary shadow-sm' : 'text-gray-500 hover:text-gray-700 dark:text-gray-400'}`}\r\n                            >\r\n                                Gasto\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-6\">\r\n\r\n                        {/* Name */}\r\n                        <div className=\"col-span-1\">\r\n                            <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Nombre del Compromiso</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                className=\"w-full bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white\"\r\n                                placeholder=\"Ej. Netflix Premium\"\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Amount */}\r\n                        <div className=\"col-span-1\">\r\n                            <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Monto</label>\r\n                            <div className=\"relative\">\r\n                                <span className={`absolute left-4 top-1/2 -translate-y-1/2 font-bold ${transactionType === 'INCOME' ? 'text-success' : 'text-gray-500'}`}>{currencySymbol}</span>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    value={amount}\r\n                                    onChange={(e) => setAmount(e.target.value)}\r\n                                    className={`w-full bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white font-mono font-bold ${transactionType === 'INCOME' ? 'text-success' : ''}`}\r\n                                    placeholder=\"0.00\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Frequency Section */}\r\n                        <div className=\"col-span-2 mt-2\">\r\n                            <h4 className=\"text-lg font-bold text-gray-800 dark:text-white mb-4\">Frecuencia</h4>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                {/* Repetir cada */}\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Repetir cada</label>\r\n                                    <div className=\"flex gap-3\">\r\n                                        <input\r\n                                            type=\"number\"\r\n                                            value=\"1\"\r\n                                            disabled\r\n                                            className=\"w-16 bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-gray-700 rounded-xl px-3 py-3 text-center outline-none text-gray-500 cursor-not-allowed\"\r\n                                        />\r\n                                        <select\r\n                                            value={frequency}\r\n                                            onChange={(e: any) => setFrequency(e.target.value)}\r\n                                            className=\"flex-1 bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"WEEKLY\">Semana(s)</option>\r\n                                            <option value=\"BIWEEKLY\">Quincena(s)</option>\r\n                                            <option value=\"MONTHLY\">Mes(es)</option>\r\n                                            <option value=\"QUARTERLY\">Trimestre(s)</option>\r\n                                            <option value=\"SEMIANNUAL\">Semestre(s)</option>\r\n                                            <option value=\"ANNUAL\">Año(s)</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Próxima ocurrencia */}\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Próxima ocurrencia</label>\r\n                                    <div className=\"relative\">\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            value={nextDueDate}\r\n                                            onChange={(e) => setNextDueDate(e.target.value)}\r\n                                            className=\"w-full bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white\"\r\n                                        />\r\n                                        <div className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400\">\r\n                                            <span className=\"material-symbols-outlined text-[20px]\">calendar_today</span>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Toggle End Date */}\r\n                            <div className=\"mt-4 flex items-center gap-3\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setEndDate(endDate ? '' : new Date().toISOString().split('T')[0])}\r\n                                    className={`relative w-11 h-6 rounded-full transition-colors ${endDate ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}\r\n                                >\r\n                                    <span className={`absolute top-1 left-1 bg-white w-4 h-4 rounded-full transition-transform ${endDate ? 'translate-x-5' : ''}`} />\r\n                                </button>\r\n                                <span className=\"text-sm font-medium text-gray-700 dark:text-gray-300\">Terminar después de una fecha</span>\r\n                            </div>\r\n\r\n                            {endDate && (\r\n                                <div className=\"mt-4 animate-fade-in-down\">\r\n                                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Fecha de Finalización</label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        value={endDate}\r\n                                        onChange={(e) => setEndDate(e.target.value)}\r\n                                        className=\"w-full md:w-1/2 bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl px-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white\"\r\n                                    />\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* Classification Section */}\r\n                        <div className=\"col-span-2 mt-2\">\r\n                            <h4 className=\"text-lg font-bold text-gray-800 dark:text-white mb-4\">Clasificación</h4>\r\n\r\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                                {/* Account */}\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Cuenta</label>\r\n                                    <div className=\"relative\">\r\n                                        <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 material-symbols-outlined text-[20px]\">account_balance_wallet</span>\r\n                                        <select\r\n                                            value={accountId}\r\n                                            onChange={(e) => setAccountId(e.target.value)}\r\n                                            className=\"w-full bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white appearance-none cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"\">Seleccionar Cuenta</option>\r\n                                            {accounts.map(acc => (\r\n                                                <option key={acc.id} value={acc.id}>{acc.name}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <span className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 material-symbols-outlined\">expand_more</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* Category */}\r\n                                <div>\r\n                                    <label className=\"block text-xs font-bold text-gray-500 dark:text-gray-400 mb-2\">Categoría</label>\r\n                                    <div className=\"relative\">\r\n                                        <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 material-symbols-outlined text-[20px]\">category</span>\r\n                                        <select\r\n                                            value={categoryId}\r\n                                            onChange={(e) => setCategoryId(e.target.value)}\r\n                                            className=\"w-full bg-white dark:bg-[#252b36] border border-gray-200 dark:border-gray-700 rounded-xl pl-12 pr-4 py-3 outline-none focus:ring-2 focus:ring-primary/50 transition-all dark:text-white appearance-none cursor-pointer\"\r\n                                        >\r\n                                            <option value=\"\">Seleccionar Categoría</option>\r\n                                            {categories.map(cat => (\r\n                                                <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                                            ))}\r\n                                        </select>\r\n                                        <span className=\"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400 material-symbols-outlined\">expand_more</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Status Type - Keep it simple/hidden or integrated? \r\n                            The example image layout separates these. The prompt didn't strictly say to remove existing logic, but to match layout.\r\n                            I will put 'Tipo' (Fixed/Temporal) in a small section if needed, or maybe just default to Fixed?\r\n                            The user said \"Gasto Fijo\" implies Fixed. But I also have 'Status'.\r\n                            I'll place them in a subtle \"Opciones Adicionales\" or just hide them if defaults are good.\r\n                            Defaults: Status=PENDING, Type=FIXED.\r\n                            I'll add a small advanced row for Type/Status if needed, or assume defaults.\r\n                            Given user request \"design and distribution of image\", I should stick close to image. Image doesn't show Type/Status.\r\n                            I'll keep them but maybe less prominent or visually consistent.\r\n                        */}\r\n                    </div>\r\n\r\n                    {/* Summary Box */}\r\n                    <div className={`mt-8 p-4 rounded-2xl flex gap-3 text-sm border ${transactionType === 'INCOME' ? 'bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200 border-green-100 dark:border-green-800/50' : 'bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200 border-blue-100 dark:border-blue-800/50'}`}>\r\n                        <span className=\"material-symbols-outlined shrink-0\">info</span>\r\n                        <p>\r\n                            <span className=\"font-bold\">Resumen:</span> Se registrará un <span className=\"font-bold\">{transactionType === 'INCOME' ? 'Ingreso' : 'Gasto'}</span> de <span className=\"font-bold\">{currencySymbol}{amount || '0.00'}</span> para <span className=\"font-bold\">{name || '...'}</span> cada <span className=\"font-bold\">{frequencyText}</span>, comenzando el <span className=\"font-bold\">{startDateFormatted}</span> en la cuenta <span className=\"font-bold\">{accountName}</span>.\r\n                        </p>\r\n                    </div>\r\n\r\n                </form>\r\n\r\n                {/* Footer buttons */}\r\n                <div className=\"p-6 bg-white dark:bg-[#1e2530] border-t border-gray-100 dark:border-white/5 flex justify-end gap-4\">\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={onClose}\r\n                        className=\"px-6 py-2.5 rounded-xl font-bold text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white transition-colors\"\r\n                    >\r\n                        Cancelar\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        className={`px-8 py-2.5 rounded-xl font-bold text-white shadow-lg transition-all transform hover:-translate-y-0.5 active:translate-y-0 ${transactionType === 'INCOME' ? 'bg-green-600 shadow-green-600/30 hover:bg-green-700' : 'bg-primary shadow-primary/30 hover:bg-primary/90'}`}\r\n                    >\r\n                        {commitmentToEdit ? 'Guardar Cambios' : 'Crear Compromiso'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 882, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/DateRangeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useMemo, useLayoutEffect } from 'react';\nimport { DayPicker, DateRange } from 'react-day-picker';\nimport { format, startOfDay, endOfDay, subDays, startOfMonth, endOfMonth, subMonths, addMonths } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport 'react-day-picker/dist/style.css';\n\ninterface DateRangeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onApply: (start: Date, end: Date) => void;\n    initialStartDate?: Date | null;\n    initialEndDate?: Date | null;\n}\n\ninterface QuickRange {\n    label: string;\n    description?: string;\n    getRange: () => { from: Date; to: Date };\n}\n\nconst quickRanges: QuickRange[] = [\n    {\n        label: 'Hoy',\n        getRange: () => {\n            const today = new Date();\n            return { from: startOfDay(today), to: endOfDay(today) };\n        }\n    },\n    {\n        label: 'Ayer',\n        getRange: () => {\n            const yesterday = subDays(new Date(), 1);\n            return { from: startOfDay(yesterday), to: endOfDay(yesterday) };\n        }\n    },\n    {\n        label: 'Últimos 7 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 6)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Últimos 30 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 29)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Este mes',\n        getRange: () => ({\n            from: startOfMonth(new Date()),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Mes pasado',\n        getRange: () => {\n            const reference = subMonths(new Date(), 1);\n            return {\n                from: startOfMonth(reference),\n                to: endOfMonth(reference)\n            };\n        }\n    },\n    {\n        label: 'Últimos 3 meses',\n        getRange: () => ({\n            from: startOfMonth(subMonths(new Date(), 2)),\n            to: endOfDay(new Date())\n        })\n    }\n];\n\nconst monthNames = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];\n\nexport const DateRangeModal: React.FC<DateRangeModalProps> = ({ isOpen, onClose, onApply, initialStartDate, initialEndDate }) => {\n    const [range, setRange] = useState<DateRange | undefined>({\n        from: initialStartDate || undefined,\n        to: initialEndDate || undefined\n    });\n    const [activePreset, setActivePreset] = useState<string | null>(null);\n    const [leftMonth, setLeftMonth] = useState<Date>(() => startOfMonth(initialStartDate || new Date()));\n    const [rightMonth, setRightMonth] = useState<Date>(() => addMonths(startOfMonth(initialStartDate || new Date()), 1));\n    const [isMounted, setIsMounted] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n\n    const syncCalendarMonths = (fromDate?: Date | null, toDate?: Date | null) => {\n        const baseLeft = startOfMonth(fromDate || new Date());\n        let baseRight = toDate ? startOfMonth(toDate) : addMonths(baseLeft, 1);\n        if (baseRight <= baseLeft) {\n            baseRight = addMonths(baseLeft, 1);\n        }\n        setLeftMonth(baseLeft);\n        setRightMonth(baseRight);\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setRange({\n                from: initialStartDate || undefined,\n                to: initialEndDate || undefined\n            });\n            setActivePreset(null);\n            syncCalendarMonths(initialStartDate || undefined, initialEndDate || undefined);\n        }\n    }, [isOpen, initialStartDate, initialEndDate]);\n\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'Escape') {\n                onClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, onClose]);\n\n    useLayoutEffect(() => {\n        if (isOpen) {\n            setIsMounted(true);\n            const raf = requestAnimationFrame(() => setIsVisible(true));\n            return () => cancelAnimationFrame(raf);\n        }\n\n        if (isMounted) {\n            setIsVisible(false);\n            const timeout = setTimeout(() => setIsMounted(false), 300);\n            return () => clearTimeout(timeout);\n        }\n    }, [isOpen, isMounted]);\n\n    const years = useMemo(() => {\n        const current = new Date().getFullYear();\n        return Array.from({ length: 11 }, (_, idx) => current - 5 + idx);\n    }, []);\n\n    const handleRangeSelect = (selected: DateRange | undefined) => {\n        if (!selected?.from) {\n            setRange(undefined);\n            return;\n        }\n\n        if (!selected.to) {\n            setRange({ from: selected.from, to: undefined });\n            syncCalendarMonths(selected.from, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        const start = startOfDay(selected.from);\n        const end = endOfDay(selected.to);\n\n        if (end < start) {\n            setRange({ from: end, to: undefined });\n            syncCalendarMonths(end, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        setRange({ from: start, to: end });\n        syncCalendarMonths(start, end);\n        setActivePreset(null);\n    };\n\n    const handlePresetClick = (preset: QuickRange) => {\n        const presetRange = preset.getRange();\n        setRange(presetRange);\n        setActivePreset(preset.label);\n        syncCalendarMonths(presetRange.from, presetRange.to);\n    };\n\n    const handleApply = () => {\n        if (range?.from && range?.to) {\n            onApply(range.from, range.to);\n            onClose();\n        }\n    };\n\n    const formattedRange = useMemo(() => {\n        if (!range?.from || !range?.to) return 'Selecciona un rango';\n        return `${format(range.from, \"d MMM, yyyy\", { locale: es })} - ${format(range.to, \"d MMM, yyyy\", { locale: es })}`;\n    }, [range]);\n\n    if (!isMounted) return null;\n\n    const handleLeftMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        setLeftMonth(normalized);\n        if (rightMonth <= normalized) {\n            setRightMonth(addMonths(normalized, 1));\n        }\n    };\n\n    const handleRightMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        if (normalized <= leftMonth) {\n            setRightMonth(addMonths(leftMonth, 1));\n            return;\n        }\n        setRightMonth(normalized);\n    };\n\n    const MonthControls = ({\n        month,\n        onChange,\n        disablePrev,\n        disableNext\n    }: {\n        month: Date;\n        onChange: (date: Date) => void;\n        disablePrev?: boolean;\n        disableNext?: boolean;\n    }) => (\n        <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n                <select\n                    value={month.getMonth()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setMonth(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {monthNames.map((name, idx) => (\n                        <option key={name} value={idx}>\n                            {name.charAt(0).toUpperCase() + name.slice(1)}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    value={month.getFullYear()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setFullYear(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {years.map((year) => (\n                        <option key={year} value={year}>\n                            {year}\n                        </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"flex items-center gap-1 text-primary\">\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, -1))}\n                    disabled={disablePrev}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_left</span>\n                </button>\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, 1))}\n                    disabled={disableNext}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_right</span>\n                </button>\n            </div>\n        </div>\n    );\n\n    return (\n        <div\n            className={`fixed inset-0 z-[120] flex transition-opacity duration-400 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100' : 'opacity-0'}`}\n            onClick={onClose}\n        >\n            <div\n                className=\"hidden lg:block h-full\"\n                style={{ width: 'var(--sidebar-width, 280px)' }}\n            />\n            <div\n                className={`flex-1 w-full relative flex items-center justify-center bg-slate-900/35 p-3 sm:p-4 transition-[opacity,backdrop-filter] duration-300 ease-out ${isVisible ? 'opacity-100 backdrop-blur-md' : 'opacity-0 backdrop-blur-none'}`}\n            >\n                <div\n                    className={`date-range-modal w-full max-w-5xl bg-white dark:bg-[#101828] rounded-[28px] shadow-2xl border border-slate-200/80 dark:border-white/10 p-4 sm:p-5 transition-all duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-8'}`}\n                    onClick={(e) => e.stopPropagation()}\n                >\n                    <div className=\"flex items-start justify-between gap-3 mb-4\">\n                        <h3 className=\"text-base font-black text-slate-900 dark:text-white\">Seleccionar Rango</h3>\n                        <button\n                            onClick={onClose}\n                            className=\"size-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:text-primary hover:bg-primary/10 transition-colors dark:bg-white/10 dark:text-white\"\n                        >\n                            <span className=\"material-symbols-outlined text-lg\">close</span>\n                        </button>\n                    </div>\n\n                    <div className=\"flex flex-col lg:flex-row gap-4\">\n                        <aside className=\"flex flex-col gap-2 w-full lg:w-56\">\n                            <p className=\"text-[9px] font-semibold text-slate-500 uppercase tracking-wide\">Rangos rápidos</p>\n                            <div className=\"grid grid-cols-2 lg:grid-cols-1 gap-2\">\n                                {quickRanges.map((preset) => {\n                                    const isActive = activePreset === preset.label;\n                                    return (\n                                        <button\n                                            key={preset.label}\n                                            onClick={() => handlePresetClick(preset)}\n                                            className={`text-left px-3 py-1.5 rounded-2xl border text-[11px] font-semibold transition-all ${\n                                                isActive\n                                                    ? 'bg-primary/10 border-primary/40 text-primary'\n                                                    : 'border-slate-200 text-slate-600 hover:border-primary/30 hover:text-primary'\n                                            }`}\n                                        >\n                                            {preset.label}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                        </aside>\n\n                        <div className=\"flex-1 overflow-hidden px-2 md:px-4\">\n                            <style>{`\n                                .date-range-modal .rdp {\n                                    --rdp-cell-size: 30px;\n                                    --rdp-accent-color: #2563eb;\n                                    --rdp-background-color: rgba(37, 99, 235, 0.12);\n                                    --rdp-range_border-radius: 999px;\n                                    margin: 0;\n                                    color: #0f172a;\n                                }\n                                .dark .date-range-modal .rdp {\n                                    color: #f8fafc;\n                                }\n                                .date-range-modal .rdp-head_cell {\n                                    color: #94a3b8;\n                                    font-weight: 600;\n                                    font-size: 0.7rem;\n                                    text-transform: uppercase;\n                                }\n                                .dark .date-range-modal .rdp-head_cell {\n                                    color: rgba(255,255,255,0.7);\n                                }\n                                .date-range-modal .rdp-day {\n                                    font-weight: 500;\n                                    font-size: 0.85rem;\n                                }\n                                .date-range-modal .rdp-day_selected:not([disabled]) {\n                                    background-color: #2563eb;\n                                    color: #fff;\n                                }\n                                .date-range-modal .rdp-day_range_middle {\n                                    background-color: rgba(37,99,235,0.12);\n                                    color: inherit;\n                                    border-radius: 999px !important;\n                                }\n                                .date-range-modal .rdp-root,\n                                .date-range-modal .rdp-months,\n                                .date-range-modal .rdp-month {\n                                    width: 100%;\n                                }\n                                .date-range-modal .rdp-caption,\n                                .date-range-modal .rdp-nav {\n                                    display: none;\n                                }\n                            `}</style>\n                            <div className=\"w-full flex flex-col md:flex-row gap-3 md:gap-6 justify-between\">\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={leftMonth}\n                                        onChange={handleLeftMonthChange}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={leftMonth}\n                                        onMonthChange={handleLeftMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={rightMonth}\n                                        onChange={handleRightMonthChange}\n                                        disablePrev={rightMonth <= addMonths(leftMonth, 1)}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={rightMonth}\n                                        onMonthChange={handleRightMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-5 border-t border-slate-100 dark:border-white/10 pt-3 flex flex-col gap-3\">\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 flex-1\">\n                                <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                                    <input\n                                        readOnly\n                                        value={range?.from ? format(range.from, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Inicio\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                    <span className=\"text-slate-400 text-xs\">-</span>\n                                    <input\n                                        readOnly\n                                        value={range?.to ? format(range.to, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Fin\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                </div>\n                                <p className=\"text-[11px] text-slate-400 dark:text-white/60\">{formattedRange}</p>\n                            </div>\n                            <div className=\"flex flex-col sm:flex-row items-center gap-2 justify-end w-full sm:w-auto\">\n                                <button onClick={onClose} className=\"px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-[11px] font-semibold hover:border-slate-300 dark:border-white/10 dark:text-white\">\n                                    Cancelar\n                                </button>\n                                <button\n                                    onClick={handleApply}\n                                    disabled={!range?.from || !range?.to}\n                                    className=\"px-6 py-2 rounded-xl bg-primary text-white text-[11px] font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\"\n                                >\n                                    Aplicar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1607, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/DeleteConfirmModal.tsx"],"sourcesContent":["\nimport React from 'react';\n\ninterface DeleteConfirmModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title?: string;\n  message?: string;\n  itemName?: string;\n}\n\nexport const DeleteConfirmModal: React.FC<DeleteConfirmModalProps> = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title = \"¿Eliminar elemento?\",\n  message = \"Estás a punto de eliminar este elemento. Esta acción no se puede deshacer.\",\n  itemName\n}) => {\n  // Close on Escape key\n  React.useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape' && isOpen) {\n        onClose();\n      }\n    };\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, onClose]);\n\n  if (!isOpen) return null;\n\n  return (\n    <div\n      className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-[110] flex items-center justify-center p-4 sm:p-6 bg-slate-900/40 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\n      onClick={onClose}\n    >\n      <div\n        className=\"glass-card relative w-full max-w-md transform overflow-hidden rounded-[2.5rem] shadow-premium transition-all animate-slide-up flex flex-col items-center pt-10 pb-8 px-8 sm:px-10 border border-white/80 dark:border-slate-800\"\n        onClick={(e) => e.stopPropagation()}\n      >\n        {/* Icon Container */}\n        <div className=\"mb-6 flex size-20 items-center justify-center rounded-full bg-red-50 dark:bg-red-900/20\">\n          <span className=\"material-symbols-outlined text-[40px] text-red-500\">priority_high</span>\n        </div>\n\n        {/* Headline */}\n        <h3 className=\"text-slate-900 dark:text-white text-xl font-bold tracking-tight text-center mb-2\">\n          {title}\n        </h3>\n\n        {/* Body Text */}\n        <div className=\"text-center mb-8 px-4\">\n          <p className=\"text-slate-500 dark:text-slate-400 text-sm font-medium leading-relaxed\">\n            {message} {itemName && (\n              <span className=\"font-bold text-slate-900 dark:text-white\">\"{itemName}\"</span>\n            )}\n          </p>\n        </div>\n\n        {/* Button Group */}\n        <div className=\"flex w-full gap-3\">\n          <button\n            onClick={onClose}\n            className=\"flex-1 cursor-pointer items-center justify-center rounded-xl h-12 px-6 bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-slate-700 dark:text-slate-300 text-sm font-bold transition-all focus:outline-none\"\n          >\n            Cancelar\n          </button>\n          <button\n            onClick={() => {\n              onConfirm();\n              onClose();\n            }}\n            className=\"flex-1 cursor-pointer items-center justify-center rounded-xl h-12 px-6 bg-red-500 hover:bg-red-600 text-white text-sm font-bold shadow-lg shadow-red-500/30 transition-all transform active:scale-95 focus:outline-none\"\n          >\n            Eliminar\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;;;;AAWO,MAAM,qBAAwD,CAAC,EACpE,MAAM,EACN,OAAO,EACP,SAAS,EACT,QAAQ,qBAAqB,EAC7B,UAAU,4EAA4E,EACtF,QAAQ,EACT;;IACC,sBAAsB;IACtB,wKAAK,CAAC,SAAS;wCAAC;YACd,MAAM;8DAAgB,CAAC;oBACrB,IAAI,EAAE,GAAG,KAAK,YAAY,QAAQ;wBAChC;oBACF;gBACF;;YACA,OAAO,gBAAgB,CAAC,WAAW;YACnC;gDAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;uCAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6LAAC;YACC,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAGjC,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAK,WAAU;kCAAqD;;;;;;;;;;;8BAIvE,6LAAC;oBAAG,WAAU;8BACX;;;;;;8BAIH,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBAAE,WAAU;;4BACV;4BAAQ;4BAAE,0BACT,6LAAC;gCAAK,WAAU;;oCAA2C;oCAAE;oCAAS;;;;;;;;;;;;;;;;;;8BAM5E,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;sCAGD,6LAAC;4BACC,SAAS;gCACP;gCACA;4BACF;4BACA,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;GAtEa;KAAA"}},
    {"offset": {"line": 1751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/CommitmentDetailsModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { Commitment } from '@/types';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { CategoryIcon } from './CategoryIcon';\r\nimport { DeleteConfirmModal } from './DeleteConfirmModal';\r\n\r\ninterface CommitmentDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    commitment: Commitment | null;\r\n    onEdit: (c: Commitment) => void;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport const CommitmentDetailsModal = ({ isOpen, onClose, commitment, onEdit, onDelete }: CommitmentDetailsModalProps) => {\r\n    const {\r\n        ledgers,\r\n        activeBookId,\r\n        accounts,\r\n        categories,\r\n        toggleCommitmentStatus,\r\n        transactions\r\n    } = useFinance();\r\n\r\n    const [history, setHistory] = useState<any[]>([]);\r\n    const [isDeleteConfirmOpen, setIsDeleteConfirmOpen] = useState(false);\r\n\r\n    // Fetch history when commitment changes\r\n    useEffect(() => {\r\n        if (!commitment || !isOpen) return;\r\n\r\n        // Try to find transactions linked by ID first, then by name (legacy)\r\n        const related = transactions.filter(t =>\r\n            (t.commitment_id === commitment.id) ||\r\n            (t.description.includes(commitment.name) && t.description.includes('[Compromiso]'))\r\n        ).sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime())\r\n            .slice(0, 5);\r\n\r\n        setHistory(related);\r\n    }, [commitment, isOpen, transactions]);\r\n\r\n    if (!isOpen || !commitment) return null;\r\n\r\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\r\n    const currency = activeLedger?.currency || 'USD';\r\n    const currencySymbol = currency === 'PEN' ? 'S/.' : (currency === 'EUR' ? '€' : '$');\r\n\r\n    const accountName = accounts.find(a => a.id === commitment.accountId)?.name || commitment.account || 'Sin cuenta';\r\n    const categoryObj = categories.find(c => c.id === commitment.categoryId) || categories.find(c => c.name === commitment.category);\r\n    const categoryName = categoryObj?.name || commitment.category || 'General';\r\n    const categoryIcon = categoryObj?.icon || 'grid_view';\r\n    const categoryColor = categoryObj?.color || 'slate';\r\n\r\n    const getDaysRemaining = (dateStr: string) => {\r\n        const today = new Date();\r\n        today.setHours(0, 0, 0, 0);\r\n        // Parse YYYY-MM-DD manually to prevent UTC timezone shift\r\n        const [year, month, day] = dateStr.split('-').map(Number);\r\n        const due = new Date(year, month - 1, day);\r\n        due.setHours(0, 0, 0, 0);\r\n        const diff = due.getTime() - today.getTime();\r\n        return Math.ceil(diff / (1000 * 60 * 60 * 24));\r\n    };\r\n\r\n    const daysRemaining = getDaysRemaining(commitment.nextDueDate);\r\n    const isOverdue = daysRemaining < 0 && commitment.status === 'PENDING';\r\n    const isPaid = commitment.status === 'PAID';\r\n\r\n    const frequencyMap: Record<string, string> = {\r\n        'ONCE': 'Una vez',\r\n        'DAILY': 'Diario',\r\n        'WEEKLY': 'Semanal',\r\n        'BIWEEKLY': 'Quincenal',\r\n        'MONTHLY': 'Mensual',\r\n        'YEARLY': 'Anual'\r\n    };\r\n    const translatedFrequency = frequencyMap[commitment.frequency] || commitment.frequency;\r\n\r\n    const handleToggleStatus = async () => {\r\n        await toggleCommitmentStatus(commitment.id, commitment.status);\r\n        onClose(); // Close after action? or stay open? User might want to see update. \r\n        // Better to close or refresh.\r\n    };\r\n\r\n    const handleDeleteClick = () => {\r\n        setIsDeleteConfirmOpen(true);\r\n    };\r\n\r\n    const confirmDelete = () => {\r\n        onDelete(commitment.id);\r\n        setIsDeleteConfirmOpen(false);\r\n        onClose();\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <div\r\n                className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-[100] flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\r\n                onClick={onClose}\r\n            >\r\n                <div\r\n                    className=\"bg-white dark:bg-[#1e2530] w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\"\r\n                    onClick={(e) => e.stopPropagation()}\r\n                >\r\n                    {/* Header */}\r\n                    <div className=\"flex justify-between items-start p-6 border-b border-gray-100 dark:border-white/5\">\r\n                        <div className=\"flex items-center gap-4\">\r\n                            <div className=\"size-14 rounded-2xl bg-gray-100 dark:bg-white/5 flex items-center justify-center text-3xl\">\r\n                                {commitment.name.charAt(0).toUpperCase()}\r\n                            </div>\r\n                            <div>\r\n                                <h2 className=\"text-xl font-bold text-gray-800 dark:text-white leading-tight\">{commitment.name}</h2>\r\n                                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-0.5 flex items-center gap-2\">\r\n                                    <span className=\"capitalize\">{categoryName}</span>\r\n                                    <span className=\"size-1 rounded-full bg-gray-300\"></span>\r\n                                    <span className=\"capitalize\">{translatedFrequency}</span>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className={`px-3 py-1 rounded-full text-xs font-bold border ${isPaid ? 'bg-emerald-100 text-emerald-700 border-emerald-200 dark:bg-emerald-500/10 dark:text-emerald-400 dark:border-emerald-500/20' :\r\n                                isOverdue ? 'bg-rose-100 text-rose-700 border-rose-200 dark:bg-rose-500/10 dark:text-rose-400 dark:border-rose-500/20' :\r\n                                    'bg-amber-100 text-amber-700 border-amber-200 dark:bg-amber-500/10 dark:text-amber-400 dark:border-amber-500/20'\r\n                                }`}>\r\n                                {isPaid ? 'Pagado' : isOverdue ? 'Vencido' : 'Pendiente'}\r\n                            </div>\r\n                            <button onClick={() => onEdit(commitment)} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl text-gray-400 hover:text-primary transition-colors\">\r\n                                <span className=\"material-symbols-outlined text-[20px]\">edit</span>\r\n                            </button>\r\n                            <button onClick={handleDeleteClick} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-xl text-gray-400 hover:text-rose-500 transition-colors\">\r\n                                <span className=\"material-symbols-outlined text-[20px]\">delete</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"overflow-y-auto p-6 space-y-8 custom-scrollbar\">\r\n                        {/* Main Payment Info */}\r\n                        <div>\r\n                            <p className=\"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1\">Monto a pagar</p>\r\n                            <div className=\"flex items-baseline gap-2\">\r\n                                <span className=\"text-4xl font-black text-gray-800 dark:text-white tracking-tight\">\r\n                                    {currencySymbol}{commitment.amount.toFixed(2)}\r\n                                </span>\r\n                                <span className=\"text-sm font-bold text-gray-400 uppercase\">{currency}</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Cards Row */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            {/* Next Due */}\r\n                            <div className=\"p-4 rounded-2xl bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-500/20\">\r\n                                <div className=\"flex justify-between items-start mb-2\">\r\n                                    <span className=\"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-widest\">Próximo Vencimiento</span>\r\n                                </div>\r\n                                <div className=\"text-lg font-bold text-blue-900 dark:text-blue-100 mb-1\">\r\n                                    {(() => {\r\n                                        const [y, m, d] = commitment.nextDueDate.split('-').map(Number);\r\n                                        const localDate = new Date(y, m - 1, d);\r\n                                        return localDate.toLocaleDateString('es-ES', { day: 'numeric', month: 'long', year: 'numeric' });\r\n                                    })()}\r\n                                </div>\r\n                                <div className=\"w-full bg-blue-200 dark:bg-blue-800/30 h-1.5 rounded-full overflow-hidden mt-2\">\r\n                                    {/* Simple progress visual: 100% full if overdue/today, partial otherwise */}\r\n                                    <div\r\n                                        className={`h-full rounded-full ${daysRemaining < 3 ? 'bg-rose-500' : 'bg-blue-500'}`}\r\n                                        style={{ width: `${Math.max(0, Math.min(100, 100 - (daysRemaining * 3)))}%` }} // Arbitrary filling logic\r\n                                    ></div>\r\n                                </div>\r\n                                <p className=\"text-xs font-medium text-blue-600/70 dark:text-blue-400/70 mt-2 text-right\">\r\n                                    {daysRemaining < 0 ? `${Math.abs(daysRemaining)} días vencido` : daysRemaining === 0 ? 'Vence hoy' : `${daysRemaining} días restantes`}\r\n                                </p>\r\n                            </div>\r\n\r\n                            {/* Details Grid */}\r\n                            <div className=\"grid grid-cols-1 gap-2\">\r\n                                <div className=\"p-3 rounded-xl bg-gray-50 dark:bg-white/5 flex items-center gap-3\">\r\n                                    <div className=\"size-8 rounded-lg bg-gray-200 dark:bg-white/10 flex items-center justify-center text-gray-500\">\r\n                                        <span className=\"material-symbols-outlined text-[18px]\">credit_card</span>\r\n                                    </div>\r\n                                    <div className=\"overflow-hidden\">\r\n                                        <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Método de Pago</p>\r\n                                        <p className=\"text-sm font-bold text-gray-700 dark:text-gray-200 truncate\">{accountName}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"p-3 rounded-xl bg-gray-50 dark:bg-white/5 flex items-center gap-3\">\r\n                                    <div className=\"size-8 rounded-lg bg-gray-200 dark:bg-white/10 flex items-center justify-center text-gray-500\">\r\n                                        <span className=\"material-symbols-outlined text-[18px]\">update</span>\r\n                                    </div>\r\n                                    <div>\r\n                                        <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Frecuencia</p>\r\n                                        <p className=\"text-sm font-bold text-gray-700 dark:text-gray-200 capitalize\">{translatedFrequency}</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"p-3 rounded-xl bg-gray-50 dark:bg-white/5 flex items-center gap-3\">\r\n                                    <div className={`size-8 rounded-lg flex items-center justify-center text-white shadow-sm ring-1 ring-white/20`} style={{ backgroundColor: categoryColor }}>\r\n                                        <span className=\"material-symbols-outlined text-[18px]\">{categoryIcon}</span>\r\n                                    </div>\r\n                                    <div className=\"overflow-hidden\">\r\n                                        <p className=\"text-[10px] font-bold text-gray-400 uppercase tracking-wider\">Categoría</p>\r\n                                        <p className=\"text-sm font-bold text-gray-700 dark:text-gray-200 truncate\">{categoryName}</p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* History */}\r\n                        <div>\r\n                            <div className=\"flex justify-between items-center mb-4\">\r\n                                <h3 className=\"text-sm font-bold text-gray-800 dark:text-white\">Historial de Pagos</h3>\r\n                                <button className=\"text-xs font-medium text-primary hover:underline\">Ver todo</button>\r\n                            </div>\r\n                            <div className=\"border border-gray-100 dark:border-white/5 rounded-2xl overflow-hidden\">\r\n                                {history.length === 0 ? (\r\n                                    <div className=\"p-8 text-center text-gray-400 text-sm\">No hay historial reciente</div>\r\n                                ) : (\r\n                                    <table className=\"w-full\">\r\n                                        <thead className=\"bg-gray-50 dark:bg-white/5 text-xs text-gray-400 font-semibold uppercase tracking-wider text-left\">\r\n                                            <tr>\r\n                                                <th className=\"px-4 py-3\">Fecha</th>\r\n                                                <th className=\"px-4 py-3\">Estado</th>\r\n                                                <th className=\"px-4 py-3 text-right\">Monto</th>\r\n                                            </tr>\r\n                                        </thead>\r\n                                        <tbody className=\"divide-y divide-gray-100 dark:divide-white/5\">\r\n                                            {history.map((h, i) => (\r\n                                                <tr key={i} className=\"hover:bg-gray-50 dark:hover:bg-white/5 transition-colors\">\r\n                                                    <td className=\"px-4 py-3 text-sm font-medium text-gray-600 dark:text-gray-300\">\r\n                                                        {new Date(h.date).toLocaleDateString('es-ES', { day: '2-digit', month: 'short', year: 'numeric' })}\r\n                                                    </td>\r\n                                                    <td className=\"px-4 py-3\">\r\n                                                        <span className=\"inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold bg-emerald-100 text-emerald-700 dark:bg-emerald-500/20 dark:text-emerald-400\">\r\n                                                            <span className=\"material-symbols-outlined text-[12px]\">check</span> Pagado\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td className=\"px-4 py-3 text-right text-sm font-bold text-gray-800 dark:text-white\">\r\n                                                        {currencySymbol}{Number(h.amount).toFixed(2)}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            ))}\r\n                                        </tbody>\r\n                                    </table>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Footer Actions */}\r\n                    <div className=\"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50/50 dark:bg-black/20 flex gap-3\">\r\n                        <button\r\n                            onClick={handleToggleStatus}\r\n                            disabled={isPaid}\r\n                            className={`flex-1 flex items-center justify-center gap-2 py-3.5 rounded-xl font-bold shadow-lg shadow-blue-500/20 transition-all hover:scale-[1.02] active:scale-[0.98] ${isPaid\r\n                                ? 'bg-gray-100 text-gray-400 cursor-not-allowed shadow-none'\r\n                                : 'bg-primary text-white hover:bg-blue-600'\r\n                                }`}\r\n                        >\r\n                            {isPaid ? (\r\n                                <>\r\n                                    <span className=\"material-symbols-outlined\">check_circle</span>\r\n                                    Pagado\r\n                                </>\r\n                            ) : (\r\n                                <>\r\n                                    <span className=\"material-symbols-outlined\">check_circle</span>\r\n                                    Marcar como Pagado\r\n                                </>\r\n                            )}\r\n                        </button>\r\n                        {!isPaid && (\r\n                            <button className=\"px-6 py-3.5 rounded-xl font-bold text-gray-600 dark:text-gray-300 bg-white dark:bg-white/5 border border-gray-200 dark:border-white/10 hover:bg-gray-50 dark:hover:bg-white/10 transition-all flex items-center gap-2\">\r\n                                <span className=\"material-symbols-outlined\">calendar_clock</span>\r\n                                Posponer\r\n                            </button>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <DeleteConfirmModal\r\n                isOpen={isDeleteConfirmOpen}\r\n                onClose={() => setIsDeleteConfirmOpen(false)}\r\n                onConfirm={confirmDelete}\r\n                title=\"¿Eliminar Compromiso?\"\r\n                message=\"Estás a punto de eliminar este compromiso. Si existen transacciones pasadas, se mantendrán en el historial.\"\r\n                itemName={commitment.name}\r\n            />\r\n        </>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2509, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/commitments/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { CommitmentModal } from '@/components/CommitmentModal';\r\nimport { DateRangeModal } from '@/components/DateRangeModal';\r\nimport { DeleteConfirmModal } from '@/components/DeleteConfirmModal';\r\nimport { CommitmentDetailsModal } from '@/components/CommitmentDetailsModal';\r\nimport { Commitment } from '@/types';\r\n\r\nexport default function Commitments() {\r\n    const router = useRouter();\r\n    const { commitments, toggleCommitmentStatus, deleteCommitment, ledgers, activeBookId } = useFinance();\r\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\r\n    const currencyCode = activeLedger?.currency || 'USD';\r\n    const currencySymbol = currencyCode === 'PEN' ? 'S/.' : (currencyCode === 'EUR' ? '€' : '$');\r\n\r\n    const [filter, setFilter] = useState<'all' | 'pending' | 'paid'>('all');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [isDateModalOpen, setIsDateModalOpen] = useState(false);\r\n    const [dateRange, setDateRange] = useState<{ start: Date | null, end: Date | null }>({\r\n        start: new Date(new Date().getFullYear(), new Date().getMonth(), 1),\r\n        end: new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0) // End of this month\r\n    });\r\n    const [editingCommitment, setEditingCommitment] = useState<Commitment | null>(null);\r\n    const [viewingCommitment, setViewingCommitment] = useState<Commitment | null>(null);\r\n    const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n    const [commitmentToDelete, setCommitmentToDelete] = useState<string | null>(null);\r\n\r\n    const handleCreate = () => {\r\n        setEditingCommitment(null);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleEdit = (commitment: Commitment) => {\r\n        setViewingCommitment(null); // Close details if open\r\n        setEditingCommitment(commitment);\r\n        setIsModalOpen(true);\r\n    };\r\n\r\n    const handleViewDetails = (commitment: Commitment) => {\r\n        setViewingCommitment(commitment);\r\n    };\r\n\r\n    const handleDelete = (id: string) => {\r\n        setCommitmentToDelete(id);\r\n        setIsDeleteModalOpen(true);\r\n    };\r\n\r\n    const confirmDelete = async () => {\r\n        if (commitmentToDelete) {\r\n            await deleteCommitment(commitmentToDelete);\r\n            setIsDeleteModalOpen(false);\r\n            setCommitmentToDelete(null);\r\n        }\r\n    };\r\n\r\n    const handleDateApply = (start: Date, end: Date) => {\r\n        setDateRange({ start, end });\r\n    };\r\n\r\n    // 1. First, filter by Date Range (Global for page)\r\n    const commitmentsInDateRange = commitments.filter(c => {\r\n        if (!dateRange.start || !dateRange.end) return true;\r\n\r\n        // Parse YYYY-MM-DD explicitly to Local Time\r\n        const parts = c.nextDueDate.split('-');\r\n        if (parts.length === 3) {\r\n            const year = parseInt(parts[0]);\r\n            const month = parseInt(parts[1]) - 1;\r\n            const day = parseInt(parts[2]);\r\n            const d = new Date(year, month, day);\r\n\r\n            // Normalize comparison dates\r\n            const start = new Date(dateRange.start);\r\n            start.setHours(0, 0, 0, 0);\r\n\r\n            const end = new Date(dateRange.end);\r\n            end.setHours(23, 59, 59, 999);\r\n\r\n            if (!isNaN(d.getTime())) {\r\n                return d >= start && d <= end;\r\n            }\r\n        }\r\n        return true;\r\n    });\r\n\r\n    // 2. Compute Statistics based on Date Range ONLY\r\n    const expenseCommitments = commitmentsInDateRange.filter(c => c.transaction_type !== 'INCOME');\r\n    const totalPlanificado = expenseCommitments.reduce((sum, c) => sum + c.amount, 0);\r\n    const yaPagado = expenseCommitments.filter(c => c.status === 'PAID').reduce((sum, c) => sum + c.amount, 0);\r\n    const porPagar = totalPlanificado - yaPagado;\r\n    const progressPercent = totalPlanificado > 0 ? (yaPagado / totalPlanificado) * 100 : 0;\r\n    const pendingCount = expenseCommitments.filter(c => c.status === 'PENDING').length;\r\n\r\n    // 3. Compute Next Payment from Date Range (ignoring list search/tabs)\r\n    const nextPayment = commitmentsInDateRange\r\n        .filter(c => c.status === 'PENDING' && c.transaction_type !== 'INCOME')\r\n        .sort((a, b) => {\r\n            // Parse dates manually for sort stability\r\n            const da = new Date(a.nextDueDate + 'T00:00:00');\r\n            const db = new Date(b.nextDueDate + 'T00:00:00');\r\n            return da.getTime() - db.getTime();\r\n        })[0];\r\n\r\n    // 4. Finally, filter for the List (Search + Status)\r\n    const filteredCommitments = commitmentsInDateRange.filter(c => {\r\n        // Search Filter\r\n        if (searchTerm && !c.name.toLowerCase().includes(searchTerm.toLowerCase())) {\r\n            return false;\r\n        }\r\n        // Status Filter\r\n        if (filter === 'pending') return c.status === 'PENDING';\r\n        if (filter === 'paid') return c.status === 'PAID';\r\n        return true;\r\n    });\r\n\r\n    const getDaysUntilDue = (dateStr: string) => {\r\n        const diff = new Date(dateStr).getTime() - new Date().setHours(0, 0, 0, 0);\r\n        return Math.ceil(diff / (1000 * 60 * 60 * 24));\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-1 flex flex-col h-full overflow-hidden relative\">\r\n            <main className=\"flex-1 overflow-y-auto p-6 md:p-10 scroll-smooth scrollbar-hide\">\r\n                <div className=\"max-w-[1200px] mx-auto pb-10\">\r\n                    <div className=\"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8 animate-fade-in\">\r\n                        <div className=\"flex flex-col gap-1\">\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <h1 className=\"text-3xl font-black tracking-tight text-[#111418] dark:text-white\">Compromisos y Gastos Fijos</h1>\r\n                            </div>\r\n                            <p className=\"text-[#637288] dark:text-slate-400 text-base\">Planifica y controla tus pagos recurrentes sin estrés.</p>\r\n                        </div>\r\n                        <div className=\"flex gap-3\">\r\n                            <button onClick={() => setIsDateModalOpen(true)} className=\"flex items-center justify-center gap-2 h-11 px-5 rounded-xl bg-white dark:bg-slate-800 border border-[#dce0e5] dark:border-slate-700 text-[#111418] dark:text-white text-sm font-semibold shadow-sm hover:bg-gray-50 dark:hover:bg-slate-700 transition-all\">\r\n                                <span className=\"material-symbols-outlined text-[20px]\">calendar_month</span>\r\n                                <span className=\"capitalize\">{dateRange.start ? dateRange.start.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' }) : 'Ver Calendario'}</span>\r\n                                <span className=\"material-symbols-outlined text-[20px]\">arrow_drop_down</span>\r\n                            </button>\r\n                            <button onClick={handleCreate} className=\"flex items-center justify-center gap-2 h-11 px-5 rounded-xl bg-primary text-white text-sm font-bold shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:-translate-y-0.5 transition-all\">\r\n                                <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                                <span>Nuevo Gasto Fijo</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <section className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 mb-10 animate-fade-in\" style={{ animationDelay: '0.1s' }}>\r\n                        {/* Next Payment Card */}\r\n                        <div className=\"glass-card p-6 rounded-2xl flex flex-col gap-4 relative overflow-hidden group border-orange-100 dark:border-orange-900/30 bg-white/60 dark:bg-slate-900/60\">\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-5 group-hover:opacity-10 transition-opacity\">\r\n                                <span className=\"material-symbols-outlined text-8xl text-orange-500\">calendar_clock</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2 mb-2\">\r\n                                <div className=\"size-10 rounded-xl bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600\">\r\n                                    <span className=\"material-symbols-outlined text-[20px]\">event_upcoming</span>\r\n                                </div>\r\n                                <p className=\"text-[#637288] dark:text-slate-400 text-xs font-bold uppercase tracking-widest\">Próximo Pago</p>\r\n                            </div>\r\n\r\n                            {nextPayment ? (\r\n                                <div className=\"relative z-10\">\r\n                                    <div className=\"flex items-center gap-1 mb-1\">\r\n                                        <p className=\"text-[#111418] dark:text-white text-3xl font-black tracking-tight\">\r\n                                            <span className=\"text-lg font-bold mr-1 align-middle text-gray-400 dark:text-gray-500\">{currencySymbol}</span>\r\n                                            {nextPayment.amount.toFixed(2)}\r\n                                        </p>\r\n                                        <span className=\"bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 text-[10px] font-bold px-2 py-0.5 rounded-full border border-slate-200 dark:border-slate-700 truncate max-w-[80px]\">\r\n                                            {nextPayment.name}\r\n                                        </span>\r\n                                    </div>\r\n\r\n                                    {(() => {\r\n                                        const days = getDaysUntilDue(nextPayment.nextDueDate);\r\n                                        let message = '';\r\n                                        let colorClass = '';\r\n\r\n                                        if (days < 0) { message = `Venció hace ${Math.abs(days)} días`; colorClass = 'text-red-500'; }\r\n                                        else if (days === 0) { message = 'Vence hoy'; colorClass = 'text-orange-500'; }\r\n                                        else if (days === 1) { message = 'Vence mañana'; colorClass = 'text-orange-500'; }\r\n                                        else { message = `Vence en ${days} días`; colorClass = 'text-blue-500'; }\r\n\r\n                                        return (\r\n                                            <div className={`flex items-center gap-1.5 text-xs font-bold ${colorClass}`}>\r\n                                                <span className=\"material-symbols-outlined text-[14px]\">warning</span>\r\n                                                {message}\r\n                                            </div>\r\n                                        );\r\n                                    })()}\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"relative z-10\">\r\n                                    <p className=\"text-[#111418] dark:text-white text-lg font-bold\">¡Todo al día!</p>\r\n                                    <p className=\"text-[#637288] dark:text-slate-500 text-xs\">No tienes pagos pendientes próximos.</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-6 rounded-2xl flex flex-col gap-4 relative overflow-hidden group\">\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                                <span className=\"material-symbols-outlined text-6xl text-primary\">account_balance</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className=\"size-8 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-primary\">\r\n                                    <span className=\"material-symbols-outlined text-sm\">savings</span>\r\n                                </div>\r\n                                <p className=\"text-[#637288] dark:text-slate-400 text-sm font-medium\">Total Planificado</p>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[#111418] dark:text-white text-3xl font-bold tracking-tight\">\r\n                                    <span className=\"text-lg font-bold mr-1 align-middle text-gray-400 dark:text-gray-500\">{currencySymbol}</span>\r\n                                    {totalPlanificado.toLocaleString('en-US', { minimumFractionDigits: 2 })}\r\n                                </p>\r\n                                <p className=\"text-[#637288] dark:text-slate-500 text-xs mt-1\">Estimación mensual</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-6 rounded-2xl flex flex-col gap-4 relative overflow-hidden group\">\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                                <span className=\"material-symbols-outlined text-6xl text-success\">check_circle</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className=\"size-8 rounded-full bg-green-50 dark:bg-green-900/30 flex items-center justify-center text-success\">\r\n                                    <span className=\"material-symbols-outlined text-sm\">payments</span>\r\n                                </div>\r\n                                <p className=\"text-[#637288] dark:text-slate-400 text-sm font-medium\">Ya Pagado</p>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[#111418] dark:text-white text-3xl font-bold tracking-tight\">\r\n                                    <span className=\"text-lg font-bold mr-1 align-middle text-gray-400 dark:text-gray-500\">{currencySymbol}</span>\r\n                                    {yaPagado.toLocaleString('en-US', { minimumFractionDigits: 2 })}\r\n                                </p>\r\n                                <div className=\"w-full bg-gray-100 dark:bg-slate-800 rounded-full h-1.5 mt-2 overflow-hidden\">\r\n                                    <div className=\"bg-success h-full rounded-full transition-all duration-1000\" style={{ width: `${progressPercent}%` }}></div>\r\n                                </div>\r\n                                <p className=\"text-success text-xs font-medium mt-1\">{progressPercent.toFixed(0)}% completado</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-6 rounded-2xl flex flex-col gap-4 relative overflow-hidden group border-orange-100 dark:border-orange-900/30\">\r\n                            <div className=\"absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity\">\r\n                                <span className=\"material-symbols-outlined text-6xl text-orange-500\">pending_actions</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <div className=\"size-8 rounded-full bg-orange-50 dark:bg-orange-900/30 flex items-center justify-center text-orange-600\">\r\n                                    <span className=\"material-symbols-outlined text-sm\">hourglass_top</span>\r\n                                </div>\r\n                                <p className=\"text-[#637288] dark:text-slate-400 text-sm font-medium\">Por Pagar</p>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-[#111418] dark:text-white text-3xl font-bold tracking-tight\">\r\n                                    <span className=\"text-lg font-bold mr-1 align-middle text-gray-400 dark:text-gray-500\">{currencySymbol}</span>\r\n                                    {porPagar.toLocaleString('en-US', { minimumFractionDigits: 2 })}\r\n                                </p>\r\n                                <p className=\"text-[#637288] dark:text-slate-500 text-xs mt-1\">{pendingCount} compromisos pendientes</p>\r\n                            </div>\r\n                        </div>\r\n                    </section>\r\n\r\n                    <section className=\"glass-card rounded-2xl shadow-glass overflow-hidden flex flex-col animate-fade-in\" style={{ animationDelay: '0.2s' }}>\r\n                        <div className=\"px-6 py-5 border-b border-[#f0f2f4] dark:border-slate-800 flex flex-col md:flex-row items-center justify-between gap-4 bg-white/40 dark:bg-slate-900/40\">\r\n                            <h3 className=\"text-[#111418] dark:text-white text-lg font-bold\">Listado de Compromisos</h3>\r\n\r\n                            <div className=\"flex flex-col md:flex-row gap-4 w-full md:w-auto\">\r\n                                <div className=\"relative group\">\r\n                                    <span className=\"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors text-[20px]\">search</span>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Buscar compromisos...\"\r\n                                        value={searchTerm}\r\n                                        onChange={(e) => setSearchTerm(e.target.value)}\r\n                                        className=\"pl-10 pr-4 py-2 rounded-xl bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm w-full md:w-64 focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all shadow-sm\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <div className=\"flex bg-[#f0f2f4] dark:bg-slate-800 p-1 rounded-xl self-center\">\r\n                                    <button\r\n                                        onClick={() => setFilter('all')}\r\n                                        className={`px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${filter === 'all' ? 'bg-white dark:bg-slate-700 text-[#111418] dark:text-white shadow-sm' : 'text-[#637288] hover:text-[#111418] dark:hover:text-white'}`}\r\n                                    >\r\n                                        Todos\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setFilter('pending')}\r\n                                        className={`px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${filter === 'pending' ? 'bg-white dark:bg-slate-700 text-[#111418] dark:text-white shadow-sm' : 'text-[#637288] hover:text-[#111418] dark:hover:text-white'}`}\r\n                                    >\r\n                                        Pendientes\r\n                                    </button>\r\n                                    <button\r\n                                        onClick={() => setFilter('paid')}\r\n                                        className={`px-4 py-1.5 rounded-lg text-sm font-medium transition-all ${filter === 'paid' ? 'bg-white dark:bg-slate-700 text-[#111418] dark:text-white shadow-sm' : 'text-[#637288] hover:text-[#111418] dark:hover:text-white'}`}\r\n                                    >\r\n                                        Completados\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"overflow-x-auto w-full\">\r\n                            <table className=\"w-full min-w-[800px]\">\r\n                                <thead className=\"bg-gray-50/50 dark:bg-slate-800/50\">\r\n                                    <tr>\r\n                                        <th className=\"px-6 py-4 text-left text-xs font-semibold text-[#637288] dark:text-slate-500 uppercase tracking-wider w-[30%]\">Concepto</th>\r\n                                        <th className=\"px-6 py-4 text-left text-xs font-semibold text-[#637288] dark:text-slate-500 uppercase tracking-wider w-[20%]\">Fecha Vencimiento</th>\r\n                                        <th className=\"px-6 py-4 text-left text-xs font-semibold text-[#637288] dark:text-slate-500 uppercase tracking-wider w-[15%]\">Monto</th>\r\n                                        <th className=\"px-6 py-4 text-left text-xs font-semibold text-[#637288] dark:text-slate-500 uppercase tracking-wider w-[15%]\">Estado</th>\r\n                                        <th className=\"px-6 py-4 text-right text-xs font-semibold text-[#637288] dark:text-slate-500 uppercase tracking-wider w-[20%]\">Acción</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-[#f0f2f4] dark:divide-slate-800\">\r\n                                    {filteredCommitments.length === 0 ? (\r\n                                        <tr>\r\n                                            <td colSpan={5} className=\"px-6 py-10 text-center text-gray-400 dark:text-gray-500\">\r\n                                                <div className=\"flex flex-col items-center gap-3\">\r\n                                                    <span className=\"material-symbols-outlined text-[48px] opacity-20\">event_busy</span>\r\n                                                    <p className=\"text-sm\">No se encontraron compromisos en este periodo.</p>\r\n                                                    <button onClick={() => { setFilter('all'); setSearchTerm(''); }} className=\"text-primary text-xs font-bold hover:underline\">Limpiar Filtros</button>\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    ) : (\r\n                                        filteredCommitments.map((item) => {\r\n                                            // ... existing map\r\n                                            const isOverdue = new Date(item.nextDueDate) < new Date();\r\n                                            const isPaid = item.status === 'PAID';\r\n\r\n                                            return (\r\n                                                <tr key={item.id} className={`group hover:bg-white/60 dark:hover:bg-slate-800/60 transition-colors ${isPaid ? 'bg-gray-50/50 dark:bg-slate-900/50' : ''}`}>\r\n                                                    <td className=\"px-6 py-4\">\r\n                                                        <div\r\n                                                            onClick={() => handleViewDetails(item)}\r\n                                                            className={`flex items-center gap-4 cursor-pointer ${isPaid ? 'opacity-60' : ''}`}\r\n                                                        >\r\n                                                            <div className={`size-10 rounded-full flex items-center justify-center shrink-0 transition-transform group-hover:scale-105 ${isPaid ? 'bg-gray-200 dark:bg-slate-700 text-gray-500' : 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600'\r\n                                                                }`}>\r\n                                                                <span className=\"material-symbols-outlined text-[20px]\">\r\n                                                                    {item.name.toLowerCase().includes('internet') ? 'wifi' :\r\n                                                                        item.name.toLowerCase().includes('spotify') ? 'music_note' :\r\n                                                                            item.name.toLowerCase().includes('alquiler') ? 'home' : 'event_repeat'}\r\n                                                                </span>\r\n                                                            </div>\r\n                                                            <div>\r\n                                                                <p className={`text-[#111418] dark:text-white text-sm font-bold group-hover:text-primary transition-colors ${isPaid ? 'line-through decoration-slate-400' : ''}`}>{item.name}</p>\r\n                                                                <p className=\"text-[#637288] dark:text-slate-500 text-xs\">{item.frequency}</p>\r\n                                                            </div>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4\">\r\n                                                        <div className={`flex items-center gap-2 w-fit px-2 py-1 rounded-md ${isPaid ? 'opacity-60 text-slate-500' :\r\n                                                            isOverdue ? 'text-orange-600 bg-orange-50 dark:bg-orange-900/20' : 'text-[#111418] dark:text-slate-300'\r\n                                                            }`}>\r\n                                                            {isOverdue && !isPaid && <span className=\"material-symbols-outlined text-[16px]\">warning</span>}\r\n                                                            <span className=\"text-sm font-medium\">{item.nextDueDate}</span>\r\n                                                        </div>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4\">\r\n                                                        <span className={`text-base font-bold ${isPaid ? 'text-[#637288] opacity-60' : item.transaction_type === 'INCOME' ? 'text-green-600 dark:text-green-400' : 'text-[#111418] dark:text-white'}`}>\r\n                                                            <span className=\"text-xs font-bold mr-0.5 opacity-70\">{currencySymbol}</span>\r\n                                                            {item.transaction_type === 'INCOME' ? '+' : '-'}{item.amount.toFixed(2)}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4\">\r\n                                                        <span className={`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-semibold border ${isPaid\r\n                                                            ? 'bg-green-100 text-green-700 border-green-200 dark:bg-green-900/30 dark:text-green-400 dark:border-green-800'\r\n                                                            : isOverdue\r\n                                                                ? 'bg-orange-100 text-orange-700 border-orange-200 dark:bg-orange-900/30 dark:text-orange-400 dark:border-orange-800'\r\n                                                                : 'bg-slate-100 text-slate-600 border-slate-200 dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700'\r\n                                                            }`}>\r\n                                                            {!isPaid && <span className={`size-1.5 rounded-full ${isOverdue ? 'bg-orange-500 animate-pulse' : 'bg-slate-400'}`}></span>}\r\n                                                            {isPaid ? <span className=\"material-symbols-outlined text-[14px]\">check</span> : ''}\r\n                                                            {isPaid ? 'Completado' : isOverdue ? 'Urgente' : 'Pendiente'}\r\n                                                        </span>\r\n                                                    </td>\r\n                                                    <td className=\"px-6 py-4 text-right\">\r\n                                                        {isPaid ? (\r\n                                                            <div className=\"flex items-center justify-end gap-2 opacity-60 group-hover:opacity-100 transition-opacity\">\r\n                                                                <span className=\"text-[10px] text-[#637288] dark:text-slate-500 italic bg-white/50 dark:bg-slate-800/50 px-2 py-1 rounded border border-gray-100 dark:border-slate-700\">Transacción Generada</span>\r\n                                                                <button onClick={() => handleDelete(item.id)} className=\"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-red-400 hover:text-red-500\" title=\"Eliminar\">\r\n                                                                    <span className=\"material-symbols-outlined text-[18px]\">delete</span>\r\n                                                                </button>\r\n                                                                <button onClick={() => handleViewDetails(item)} className=\"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 text-[#637288]\" title=\"Ver Detalle\">\r\n                                                                    <span className=\"material-symbols-outlined text-[18px]\">visibility</span>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        ) : (\r\n                                                            <div className=\"flex justify-end gap-2\">\r\n                                                                <button\r\n                                                                    onClick={() => handleViewDetails(item)}\r\n                                                                    className=\"p-2 rounded-lg hover:bg-gray-200 dark:hover:bg-slate-700 text-[#637288]\"\r\n                                                                    title=\"Ver Detalle\"\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-[20px]\">visibility</span>\r\n                                                                </button>\r\n                                                                <button\r\n                                                                    onClick={() => handleDelete(item.id)}\r\n                                                                    className=\"p-2 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 text-gray-400 hover:text-red-500 transition-colors\"\r\n                                                                    title=\"Eliminar\"\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-[20px]\">delete</span>\r\n                                                                </button>\r\n                                                                <button\r\n                                                                    onClick={() => toggleCommitmentStatus(item.id, item.status)}\r\n                                                                    className={`group/btn relative inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-xs font-bold transition-all shadow-md active:scale-95 ${isOverdue\r\n                                                                        ? 'bg-primary text-white hover:bg-blue-700 shadow-primary/20 hover:scale-105'\r\n                                                                        : 'border border-[#dce0e5] dark:border-slate-700 bg-white dark:bg-slate-800 text-[#111418] dark:text-white hover:text-green-600 hover:border-green-200'\r\n                                                                        }`}\r\n                                                                >\r\n                                                                    <span className=\"material-symbols-outlined text-[16px]\">{isOverdue ? 'payments' : 'done'}</span>\r\n                                                                    <span>{isOverdue ? 'Pagar Ahora' : 'Marcar Pagado'}</span>\r\n                                                                </button>\r\n                                                            </div>\r\n                                                        )}\r\n                                                    </td>\r\n                                                </tr>\r\n                                            );\r\n                                        })\r\n                                    )}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <div className=\"p-4 border-t border-[#f0f2f4] dark:border-slate-800 flex items-center justify-center bg-gray-50/30 dark:bg-slate-900/30\">\r\n                            <button className=\"text-[#637288] dark:text-slate-400 text-sm hover:text-primary transition-colors font-medium flex items-center gap-1 px-4 py-2 hover:bg-white dark:hover:bg-slate-800 rounded-lg\">\r\n                                Mostrar más compromisos\r\n                                <span className=\"material-symbols-outlined text-lg\">expand_more</span>\r\n                            </button>\r\n                        </div>\r\n                    </section>\r\n                </div>\r\n            </main>\r\n\r\n            <CommitmentModal\r\n                isOpen={isModalOpen}\r\n                onClose={() => setIsModalOpen(false)}\r\n                commitmentToEdit={editingCommitment}\r\n            />\r\n\r\n            <DeleteConfirmModal\r\n                isOpen={isDeleteModalOpen}\r\n                onClose={() => setIsDeleteModalOpen(false)}\r\n                onConfirm={confirmDelete}\r\n                title=\"¿Eliminar Compromiso?\"\r\n                message=\"Estás a punto de eliminar este compromiso permanentemente. Esta acción no se puede deshacer.\"\r\n                itemName={commitments.find(c => c.id === commitmentToDelete)?.name}\r\n            />\r\n\r\n            <DateRangeModal\r\n                isOpen={isDateModalOpen}\r\n                onClose={() => setIsDateModalOpen(false)}\r\n                onApply={handleDateApply}\r\n                initialStartDate={dateRange.start}\r\n                initialEndDate={dateRange.end}\r\n            />\r\n\r\n            <CommitmentDetailsModal\r\n                isOpen={!!viewingCommitment}\r\n                onClose={() => setViewingCommitment(null)}\r\n                commitment={viewingCommitment}\r\n                onEdit={handleEdit}\r\n                onDelete={deleteCommitment}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}