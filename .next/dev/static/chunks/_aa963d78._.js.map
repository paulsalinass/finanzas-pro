{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\n\nexport function createClient() {\n    return createBrowserClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n    )\n}\n"],"names":[],"mappings":";;;;AAIQ;AAJR;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,oMAAmB;AAI9B"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/context/FinanceContext.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { createClient } from '../utils/supabase/client';\nimport { Transaction, Account, Budget, Commitment, RecurringRule, Ledger, TransactionType, Category, CategoryFolder } from '../types';\nimport { useRouter } from 'next/navigation';\nimport { addMonths, addWeeks, addYears, isAfter, isBefore, startOfDay, addDays, isSameDay, endOfMonth } from 'date-fns';\n\n// Database types mapping could be strictly done here, but for now we map manually\n// to match the specific \"Ledger\" vs \"Book\" terminology change requested by user logic vs DB logic.\n// The user \"Ledger\" in UI maps to \"Book\" in DB.\n\ninterface FinanceContextType {\n  transactions: Transaction[];\n  accounts: Account[];\n  categories: Category[];\n  categoryFolders: CategoryFolder[];\n  budgets: Budget[];\n  commitments: Commitment[];\n  recurringRules: RecurringRule[];\n  ledgers: Ledger[];\n\n  // Actions\n  addTransaction: (t: Omit<Transaction, 'id'>) => Promise<void>;\n  deleteTransaction: (id: string) => Promise<void>;\n  addAccount: (a: Omit<Account, 'id'>) => Promise<void>;\n  updateAccount: (id: string, a: Partial<Account>) => Promise<void>;\n  deleteAccount: (id: string) => Promise<void>;\n  addCommitment: (c: Omit<Commitment, 'id'>) => Promise<void>;\n  updateCommitment: (id: string, updates: Partial<Commitment>) => Promise<void>;\n  deleteCommitment: (id: string) => Promise<void>;\n  toggleCommitmentStatus: (id: string, currentStatus: string) => Promise<void>;\n  toggleRuleStatus: (id: string) => void;\n  updateTransaction: (id: string, updates: Partial<Transaction>) => Promise<void>;\n  duplicateTransaction: (id: string) => Promise<void>;\n  activateLedger: (id: string) => void;\n  generateSampleData: () => Promise<void>;\n\n  totalBalance: number;\n  isDarkMode: boolean;\n  toggleTheme: () => void;\n  isLoading: boolean;\n  activeBookId: string | null;\n  refreshBooks: () => Promise<void>;\n  formatAmount: (amount: number) => string;\n  isTransactionModalOpen: boolean;\n  openTransactionModal: () => void;\n  closeTransactionModal: () => void;\n  addBudget: (b: { amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }) => Promise<void>;\n  updateBudget: (id: string, updates: Partial<{ amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }>) => Promise<void>;\n  deleteBudget: (id: string) => Promise<void>;\n  checkRecurringBudgets: () => Promise<void>;\n  deleteCategory: (id: string) => Promise<void>;\n  deleteCategoryFolder: (id: string) => Promise<void>;\n}\n\nconst FinanceContext = createContext<FinanceContextType | undefined>(undefined);\n\nexport const FinanceProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const supabase = createClient();\n  const router = useRouter();\n\n  // State\n  const [activeBookId, setActiveBookId] = useState<string | null>(null);\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n  const [accounts, setAccounts] = useState<Account[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [categoryFolders, setCategoryFolders] = useState<CategoryFolder[]>([]);\n  const [budgets, setBudgets] = useState<Budget[]>([]);\n  const [commitments, setCommitments] = useState<Commitment[]>([]);\n  const [recurringRules, setRecurringRules] = useState<RecurringRule[]>([]); // Migration TODO: Link to commitments?\n  const [ledgers, setLedgers] = useState<Ledger[]>([]); // These are 'books' now\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  // Theme Logic\n  const toggleTheme = () => {\n    setIsDarkMode(prev => {\n      const newMode = !prev;\n      if (typeof window !== 'undefined') {\n        const root = window.document.documentElement;\n        if (newMode) root.classList.add('dark');\n        else root.classList.remove('dark');\n      }\n      return newMode;\n    });\n  };\n\n  const fetchBooks = async () => {\n    setIsLoading(true);\n    const { data: { user } } = await supabase.auth.getUser();\n\n    if (!user) {\n      setIsLoading(false);\n      return;\n    }\n\n    const { data: books, error } = await supabase.from('books').select('*');\n\n    if (books && books.length > 0) {\n      const mappedLedgers: Ledger[] = books.map(b => ({\n        id: b.id,\n        name: b.name,\n        description: b.short_description || '',\n        balance: 0,\n        isActive: false,\n        isArchived: false,\n        lastUpdate: b.created_at,\n        icon: b.icon || 'Wallet',\n        color: b.color || 'blue', // Default\n        type: 'PERSONAL',\n        members: [],\n        currency: b.currency\n      }));\n\n      setLedgers(mappedLedgers);\n\n      // Initial activation logic can be here or in useEffect\n      // We will activate first if none active in useEffect or consumer\n    } else {\n      await createDefaultBook(user.id);\n    }\n    setIsLoading(false);\n  };\n\n  // Initial Load\n  useEffect(() => {\n    fetchBooks().then((mappedLedgers) => {\n      // Logic moved inside to have access to the fetched ledgers directly if returned, \n      // or we rely on state updates which might be async.\n      // Better approach: fetchBooks updates state. We wait for that.\n    });\n  }, []);\n\n  // Effect to handle initial active book selection once ledgers are loaded\n  useEffect(() => {\n    if (!isLoading && ledgers.length > 0 && !activeBookId) {\n      // Try to recover from localStorage\n      const savedBookId = localStorage.getItem('finance_active_book_id');\n      const targetBook = ledgers.find(l => l.id === savedBookId);\n\n      if (targetBook) {\n        handleChangeActiveBook(targetBook.id);\n      } else {\n        // Default to first if no saved book or saved book not found/deleted\n        handleChangeActiveBook(ledgers[0].id);\n      }\n    }\n  }, [isLoading, ledgers, activeBookId]);\n\n  // Helper to format currency based on active book\n  const formatAmount = (amount: number) => {\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\n    const currency = activeLedger?.currency || 'MXN';\n\n    let locale = 'es-MX';\n    if (currency === 'USD') locale = 'en-US';\n    if (currency === 'EUR') locale = 'es-ES';\n    if (currency === 'PEN') return `S/ ${amount.toLocaleString('es-PE', { minimumFractionDigits: 2 })}`;\n    if (currency === 'COP') locale = 'es-CO';\n\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 2,\n    }).format(amount);\n  };\n\n  const refreshBooks = async () => {\n    await fetchBooks();\n    if (activeBookId) {\n      await Promise.all([\n        fetchAccounts(activeBookId),\n        fetchCategories(activeBookId),\n        fetchCategoryFolders(activeBookId),\n        fetchTransactions(activeBookId),\n        fetchCommitments(activeBookId),\n        fetchBudgets(activeBookId),\n        fetchRecurringRules(activeBookId)\n      ]);\n    }\n  };\n\n  const createDefaultBook = async (userId: string) => {\n    const { data, error } = await supabase.from('books').insert({\n      name: 'Personal',\n      user_id: userId\n    }).select().single();\n\n    if (data) {\n      const newLedger: Ledger = {\n        id: data.id,\n        name: data.name,\n        description: 'Mi primer libro contable',\n        balance: 0,\n        isActive: true,\n        isArchived: false,\n        lastUpdate: new Date().toISOString(),\n        icon: 'person',\n        color: 'blue',\n        type: 'PERSONAL',\n        members: []\n      };\n      setLedgers([newLedger]);\n      handleChangeActiveBook(data.id);\n    }\n  };\n\n  const handleChangeActiveBook = async (bookId: string) => {\n    setActiveBookId(bookId);\n    localStorage.setItem('finance_active_book_id', bookId); // Persist selection\n    setLedgers(prev => prev.map(l => ({ ...l, isActive: l.id === bookId })));\n\n    // Fetch Data for this Book\n    await Promise.all([\n      fetchAccounts(bookId),\n      fetchCategories(bookId),\n      fetchCategoryFolders(bookId),\n      fetchTransactions(bookId),\n      fetchCommitments(bookId),\n      fetchBudgets(bookId),\n      fetchRecurringRules(bookId)\n    ]);\n  };\n\n  const fetchCategories = async (bookId: string) => {\n    const { data } = await supabase.from('categories').select('*').eq('book_id', bookId);\n    if (data) {\n      setCategories(data.map((cat: any) => ({\n        id: cat.id,\n        name: cat.name,\n        color: cat.color || '#2563eb',\n        icon: cat.icon || 'category',\n        folder_id: cat.folder_id || null\n      })));\n    }\n  };\n\n  const fetchCategoryFolders = async (bookId: string) => {\n    const { data } = await supabase.from('category_folders').select('*').eq('book_id', bookId);\n    if (data) {\n      setCategoryFolders(data.map((folder: any) => ({\n        id: folder.id,\n        name: folder.name,\n        color: folder.color || '#6366f1',\n        icon: folder.icon || 'folder'\n      })));\n    }\n  };\n\n  const fetchAccounts = async (bookId: string) => {\n    const { data } = await supabase.from('accounts').select('*').eq('book_id', bookId);\n    if (data) {\n      setAccounts(data.map(a => ({\n        ...a,\n        // Ensure types match UI expectation\n        type: a.type as any\n      })));\n    }\n  };\n\n  const fetchTransactions = async (bookId: string) => {\n    const { data } = await supabase\n      .from('transactions')\n      .select(`\n        *,\n        categories (name, icon, color),\n        accounts (name)\n      `)\n      .eq('book_id', bookId)\n      .order('occurred_at', { ascending: false });\n\n    if (data) {\n      setTransactions(data.map((t: any) => ({\n        id: t.id,\n        amount: t.amount,\n        type: t.type as any,\n        category: t.categories?.name || 'Uncategorized',\n        category_id: t.category_id,\n        account: t.accounts?.name || 'Unknown',\n        account_id: t.account_id,\n        description: t.description || '',\n        date: t.occurred_at,\n        icon: t.categories?.icon || 'attach_money',\n        status: t.status as any,\n        location: t.location_text, // Map DB location_text to UI location\n        notes: t.notes,\n        beneficiary: t.beneficiary,\n        created_at: t.created_at,\n        updated_at: t.updated_at\n      })));\n    }\n  };\n\n  const fetchCommitments = async (bookId: string) => {\n    const { data, error } = await supabase\n      .from('commitments')\n      .select(`\n        *,\n        categories (name),\n        accounts:account_id (name)\n      `)\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.error('Error fetching commitments:', error);\n    }\n\n    if (data) {\n      setCommitments(data.map((c: any) => ({\n        id: c.id,\n        name: c.title,\n        amount: c.amount,\n        frequency: c.frequency as any,\n        nextDueDate: c.next_due_date,\n        status: c.status as any,\n        type: c.type as any || 'FIXED',\n        isActive: c.is_active ?? true,\n        endDate: c.end_date,\n        category: c.categories?.name || 'General',\n        account: c.accounts?.name || 'Cuenta principal',\n        categoryId: c.category_id,\n        accountId: c.account_id,\n        recurrence: c.recurrence,\n        transaction_type: c.transaction_type\n      })));\n    }\n  };\n\n  const fetchBudgets = async (bookId: string) => {\n    // Joining handled client-side in UI to ensure robustness\n    const { data, error } = await supabase\n      .from('budgets')\n      .select('*')\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.warn('Error loading budgets', error.message);\n      return;\n    }\n    if (data) {\n      setBudgets(data.map((b: any) => ({\n        id: b.id,\n        category: 'Loading...', // Main mapping done in Page via category_id\n        category_id: b.category_id,\n        limit: Number(b.amount || 0),\n        spent: 0,\n        period: 'MONTHLY',\n        severity: 'NORMAL',\n        start_date: b.start_date,\n        end_date: b.end_date,\n        recurrence_type: b.recurrence_type,\n        recurrence_interval: b.recurrence_interval\n      })));\n    }\n  };\n\n  const fetchRecurringRules = async (bookId: string) => {\n    const { data, error } = await supabase\n      .from('recurring_rules')\n      .select(`\n        *,\n        categories (name, icon, color),\n        accounts (name)\n      `)\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.warn('No fue posible cargar reglas recurrentes', error.message);\n      return;\n    }\n    if (data) {\n      setRecurringRules(data.map((r: any) => ({\n        id: r.id,\n        name: r.name,\n        category: r.categories?.name || 'General',\n        account: r.accounts?.name || 'Cuenta principal',\n        amount: Number(r.amount ?? 0),\n        type: (r.type as TransactionType) || 'EXPENSE',\n        frequency: r.frequency || 'Mensual',\n        nextDate: r.next_run_at || '',\n        active: r.is_active ?? true,\n        icon: r.categories?.icon || 'autorenew'\n      })));\n    }\n  };\n\n  // ACTIONS\n  const addTransaction = async (t: Omit<Transaction, 'id'>) => {\n    if (!activeBookId) return;\n\n    // Find account ID by name (current UI passes name)\n    // In future UI should pass ID. For now, matching by name:\n    const account = accounts.find(a => a.name === t.account);\n    const accountId = account?.id; // Fallback?\n\n    if (!accountId) {\n      console.error(\"Account not found forTransaction name:\", t.account); // Log the name we looked for\n      alert(\"Error: No se encontró la cuenta seleccionada ('\" + t.account + \"'). Por favor selecciona una cuenta válida.\");\n      return;\n    }\n\n    // Find category ID\n    // If t.category is a name, find ID. If t.category_id is provided, use it.\n    let categoryId = t.category_id;\n    if (!categoryId && t.category) {\n      const cat = categories.find(c => c.name === t.category);\n      categoryId = cat?.id;\n    }\n\n    const { data, error } = await supabase.from('transactions').insert({\n      book_id: activeBookId,\n      account_id: accountId,\n      type: t.type,\n      amount: t.amount,\n      description: t.description,\n      occurred_at: t.date,\n      category_id: categoryId,\n      currency: account.currency || 'USD',\n      location_text: t.location,\n      notes: t.notes,\n      beneficiary: t.beneficiary,\n      frequency: t.frequency, // Save frequency to transaction\n      commitment_id: t.commitment_id // Save commitment link\n    }).select().single();\n\n    if (error) {\n      console.error(\"Error creating transaction:\", error);\n      alert(\"Error al guardar: \" + error.message);\n      return;\n    }\n\n    // Update Account Balance manually since no triggers exist\n    if (account) {\n      let newBalance = Number(account.balance);\n      if (t.type === 'INCOME') {\n        newBalance += Number(t.amount);\n      } else {\n        newBalance -= Number(t.amount);\n      }\n\n      const { error: accError } = await supabase\n        .from('accounts')\n        .update({ balance: newBalance })\n        .eq('id', accountId);\n\n      if (accError) {\n        console.error(\"Error updating account balance:\", accError);\n      }\n    }\n\n    // Create Recurring Rule if needed\n    if (data && t.frequency) {\n      // Calculate next run? For now, we just create the rule.\n      // Logic for next run could be complex (e.g. 1 month from now). \n      // For simplicity, we set next_run_at to the transaction date + interval (or just the date if the rule runner handles it).\n      // Let's assume we want the NEXT occurrence.\n\n      let nextDate = new Date(t.date);\n      // Simple logic for next date\n      if (t.frequency === 'DAILY') nextDate.setDate(nextDate.getDate() + 1);\n      if (t.frequency === 'WEEKLY') nextDate.setDate(nextDate.getDate() + 7);\n      if (t.frequency === 'BIWEEKLY') nextDate.setDate(nextDate.getDate() + 14);\n      if (t.frequency === 'MONTHLY') nextDate.setMonth(nextDate.getMonth() + 1);\n      if (t.frequency === 'ANNUAL') nextDate.setFullYear(nextDate.getFullYear() + 1);\n      // ... add others if strict needed, or rely on null/logic elsewhere.\n\n      const { error: ruleError } = await supabase.from('recurring_rules').insert({\n        book_id: activeBookId,\n        name: t.description,\n        amount: t.amount,\n        category_id: categoryId,\n        account_id: accountId,\n        type: t.type,\n        frequency: t.frequency,\n        next_run_at: nextDate.toISOString(),\n        end_date: t.end_date,\n        is_active: true\n      });\n\n      if (ruleError) {\n        console.warn(\"Failed to create recurring rule:\", ruleError);\n      } else {\n        fetchRecurringRules(activeBookId);\n      }\n    }\n\n    if (data) {\n      // UI Optimistic Update or Refetch\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId); // Update balances\n    }\n  };\n\n  const addAccount = async (a: Omit<Account, 'id'>) => {\n    if (!activeBookId) return;\n\n    // Prepare payload - casting to any to bypass strict database types until migration is run\n    const payload: any = {\n      book_id: activeBookId,\n      name: a.name,\n      type: a.type,\n      balance: a.balance,\n      currency: a.currency,\n      is_default: a.isDefault,\n      // Credit Card Fields\n      credit_limit: a.creditLimit,\n      available_credit: a.availableCredit,\n      cutoff_day: a.cutoffDay,\n      pay_day: a.payDay,\n      network: a.network,\n      auto_pay: a.autoPay,\n      last_four: a.lastFour, // Ensure this exists or is removed if unused\n      color: 'blue', // Default for now, or passed from 'a' if added to Account type\n      icon: 'account_balance' // Default\n    };\n\n    const { error } = await supabase.from('accounts').insert(payload);\n\n    if (error) {\n      console.error(\"Error creating account:\", error);\n      alert(\"Error creating account: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n    fetchAccounts(activeBookId);\n  };\n\n  const updateAccount = async (id: string, a: Partial<Account>) => {\n    if (!activeBookId) return;\n\n    // Prepare payload\n    const payload: any = {\n      name: a.name,\n      type: a.type,\n      balance: a.balance,\n      currency: a.currency,\n      is_default: a.isDefault,\n      credit_limit: a.creditLimit,\n      available_credit: a.availableCredit,\n      cutoff_day: a.cutoffDay,\n      pay_day: a.payDay,\n      network: a.network,\n      auto_pay: a.autoPay,\n      last_four: a.lastFour,\n      color: a.color || 'blue', // preserve or update\n    };\n\n    // Remove undefined keys\n    Object.keys(payload).forEach(key => payload[key] === undefined && delete payload[key]);\n\n    const { error } = await supabase.from('accounts').update(payload).eq('id', id);\n\n    if (error) {\n      console.error(\"Error updating account:\", error);\n      alert(\"Error updating account: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n  };\n\n  const deleteAccount = async (id: string) => {\n    if (!activeBookId) return;\n\n    // Check for dependencies? Ideally transactions cascade or block. \n    // Supabase usually set to CASECADE or RESTRICT. Assuming CASCADE or user handled.\n    const { error } = await supabase.from('accounts').delete().eq('id', id);\n\n    if (error) {\n      console.error(\"Error deleting account:\", error);\n      alert(\"Error al eliminar cuenta: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n  };\n\n  const addCommitment = async (c: Omit<Commitment, 'id'>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {\n      book_id: activeBookId,\n      title: c.name,\n      amount: c.amount,\n      frequency: c.frequency,\n      next_due_date: c.nextDueDate,\n      status: c.status,\n      type: c.type,\n      is_active: c.isActive,\n      end_date: c.endDate,\n      category_id: c.categoryId,\n      account_id: c.accountId,\n      recurrence: c.recurrence,\n      transaction_type: c.transaction_type\n    };\n\n    if (!c.categoryId && c.category) {\n      const cat = categories.find(cat => cat.name === c.category);\n      if (cat) payload.category_id = cat.id;\n    }\n\n    if (!c.accountId && c.account) {\n      const acc = accounts.find(a => a.name === c.account);\n      if (acc) payload.account_id = acc.id;\n    }\n\n    const { error } = await supabase.from('commitments').insert(payload);\n\n    if (error) {\n      console.error('Error creating commitment:', error);\n      alert('Error al crear compromiso: ' + error.message);\n      return;\n    }\n\n    fetchCommitments(activeBookId);\n  };\n\n  const updateCommitment = async (id: string, updates: Partial<Commitment>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {};\n    if (updates.name !== undefined) payload.title = updates.name;\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.frequency !== undefined) payload.frequency = updates.frequency;\n    if (updates.nextDueDate !== undefined) payload.next_due_date = updates.nextDueDate;\n    if (updates.status !== undefined) payload.status = updates.status;\n    if (updates.type !== undefined) payload.type = updates.type;\n    if (updates.isActive !== undefined) payload.is_active = updates.isActive;\n    if (updates.endDate !== undefined) payload.end_date = updates.endDate;\n    if (updates.recurrence !== undefined) payload.recurrence = updates.recurrence;\n    if (updates.transaction_type !== undefined) payload.transaction_type = updates.transaction_type;\n\n    if (updates.categoryId !== undefined) payload.category_id = updates.categoryId;\n    if (updates.accountId !== undefined) payload.account_id = updates.accountId;\n\n    // Fallback for names\n    if (!updates.categoryId && updates.category) {\n      const cat = categories.find(c => c.name === updates.category);\n      if (cat) payload.category_id = cat.id;\n    }\n    if (!updates.accountId && updates.account) {\n      const acc = accounts.find(a => a.name === updates.account);\n      if (acc) payload.account_id = acc.id;\n    }\n\n    const { error } = await supabase.from('commitments').update(payload).eq('id', id);\n\n    if (error) {\n      console.error('Error updating commitment:', error);\n      alert('Error updating commitment: ' + error.message);\n      return;\n    }\n\n    fetchCommitments(activeBookId);\n  };\n\n  const deleteCommitment = async (id: string) => {\n    const { error } = await supabase.from('commitments').delete().eq('id', id);\n    if (error) {\n      console.error(\"Error deleting commitment:\", error);\n      alert(\"Error deleting commitment: \" + error.message);\n      return;\n    }\n    if (activeBookId) fetchCommitments(activeBookId);\n  };\n\n  const deleteTransaction = async (id: string) => {\n    // 1. Fetch transaction details to revert balance\n    const { data: transaction } = await supabase\n      .from('transactions')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    const { error } = await supabase.from('transactions').delete().eq('id', id);\n    if (error) {\n      console.error(\"Error deleting transaction:\", error);\n      alert(\"Error deleting transaction: \" + error.message);\n      return;\n    }\n\n    // 2. Revert Balance\n    if (transaction && transaction.account_id) {\n      const { data: account } = await supabase\n        .from('accounts')\n        .select('balance')\n        .eq('id', transaction.account_id)\n        .single();\n\n      if (account) {\n        let newBalance = Number(account.balance);\n        // Inverse logic: Deleting Income -> Remove money (Subtract)\n        // Inverse logic: Deleting Expense -> Give back money (Add)\n        if (transaction.type === 'INCOME') {\n          newBalance -= Number(transaction.amount);\n        } else {\n          newBalance += Number(transaction.amount);\n        }\n\n        await supabase\n          .from('accounts')\n          .update({ balance: newBalance })\n          .eq('id', transaction.account_id);\n      }\n    }\n\n    // 3. Update Commitment Status if linked\n    if (transaction && transaction.commitment_id) {\n      await supabase\n        .from('commitments')\n        .update({ status: 'PENDING' })\n        .eq('id', transaction.commitment_id);\n\n      fetchCommitments(activeBookId);\n    }\n\n    if (activeBookId) {\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId);\n    }\n  };\n\n  const updateTransaction = async (id: string, updates: Partial<Transaction>) => {\n    // Map UI fields to DB fields\n    const payload: any = {};\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.description !== undefined) payload.description = updates.description;\n    if (updates.date !== undefined) payload.occurred_at = updates.date;\n    if (updates.type !== undefined) payload.type = updates.type;\n    if (updates.notes !== undefined) payload.notes = updates.notes;\n    if (updates.location !== undefined) payload.location_text = updates.location;\n    if (updates.beneficiary !== undefined) payload.beneficiary = updates.beneficiary;\n    if (updates.frequency !== undefined) payload.frequency = updates.frequency;\n    if (updates.end_date !== undefined) payload.end_date = updates.end_date;\n    if (updates.end_date !== undefined) payload.end_date = updates.end_date;\n    // Relationship updates\n    if (updates.category_id) payload.category_id = updates.category_id;\n    if (updates.account_id) payload.account_id = updates.account_id;\n    // Also support name-based updates if IDs not passed (legacy/UI compatibility)\n    if (!updates.category_id && updates.category) {\n      const cat = categories.find(c => c.name === updates.category);\n      if (cat) payload.category_id = cat.id;\n    }\n\n    payload.updated_at = new Date().toISOString();\n\n    const { error } = await supabase.from('transactions').update(payload).eq('id', id);\n\n    if (error) {\n      console.error(\"Error updating transaction:\", error);\n      alert(\"Error updating transaction: \" + error.message);\n      return;\n    }\n    if (activeBookId) {\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId); // Balance might change\n    }\n  };\n\n  const duplicateTransaction = async (id: string) => {\n    const original = transactions.find(t => t.id === id);\n    if (!original) return;\n\n    const newTrans: Omit<Transaction, 'id'> = {\n      ...original,\n      date: new Date().toISOString(), // Update to current time\n      notes: (original.notes ? original.notes + \" \" : \"\") + \"(Copia)\",\n      created_at: undefined, // Let DB set this\n      updated_at: undefined\n    };\n\n    await addTransaction(newTrans);\n  };\n\n  const toggleCommitmentStatus = async (id: string, currentStatus: string) => {\n    const newStatus = currentStatus === 'PAID' ? 'PENDING' : 'PAID';\n\n    // Optimistic update\n    await updateCommitment(id, { status: newStatus as any });\n\n    // If marking as PAID, generate the transaction\n    if (newStatus === 'PAID') {\n      const commitment = commitments.find(c => c.id === id);\n      if (commitment) {\n        const transactionData: any = {\n          book_id: activeBookId,\n          amount: commitment.amount,\n          type: commitment.transaction_type || 'EXPENSE', // Fallback to expense if not set\n          account: commitment.account, // Name is used by addTransaction\n          account_id: commitment.accountId, // Pass ID if available for precision\n          category: commitment.category,\n          category_id: commitment.categoryId,\n          description: `[Compromiso] ${commitment.name}`,\n          date: new Date().toISOString(),\n          notes: 'Generado automáticamente desde Compromisos',\n          commitment_id: id // Link back to commitment\n        };\n\n        await addTransaction(transactionData);\n        // Toast or feedback could go here\n\n        // Generate Next Occurrence for Recurring Commitments\n        if (commitment.frequency) {\n          const currentDate = new Date(commitment.nextDueDate);\n          // Ensure valid date\n          if (!isNaN(currentDate.getTime())) {\n            const nextDate = new Date(currentDate);\n\n            // Add time based on frequency (using UTC-safe or local logic? standard JS methods use local)\n            // Just basic iteration:\n            switch (commitment.frequency) {\n              case 'DAILY': nextDate.setDate(nextDate.getDate() + 1); break;\n              case 'WEEKLY': nextDate.setDate(nextDate.getDate() + 7); break;\n              case 'BIWEEKLY': nextDate.setDate(nextDate.getDate() + 14); break;\n              case 'MONTHLY': nextDate.setMonth(nextDate.getMonth() + 1); break;\n              case 'QUARTERLY': nextDate.setMonth(nextDate.getMonth() + 3); break;\n              case 'SEMIANNUAL': nextDate.setMonth(nextDate.getMonth() + 6); break;\n              case 'ANNUAL': nextDate.setFullYear(nextDate.getFullYear() + 1); break;\n            }\n\n            // Check End Date\n            const hasEndDate = commitment.endDate && commitment.endDate.trim() !== '';\n            const isAfterEnd = hasEndDate && new Date(commitment.endDate!) < nextDate;\n\n            if (!isAfterEnd) {\n              // Create the next commitment\n              // We omit 'id' effectively by constructing a new object.\n              // We pass the new calculated date.\n              const nextCommitment = {\n                ...commitment,\n                // Reset status to PENDING for the new one\n                status: 'PENDING' as const,\n                nextDueDate: nextDate.toISOString(),\n                // Keep the rest (name, amount, etc)\n              };\n\n              // Remove IDs from the spread object to avoid TS issues if possible, \n              // but addCommitment accepts Omit<Commitment, 'id'>. \n              // We can cast or just rely on addCommitment implementation ignoring them.\n              // Let's rely on addCommitment implementation which constructs payload explicitly.\n              await addCommitment(nextCommitment);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  const toggleRuleStatus = (id: string) => {\n    // impl\n  };\n\n  const activateLedger = (id: string) => {\n    handleChangeActiveBook(id);\n  };\n\n  const generateSampleData = async () => {\n    if (!activeBookId) return;\n\n    setIsLoading(true);\n\n    // 1. Create Accounts\n    const accountsData = [\n      { book_id: activeBookId, name: 'Chase Sapphire', type: 'CREDIT', balance: -1250.00, last_four: '4242' },\n      { book_id: activeBookId, name: 'Bank of America', type: 'DEBIT', balance: 5430.50, last_four: '8899' },\n      { book_id: activeBookId, name: 'Efectivo', type: 'CASH', balance: 200.00, last_four: 'N/A' },\n      { book_id: activeBookId, name: 'Inversiones', type: 'INVESTMENT', balance: 15000.00, last_four: 'N/A' }\n    ];\n\n    const { data: newAccounts } = await supabase.from('accounts').insert(accountsData).select();\n\n    if (newAccounts) {\n      // 2. Create Transactions (Random dates in last 30 days)\n      const categories = ['Alimentos', 'Transporte', 'Vivienda', 'Entretenimiento', 'Salud', 'Servicios'];\n      const types: TransactionType[] = ['EXPENSE', 'EXPENSE', 'EXPENSE', 'INCOME']; // More expenses usually\n\n      const transactionsData = Array.from({ length: 20 }).map((_, i) => {\n        const type = types[Math.floor(Math.random() * types.length)];\n        const amount = Math.floor(Math.random() * 500) + 10;\n        const account = newAccounts[Math.floor(Math.random() * newAccounts.length)];\n        const category = categories[Math.floor(Math.random() * categories.length)];\n        const date = new Date();\n        date.setDate(date.getDate() - Math.floor(Math.random() * 30));\n\n        return {\n          book_id: activeBookId,\n          account_id: account.id,\n          type: type,\n          amount: type === 'INCOME' ? amount * 5 : amount,\n          description: `Movimiento de prueba ${i + 1}`,\n          category_id: null, // text for now\n          occurred_at: date.toISOString(),\n          // Metadata stored in JSON or simplified for this quick mocked context\n        };\n      });\n\n      await supabase.from('transactions').insert(transactionsData);\n\n      // 3. Create Commitments\n      await supabase.from('commitments').insert([\n        { book_id: activeBookId, title: 'Netflix Premium', amount: 15.99, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PENDING' },\n        { book_id: activeBookId, title: 'Spotify Couple', amount: 12.99, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PAID' },\n        { book_id: activeBookId, title: 'Gym Membership', amount: 45.00, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PENDING' },\n      ]);\n    }\n\n    // Refresh all\n    await handleChangeActiveBook(activeBookId);\n    setIsLoading(false);\n  };\n\n  const addBudget = async (budgetData: { amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }) => {\n    if (!activeBookId) return;\n\n    const { error } = await supabase.from('budgets').insert({\n      book_id: activeBookId,\n      category_id: budgetData.categoryId,\n      amount: budgetData.amount,\n      recurrence_type: budgetData.recurrenceType || 'MONTHLY',\n      recurrence_interval: budgetData.recurrenceInterval || 1,\n      start_date: budgetData.startDate || new Date().toISOString(),\n      end_date: budgetData.endDate || null,\n      period: 'MONTHLY' // Default for legacy/required DB column if I made it NOT NULL default 'MONTHLY'\n    });\n\n    if (error) {\n      console.error('Error creating budget:', error);\n      alert('Error al crear presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  };\n\n  const deleteBudget = async (id: string) => {\n    if (!activeBookId) return;\n\n    const { error } = await supabase.from('budgets').delete().eq('id', id);\n\n    if (error) {\n      console.error('Error deleting budget:', error);\n      alert('Error al eliminar presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  };\n\n  const updateBudget = async (id: string, updates: Partial<{ amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {};\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.categoryId !== undefined) payload.category_id = updates.categoryId;\n    if (updates.recurrenceType !== undefined) payload.recurrence_type = updates.recurrenceType;\n    if (updates.recurrenceInterval !== undefined) payload.recurrence_interval = updates.recurrenceInterval;\n    if (updates.startDate !== undefined) payload.start_date = updates.startDate;\n    if (updates.endDate !== undefined) payload.end_date = updates.endDate;\n\n    const { error } = await supabase.from('budgets').update(payload).eq('id', id);\n\n    if (error) {\n      console.error('Error updating budget:', error);\n      alert('Error al actualizar presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  };\n\n  const checkRecurringBudgets = async () => {\n    if (!activeBookId || budgets.length === 0) return;\n\n    const today = new Date();\n    const createdBudgets: any[] = [];\n\n    for (const budget of budgets) {\n      if (!budget.recurrence_type || budget.recurrence_type === 'NONE' || !budget.start_date) continue;\n\n      const startDate = new Date(budget.start_date);\n      const endDate = budget.end_date ? new Date(budget.end_date) : null;\n\n      let nextStartDate: Date | null = null;\n      let nextEndDate: Date | null = null;\n\n      if (!endDate) continue;\n\n      if (isBefore(endDate, today)) {\n        nextStartDate = addDays(endDate, 1);\n\n        if (budget.recurrence_type === 'MONTHLY') {\n          nextStartDate = addMonths(startDate, 1);\n          nextEndDate = endOfMonth(nextStartDate);\n        } else if (budget.recurrence_type === 'WEEKLY') {\n          nextStartDate = addWeeks(startDate, 1);\n          nextEndDate = addDays(nextStartDate, 6);\n        } else if (budget.recurrence_type === 'BIWEEKLY') {\n          nextStartDate = addDays(startDate, 14);\n          nextEndDate = addDays(nextStartDate, 13);\n        } else if (budget.recurrence_type === 'ANNUAL') {\n          nextStartDate = addYears(startDate, 1);\n          nextEndDate = new Date(nextStartDate.getFullYear(), 11, 31);\n        } else {\n          continue;\n        }\n\n        const exists = budgets.some(b =>\n          b.category_id === budget.category_id &&\n          isSameDay(new Date(b.start_date), nextStartDate!)\n        );\n\n        if (!exists && nextStartDate) {\n          createdBudgets.push({\n            book_id: activeBookId,\n            category_id: budget.category_id,\n            amount: budget.limit,\n            recurrence_type: budget.recurrence_type,\n            recurrence_interval: budget.recurrence_interval,\n            start_date: nextStartDate.toISOString(),\n            end_date: nextEndDate ? nextEndDate.toISOString() : null,\n            period: 'MONTHLY'\n          });\n        }\n      }\n    }\n\n    if (createdBudgets.length > 0) {\n      console.log(\"Generating recurring budgets:\", createdBudgets.length);\n      const { error } = await supabase.from('budgets').insert(createdBudgets);\n      if (error) {\n        console.error(\"Error generating recurring budgets:\", error);\n      } else {\n        await fetchBudgets(activeBookId);\n      }\n    }\n  };\n\n  // Modal State\n  const [isTransactionModalOpen, setIsTransactionModalOpen] = useState(false);\n\n  const openTransactionModal = () => setIsTransactionModalOpen(true);\n  const closeTransactionModal = () => setIsTransactionModalOpen(false);\n\n  const totalBalance = accounts.reduce((sum, acc) => sum + acc.balance, 0);\n\n  return (\n    <FinanceContext.Provider value={{\n      transactions, accounts, categories, categoryFolders, budgets, commitments, recurringRules, ledgers,\n      addTransaction, deleteTransaction, addAccount, updateAccount, deleteAccount,\n      addCommitment, updateCommitment, deleteCommitment, toggleCommitmentStatus,\n      toggleRuleStatus, activateLedger, generateSampleData, totalBalance,\n      isDarkMode, toggleTheme, isLoading, activeBookId, refreshBooks, formatAmount,\n      isTransactionModalOpen, openTransactionModal, closeTransactionModal,\n      addBudget, updateTransaction, duplicateTransaction, deleteBudget, updateBudget,\n      checkRecurringBudgets,\n      deleteCategory: async (id: string) => {\n        if (!activeBookId) return;\n        const { error } = await supabase.from('categories').delete().eq('id', id);\n        if (error) {\n          console.error(\"Error deleting category:\", error);\n          alert(\"Error al eliminar categoría: \" + error.message);\n        } else {\n          await fetchCategories(activeBookId);\n        }\n      },\n      deleteCategoryFolder: async (id: string) => {\n        if (!activeBookId) return;\n        const { error } = await supabase.from('category_folders').delete().eq('id', id);\n        if (error) {\n          console.error(\"Error deleting folder:\", error);\n          alert(\"Error al eliminar carpeta: \" + error.message);\n        } else {\n          await fetchCategoryFolders(activeBookId);\n          // Also refresh categories as they might have been unlinked (if cascade set null) or deleted (if cascade delete)\n          await fetchCategories(activeBookId);\n        }\n      }\n    }}>\n      {children}\n    </FinanceContext.Provider>\n  );\n};\n\nexport const useFinance = () => {\n  const context = useContext(FinanceContext);\n  if (!context) throw new Error('useFinance must be used within a FinanceProvider');\n  return context;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1055, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/components/TransactionModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useFinance } from '@/context/FinanceContext';\nimport { Transaction, TransactionType } from '@/types';\ninterface TransactionModalProps {\n    isOpen?: boolean;\n    onClose?: () => void;\n    transactionToEdit?: Transaction | null;\n}\n\nexport const TransactionModal = ({ isOpen, onClose, transactionToEdit }: TransactionModalProps) => {\n    const {\n        isTransactionModalOpen,\n        closeTransactionModal,\n        addTransaction,\n        updateTransaction,\n        accounts,\n        categories,\n        formatAmount,\n        ledgers,\n        activeBookId\n    } = useFinance();\n\n    const finalIsOpen = isOpen !== undefined ? isOpen : isTransactionModalOpen;\n    const finalOnClose = onClose || closeTransactionModal;\n\n    const [amount, setAmount] = useState('');\n    const [description, setDescription] = useState('');\n    const [type, setType] = useState<TransactionType>('EXPENSE');\n    const [categoryId, setCategoryId] = useState('');\n    const [accountId, setAccountId] = useState('');\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\n    const [time, setTime] = useState(new Date().toTimeString().slice(0, 5));\n    const [location, setLocation] = useState('');\n    const [notes, setNotes] = useState('');\n    const [beneficiary, setBeneficiary] = useState('');\n    const [isPending, setIsPending] = useState(false);\n    const [isRecurring, setIsRecurring] = useState(false);\n    const [frequency, setFrequency] = useState('MONTHLY');\n    const [endDate, setEndDate] = useState('');\n\n    // Reset or Populate form\n    useEffect(() => {\n        if (finalIsOpen) {\n            if (transactionToEdit) {\n                // Edit Mode\n                setAmount(transactionToEdit.amount.toString());\n                setDescription(transactionToEdit.description);\n                setType(transactionToEdit.type);\n                setCategoryId(transactionToEdit.category_id || categories.find(c => c.name === transactionToEdit.category)?.id || '');\n                setAccountId(transactionToEdit.account_id || accounts.find(a => a.name === transactionToEdit.account)?.id || '');\n\n                const d = new Date(transactionToEdit.date);\n                setDate(d.toISOString().split('T')[0]);\n                setTime(d.toTimeString().slice(0, 5));\n\n                setLocation(transactionToEdit.location || '');\n                setNotes(transactionToEdit.notes || '');\n                setBeneficiary(transactionToEdit.beneficiary || '');\n                setIsPending(transactionToEdit.status === 'PENDING');\n                setIsRecurring(transactionToEdit.isRecurring || false);\n                setFrequency(transactionToEdit.frequency || 'MONTHLY');\n                const endDateVal = transactionToEdit.end_date ? new Date(transactionToEdit.end_date).toISOString().split('T')[0] : '';\n                setEndDate(endDateVal);\n            } else {\n                // Create Mode\n                setAmount('');\n                setDescription('');\n                setType('EXPENSE');\n                setCategoryId('');\n                setAccountId(accounts[0]?.id || '');\n                const now = new Date();\n                setDate(now.toISOString().split('T')[0]);\n                setTime(now.toTimeString().slice(0, 5));\n                setLocation('');\n                setNotes('');\n                setBeneficiary('');\n                setIsPending(false);\n                setIsRecurring(false);\n                setFrequency('MONTHLY');\n                setEndDate('');\n            }\n        }\n    }, [finalIsOpen, transactionToEdit, accounts, categories]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        const numAmount = parseFloat(amount);\n        if (isNaN(numAmount) || numAmount <= 0) {\n            alert('Por favor ingresa un monto válido');\n            return;\n        }\n\n        if (!accountId) {\n            alert('Por favor selecciona una cuenta');\n            return;\n        }\n\n        const dateTime = new Date(`${date}T${time}`);\n        const selectedAccount = accounts.find(a => a.id === accountId);\n\n        const transactionData = {\n            amount: numAmount,\n            type: type,\n            description: description || (type === 'INCOME' ? 'Ingreso' : 'Gasto'),\n            account: selectedAccount?.name || 'Unknown',\n            account_id: accountId,\n            category_id: categoryId || undefined,\n            category: categories.find(c => c.id === categoryId)?.name || 'Sin categoría',\n            date: dateTime.toISOString(),\n            status: (isPending ? 'PENDING' : 'COMPLETED') as 'PENDING' | 'COMPLETED',\n            location: location,\n            notes: notes,\n            beneficiary: beneficiary,\n            icon: type === 'INCOME' ? 'trending_up' : 'trending_down',\n            isRecurring: isRecurring,\n            frequency: isRecurring ? frequency : null,\n            end_date: isRecurring && endDate ? new Date(endDate).toISOString() : null\n        };\n\n        if (transactionToEdit) {\n            await updateTransaction(transactionToEdit.id, transactionData);\n        } else {\n            await addTransaction(transactionData);\n        }\n\n        finalOnClose();\n    };\n\n    // Close on Escape key\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'Escape' && finalIsOpen) {\n                finalOnClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [finalIsOpen, finalOnClose]);\n\n    if (!finalIsOpen) return null;\n\n    return (\n        <div\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\n            onClick={finalOnClose}\n        >\n            <div\n                className=\"bg-white dark:bg-[#1e2530] w-full max-w-4xl rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-h-[90vh]\"\n                onClick={(e) => e.stopPropagation()}\n            >\n\n                {/* Left Side - Amount & Type */}\n                <div className=\"w-full md:w-5/12 bg-gray-50 dark:bg-[#252b36] p-8 flex flex-col justify-center items-center relative border-b md:border-b-0 md:border-r border-gray-100 dark:border-white/5\">\n                    <div className=\"absolute top-6 left-1/2 -translate-x-1/2 bg-gray-200 dark:bg-[#2f3642] p-1 rounded-xl flex\">\n                        <button\n                            onClick={() => setType('EXPENSE')}\n                            className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${type === 'EXPENSE' ? 'bg-white dark:bg-[#1e2530] shadow-sm text-danger' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}\n                        >\n                            Gasto\n                        </button>\n                        <button\n                            onClick={() => setType('INCOME')}\n                            className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${type === 'INCOME' ? 'bg-white dark:bg-[#1e2530] shadow-sm text-success' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}\n                        >\n                            Ingreso\n                        </button>\n                    </div>\n\n                    <div className=\"mt-12 text-center w-full\">\n                        <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4\">MONTO TOTAL</p>\n                        <div className=\"relative w-full max-w-[280px] mx-auto\">\n                            <input\n                                type=\"number\"\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                                placeholder=\"0.00\"\n                                className={`w-full bg-transparent text-6xl font-black text-center outline-none border-b-2 border-transparent focus:border-primary/50 transition-colors pb-2 placeholder-gray-200 dark:placeholder-gray-700 ${type === 'INCOME' ? 'text-success' : 'text-text-main dark:text-white'}`}\n                                autoFocus\n                            />\n                            <span className={`absolute top-2 -left-6 text-4xl font-medium ${type === 'INCOME' ? 'text-success/50' : 'text-gray-300 dark:text-gray-600'}`}>\n                                {ledgers.find(l => l.id === activeBookId)?.currency || '$'}\n                            </span>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-auto w-full\">\n                        <label className=\"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3\">Cuenta de Origen</label>\n                        <div className=\"relative\">\n                            <select\n                                value={accountId}\n                                onChange={(e) => setAccountId(e.target.value)}\n                                className=\"w-full appearance-none bg-white dark:bg-[#1e2530] border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-white rounded-xl px-4 py-3 pr-10 font-semibold focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all cursor-pointer\"\n                            >\n                                {accounts.map(acc => (\n                                    <option key={acc.id} value={acc.id}>\n                                        {acc.name} ({formatAmount(acc.balance)})\n                                    </option>\n                                ))}\n                            </select>\n                            <div className=\"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500\">\n                                <span className=\"material-symbols-outlined\">expand_more</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Right Side - Details Form */}\n                <div className=\"w-full md:w-7/12 p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-[#1e2530]\">\n                    <div className=\"flex justify-between items-center mb-8\">\n                        <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Nueva Transacción</h2>\n                        <button onClick={finalOnClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\">\n                            <span className=\"material-symbols-outlined text-gray-500\">close</span>\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\n\n                        {/* Category */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Categoría</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">category</span>\n                                </div>\n                                <select\n                                    value={categoryId}\n                                    onChange={(e) => setCategoryId(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white cursor-pointer\"\n                                >\n                                    <option value=\"\">Selecciona una categoría...</option>\n                                    {categories.map(cat => (\n                                        <option key={cat.id} value={cat.id}>{cat.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Description */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Descripción / Beneficiario</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">description</span>\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    placeholder=\"Ej. Compra semanal, Starbucks, Nómina...\"\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Date & Time Row */}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Fecha</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">calendar_today</span>\n                                    </div>\n                                    <input\n                                        type=\"date\"\n                                        value={date}\n                                        onChange={(e) => setDate(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Hora</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">schedule</span>\n                                    </div>\n                                    <input\n                                        type=\"time\"\n                                        value={time}\n                                        onChange={(e) => setTime(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Location */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Ubicación</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">location_on</span>\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    placeholder=\"Añadir ubicación...\"\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                />\n                                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                                    <button type=\"button\" className=\"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition-colors text-gray-400\" title=\"Usar ubicación actual\">\n                                        <span className=\"material-symbols-outlined text-[18px]\">my_location</span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Notes */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Notas</label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                placeholder=\"Notas adicionales...\"\n                                rows={2}\n                                className=\"w-full p-4 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400 resize-none\"\n                            />\n                        </div>\n\n                        {/* Toggles */}\n                        <div className=\"flex gap-6 py-2\">\n                            <label className=\"flex items-center gap-3 cursor-pointer group select-none\">\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${isPending ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}>\n                                    <div className={`bg-white size-4 rounded-full shadow-md transform transition-transform duration-300 ${isPending ? 'translate-x-6' : ''}`}></div>\n                                </div>\n                                <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors\">Pendiente</span>\n                                <input type=\"checkbox\" checked={isPending} onChange={(e) => setIsPending(e.target.checked)} className=\"hidden\" />\n                            </label>\n\n                            <label className=\"flex items-center gap-3 cursor-pointer group select-none\">\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${isRecurring ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}>\n                                    <div className={`bg-white size-4 rounded-full shadow-md transform transition-transform duration-300 ${isRecurring ? 'translate-x-6' : ''}`}></div>\n                                </div>\n                                <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors\">Recurrente</span>\n                                <input type=\"checkbox\" checked={isRecurring} onChange={(e) => setIsRecurring(e.target.checked)} className=\"hidden\" />\n                            </label>\n                        </div>\n\n                        {/* Frequency Dropdown */}\n                        {isRecurring && (\n                            <div className=\"animate-fade-in-down\">\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Frecuencia</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">repeat</span>\n                                    </div>\n                                    <select\n                                        value={frequency}\n                                        onChange={(e) => setFrequency(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white cursor-pointer appearance-none\"\n                                    >\n                                        <option value=\"DAILY\">Diariamente</option>\n                                        <option value=\"WEEKLY\">Semanalmente</option>\n                                        <option value=\"BIWEEKLY\">Cada 2 semanas</option>\n                                        <option value=\"WEEKLY_3\">Cada 3 semanas</option>\n                                        <option value=\"WEEKLY_4\">Cada 4 semanas</option>\n                                        <option value=\"MONTHLY\">Mensual</option>\n                                        <option value=\"BIMONTHLY\">Cada 2 meses</option>\n                                        <option value=\"QUARTERLY\">Trimestral</option>\n                                        <option value=\"SEMIANNUAL\">Semestral</option>\n                                        <option value=\"ANNUAL\">Anual</option>\n                                    </select>\n                                    <div className=\"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500\">\n                                        <span className=\"material-symbols-outlined\">expand_more</span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* End Date */}\n                        {isRecurring && (\n                            <div className=\"animate-fade-in-down delay-75\">\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Fecha de Finalización (Opcional)</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">event_busy</span>\n                                    </div>\n                                    <input\n                                        type=\"date\"\n                                        value={endDate}\n                                        onChange={(e) => setEndDate(e.target.value)}\n                                        min={date} // Cannot end before start\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                    />\n                                    {endDate && (\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setEndDate('')}\n                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-danger transition-colors\"\n                                            title=\"Limpiar fecha\"\n                                        >\n                                            <span className=\"material-symbols-outlined text-[18px]\">close</span>\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Footer Buttons */}\n                        <div className=\"flex gap-4 mt-4 pt-4 border-t border-gray-100 dark:border-white/5\">\n                            <button\n                                type=\"button\"\n                                onClick={finalOnClose}\n                                className=\"flex-1 py-3.5 rounded-xl border border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-50 dark:hover:bg-white/5 transition-all\"\n                            >\n                                Cancelar\n                            </button>\n                            <button\n                                type=\"submit\"\n                                className=\"flex-[2] py-3.5 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold shadow-lg shadow-primary/30 transform hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2\"\n                            >\n                                <span className=\"material-symbols-outlined\">save</span>\n                                Guardar Transacción\n                            </button>\n                        </div>\n\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}}]
}