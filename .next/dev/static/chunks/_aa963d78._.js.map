{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/utils/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from '@supabase/ssr'\n\nexport function createClient() {\n    return createBrowserClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\n    )\n}\n"],"names":[],"mappings":";;;;AAIQ;AAJR;AAAA;;AAEO,SAAS;IACZ,OAAO,IAAA,oMAAmB;AAI9B"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/context/FinanceContext.tsx"],"sourcesContent":["\n\"use client\";\n\nimport React, { createContext, useContext, useState, useEffect, ReactNode, useCallback, useMemo } from 'react';\nimport { createClient } from '../utils/supabase/client';\nimport { Transaction, Account, Budget, Commitment, RecurringRule, Ledger, TransactionType, Category, CategoryFolder, UserProfile, Notification } from '../types';\nimport { useRouter } from 'next/navigation';\nimport { addMonths, addWeeks, addYears, isAfter, isBefore, startOfDay, addDays, isSameDay, endOfMonth, subMonths, format, subDays, endOfDay, parseISO, startOfMonth, isWithinInterval } from 'date-fns';\n\n\n// Database types mapping could be strictly done here, but for now we map manually\n// to match the specific \"Ledger\" vs \"Book\" terminology change requested by user logic vs DB logic.\n// The user \"Ledger\" in UI maps to \"Book\" in DB.\n\ninterface FinanceContextType {\n  transactions: Transaction[];\n  accounts: Account[];\n  categories: Category[];\n  categoryFolders: CategoryFolder[];\n  budgets: Budget[];\n  commitments: Commitment[];\n  recurringRules: RecurringRule[];\n  ledgers: Ledger[];\n  userProfile: UserProfile | null;\n  fetchUserProfile: () => Promise<void>;\n  updateUserProfile: (updates: Partial<UserProfile>) => Promise<void>;\n  updatePassword: (current: string, newPass: string) => Promise<boolean>;\n  resetPasswordForEmail: (email: string) => Promise<boolean>;\n  deleteUserAccount: () => Promise<void>;\n  uploadAvatar: (file: File) => Promise<string | null>;\n\n  // Actions\n  addTransaction: (t: Omit<Transaction, 'id'>) => Promise<void>;\n  deleteTransaction: (id: string) => Promise<void>;\n  addAccount: (a: Omit<Account, 'id'>) => Promise<void>;\n  updateAccount: (id: string, a: Partial<Account>) => Promise<void>;\n  deleteAccount: (id: string) => Promise<void>;\n  addCommitment: (c: Omit<Commitment, 'id'>) => Promise<void>;\n  updateCommitment: (id: string, updates: Partial<Commitment>) => Promise<void>;\n  deleteCommitment: (id: string) => Promise<void>;\n  toggleCommitmentStatus: (id: string, currentStatus: string) => Promise<void>;\n  toggleRuleStatus: (id: string) => void;\n  updateTransaction: (id: string, updates: Partial<Transaction>) => Promise<void>;\n  duplicateTransaction: (id: string) => Promise<void>;\n  activateLedger: (id: string) => void;\n  generateSampleData: () => Promise<void>;\n\n  totalBalance: number;\n  isDarkMode: boolean;\n  toggleTheme: () => void;\n  isLoading: boolean;\n  activeBookId: string | null;\n  refreshBooks: () => Promise<void>;\n  formatAmount: (amount: number) => string;\n  isTransactionModalOpen: boolean;\n  openTransactionModal: () => void;\n  closeTransactionModal: () => void;\n  addBudget: (b: { amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }) => Promise<void>;\n  updateBudget: (id: string, updates: Partial<{ amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }>) => Promise<void>;\n  deleteBudget: (id: string) => Promise<void>;\n  checkRecurringBudgets: () => Promise<void>;\n  deleteCategory: (id: string) => Promise<void>;\n  deleteCategoryFolder: (id: string) => Promise<void>;\n  notifications: Notification[];\n  unreadCount: number;\n  markNotificationAsRead: (id: string) => void;\n  markAllNotificationsAsRead: () => void;\n}\n\nconst FinanceContext = createContext<FinanceContextType | undefined>(undefined);\n\nexport const FinanceProvider: React.FC<{ children: ReactNode }> = ({ children }) => {\n  const supabase = createClient();\n  const router = useRouter();\n\n  // State\n  const [activeBookId, setActiveBookId] = useState<string | null>(null);\n  const [transactions, setTransactions] = useState<Transaction[]>([]);\n  const [accounts, setAccounts] = useState<Account[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [categoryFolders, setCategoryFolders] = useState<CategoryFolder[]>([]);\n  const [budgets, setBudgets] = useState<Budget[]>([]);\n  const [commitments, setCommitments] = useState<Commitment[]>([]);\n  const [recurringRules, setRecurringRules] = useState<RecurringRule[]>([]); // Migration TODO: Link to commitments?\n  const [ledgers, setLedgers] = useState<Ledger[]>([]); // These are 'books' now\n  const [userProfile, setUserProfile] = useState<UserProfile | null>(null);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [isDarkMode, setIsDarkMode] = useState(false);\n\n  // Theme Logic\n  const toggleTheme = useCallback(() => {\n    setIsDarkMode(prev => {\n      const newMode = !prev;\n      if (typeof window !== 'undefined') {\n        const root = window.document.documentElement;\n        if (newMode) root.classList.add('dark');\n        else root.classList.remove('dark');\n      }\n      return newMode;\n    });\n  }, []);\n\n  const fetchBooks = useCallback(async () => {\n    setIsLoading(true);\n    const { data: { user } } = await supabase.auth.getUser();\n\n    if (!user) {\n      setIsLoading(false);\n      return;\n    }\n\n    const { data: books, error } = await supabase.from('books').select('*');\n\n    if (error) {\n      console.error(\"Error fetching books:\", error);\n      console.error(\"Supabase URL present?\", !!process.env.NEXT_PUBLIC_SUPABASE_URL);\n      console.error(\"Supabase Key present?\", !!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);\n    }\n\n    if (books && books.length > 0) {\n      const mappedLedgers: Ledger[] = books.map(b => ({\n        id: b.id,\n        name: b.name,\n        description: b.short_description || '',\n        balance: 0,\n        isActive: false,\n        isArchived: false,\n        lastUpdate: b.created_at,\n        icon: b.icon || 'Wallet',\n        color: b.color || 'blue', // Default\n        type: 'PERSONAL',\n        members: [],\n        currency: b.currency\n      }));\n\n      setLedgers(mappedLedgers);\n\n      // Initial activation logic can be here or in useEffect\n      // We will activate first if none active in useEffect or consumer\n    } else {\n      await createDefaultBook(user.id);\n    }\n    setIsLoading(false);\n  }, [supabase]);\n\n  // Check for Credit Card Commitments\n  const checkCreditCardCommitments = useCallback(async () => {\n    if (accounts.length === 0 || transactions.length === 0 || isLoading) return;\n\n    for (const account of accounts) {\n      if (account.type !== 'CREDIT' || !account.cutoffDay || !account.payDay) continue;\n\n      const today = new Date();\n      // Determine the latest CLOSED cutoff date\n      let cycleCutoff = new Date(today.getFullYear(), today.getMonth(), account.cutoffDay);\n\n      // If today is before or equal to this month's cutoff, the last closed cycle was LAST month.\n      if (today.getDate() <= account.cutoffDay) {\n        cycleCutoff = subMonths(cycleCutoff, 1);\n      }\n\n      // Identify this cycle uniquely\n      const periodLabel = format(cycleCutoff, 'MMM yyyy');\n      const commitmentName = `Pago Tarjeta ${account.name} - ${periodLabel}`;\n\n      // Find appropriate category (reused logic)\n      let paymentCategoryid = categories.find(c => ['pagos', 'tarjeta', 'tarjetas', 'credit', 'payment', 'finance', 'finanzas'].some(key => c.name.toLowerCase().includes(key)))?.id;\n      if (!paymentCategoryid) paymentCategoryid = categories.find(c => c.name === 'General')?.id;\n      if (!paymentCategoryid && categories.length > 0) {\n        paymentCategoryid = categories[0].id;\n      }\n\n      // Find Funding Account (Debit with money, or any Debit)\n      const fundingAccount = accounts.find(a => a.type === 'DEBIT' && a.balance > 0) || accounts.find(a => a.type === 'DEBIT');\n\n      // Deduplicate first\n      const matches = commitments.filter(c => c.name === commitmentName && c.accountId === account.id);\n      if (matches.length > 1) {\n        // Identify the best one to keep (e.g., the one with funding account or correct type)\n        const valid = matches.find(c => c.transaction_type === 'INCOME' && c.fundingAccountId)\n          || matches.find(c => c.transaction_type === 'INCOME')\n          || matches[0];\n\n        const others = matches.filter(c => c.id !== valid.id);\n        for (const other of others) {\n          console.log(`Removing duplicate commitment: ${other.id}`);\n          await deleteCommitment(other.id);\n        }\n        // After delete, we continue with the 'valid' one as existing\n      }\n\n      // Check if commitment exists and needs update (Refresh find after dedupe)\n      const existingCommitment = commitments.find(c => c.name === commitmentName && c.accountId === account.id);\n\n      if (existingCommitment) {\n        // Check if needs fix (wrong type or missing category or funding account)\n        if (existingCommitment.transaction_type !== 'INCOME' || !existingCommitment.categoryId || !existingCommitment.fundingAccountId) {\n          console.log(`Fixing existing commitment: ${existingCommitment.name}`);\n          await updateCommitment(existingCommitment.id, {\n            transaction_type: 'INCOME',\n            categoryId: paymentCategoryid,\n            fundingAccountId: fundingAccount?.id\n          });\n        }\n        continue;\n      }\n\n      // Calculate Cycle Expenses\n      // Cycle starts day after PREVIOUS cutoff.\n      const prevCutoff = subMonths(cycleCutoff, 1);\n      const startOfCycle = startOfDay(addDays(prevCutoff, 1));\n      const endOfCycle = endOfDay(cycleCutoff);\n\n      const cycleExpenses = transactions.reduce((sum, t) => {\n        if ((t.account === account.name || t.account_id === account.id) &&\n          t.type === 'EXPENSE') {\n          const tDate = new Date(t.date);\n          if (tDate >= startOfCycle && tDate <= endOfCycle) {\n            return sum + t.amount;\n          }\n        }\n        return sum;\n      }, 0);\n\n      if (cycleExpenses <= 0) continue;\n\n      // Calculate Due Date (Pay Day - 1 Day)\n      let payDate = new Date(cycleCutoff.getFullYear(), cycleCutoff.getMonth(), account.payDay);\n      // If payDate is before cutoff (unlikely but possible if payday < cutoff), move to next month.\n      // E.g. Cutoff 18th, Payday 10th. Jan 18 close -> Due Feb 10.\n      if (account.payDay <= account.cutoffDay) {\n        payDate = addMonths(payDate, 1);\n      } else {\n        // Payday 28th. Jan 18 close -> Due Jan 28.\n        // Already in same month as cycleCutoff.\n      }\n\n      const limitDate = subDays(payDate, 1);\n\n      // Create Commitment (Category finding moved up)\n      await addCommitment({\n        name: commitmentName,\n        amount: cycleExpenses,\n        frequency: 'MONTHLY',\n        type: 'TEMPORAL',\n        nextDueDate: limitDate.toISOString(),\n        status: 'PENDING',\n        isActive: true,\n        accountId: account.id,\n        categoryId: paymentCategoryid, // Assign the found category\n        transaction_type: 'INCOME', // Paying the credit card is an INCOME to the credit card account\n        fundingAccountId: fundingAccount?.id, // Default funding source\n        account: account.name\n      });\n\n      console.log(`Generated commitment for ${account.name}: ${cycleExpenses} due ${limitDate.toISOString()}`);\n    }\n  }, [accounts, transactions, isLoading, categories, commitments]); // Dependencies updated\n\n  // Deduplicate logic helper\n  const deduplicateCommitments = useCallback(async (account: Account, periodLabel: string) => {\n    const commitmentName = `Pago Tarjeta ${account.name} - ${periodLabel}`;\n    // Find ALL matching commitments\n    const matches = commitments.filter(c => c.name === commitmentName && c.accountId === account.id);\n\n    if (matches.length > 1) {\n      console.warn(`Found ${matches.length} duplicates for ${commitmentName}. Keeping the one with manual edits or the last one.`);\n      // Sort by updated_at? We don't have it on type easily, assumed standard sort.\n      // Keep the one with fundingAccountId if exists, or just the first/last.\n      // Let's keep the one with ID that matches a 'valid' criteria or just the first one and delete others.\n      const keep = matches.find(c => c.fundingAccountId) || matches[0];\n      const toDelete = matches.filter(c => c.id !== keep.id);\n\n      for (const c of toDelete) {\n        await deleteCommitment(c.id);\n      }\n    }\n  }, [commitments]);\n\n  useEffect(() => {\n    // Ensure commitments are loaded or at least we have tried to fetch them.\n    // We can check if commitments array is populated or if we have a flag.\n    // Relying on accounts/transactions implies data is loaded.\n    // Adding `commitments` to deps ensures we re-run if they change (e.g. initial load finish).\n    // But we must guard against infinite loop if this function *modifies* commitments.\n    // checkCreditCardCommitments modifies commitments ONLY if needed.\n    if (!isLoading && accounts.length > 0 && transactions.length > 0) {\n      checkCreditCardCommitments();\n      generateNotifications();\n    }\n  }, [isLoading, accounts, transactions.length, commitments.length, budgets.length]); // Added dependencies\n\n  // Notification Logic\n  const generateNotifications = useCallback(() => {\n    const newNotifications: Notification[] = [];\n    const today = new Date();\n\n    // 1. Commitments Due Soon (3 days)\n    commitments.forEach(c => {\n      if (c.status === 'PENDING' && c.isActive) {\n        const dueDate = parseISO(c.nextDueDate);\n        if (isBefore(dueDate, addDays(today, 3)) && isAfter(dueDate, subDays(today, 1))) {\n          newNotifications.push({\n            id: `comm-${c.id}`,\n            title: 'Pago Próximo',\n            message: `El compromiso \"${c.name}\" vence el ${format(dueDate, 'dd MMM')}.`,\n            time: format(today, 'HH:mm'), // approximated\n            type: 'WARNING',\n            read: false\n          });\n        }\n      }\n    });\n\n    // 2. Budgets (Approximate for Current Month)\n    // We recreate simplistic logic here: Filter transactions for current month & category\n    const startMonth = startOfMonth(today);\n    const endMonth = endOfMonth(today);\n\n    budgets.forEach(b => {\n      const categoryId = b.category_id;\n      if (!categoryId) return; // Skip if no ID\n\n      // Calculate spent for this budget's category in current month\n      const spent = transactions\n        .filter(t =>\n          t.type === 'EXPENSE' &&\n          t.category_id === categoryId &&\n          isWithinInterval(new Date(t.date), { start: startMonth, end: endMonth })\n        )\n        .reduce((sum, t) => sum + t.amount, 0);\n\n      const ratio = b.limit > 0 ? spent / b.limit : 0;\n\n      if (ratio >= 1) {\n        newNotifications.push({\n          id: `bud-err-${b.id}`,\n          title: 'Presupuesto Excedido',\n          message: `Has excedido tu presupuesto de ${b.category || 'Categoría'}.`,\n          time: 'Ahora',\n          type: 'ERROR',\n          read: false\n        });\n      } else if (ratio >= 0.8) {\n        newNotifications.push({\n          id: `bud-warn-${b.id}`,\n          title: 'Presupuesto al Límite',\n          message: `Estás al ${(ratio * 100).toFixed(0)}% de tu presupuesto de ${b.category || 'Categoría'}.`,\n          time: 'Ahora',\n          type: 'WARNING',\n          read: false\n        });\n      }\n    });\n\n    // 3. Credit Cards Pay Day (3 days)\n    accounts.filter(a => a.type === 'CREDIT').forEach(acc => {\n      if (acc.payDay) {\n        // Calculate next pay date (naive approach: this month's pay day)\n        let payDate = new Date(today.getFullYear(), today.getMonth(), acc.payDay);\n        if (isBefore(payDate, today)) {\n          payDate = addMonths(payDate, 1);\n        }\n\n        if (isWithinInterval(payDate, { start: today, end: addDays(today, 3) })) {\n          newNotifications.push({\n            id: `cc-${acc.id}`,\n            title: 'Tarjeta de Crédito',\n            message: `La fecha de pago de ${acc.name} es el ${format(payDate, 'dd MMM')}.`,\n            time: 'Ahora',\n            type: 'INFO',\n            read: false\n          });\n        }\n      }\n    });\n\n    // Deduplicate or Merge with existing read status?\n    // For MVP, we replace, but we lose \"read\" status if we just replace.\n    // Ideally we persist read status in local storage or DB. \n    // Let's implement a simple LocalStorage check for \"read ids\".\n    const readIds = JSON.parse(localStorage.getItem('read_notifications') || '[]');\n\n    const finalNotifications = newNotifications.map(n => ({\n      ...n,\n      read: readIds.includes(n.id)\n    }));\n\n    // Sort?\n    setNotifications(finalNotifications);\n  }, [commitments, budgets, transactions, accounts]);\n\n  const markNotificationAsRead = useCallback((id: string) => {\n    setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n));\n    const readIds = JSON.parse(localStorage.getItem('read_notifications') || '[]');\n    if (!readIds.includes(id)) {\n      readIds.push(id);\n      localStorage.setItem('read_notifications', JSON.stringify(readIds));\n    }\n  }, []);\n\n  const markAllNotificationsAsRead = useCallback(() => {\n    setNotifications(prev => prev.map(n => ({ ...n, read: true })));\n    const allIds = notifications.map(n => n.id);\n    const readIds = JSON.parse(localStorage.getItem('read_notifications') || '[]');\n    const newReadIds = Array.from(new Set([...readIds, ...allIds]));\n    localStorage.setItem('read_notifications', JSON.stringify(newReadIds));\n  }, [notifications]);\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n\n  // Initial Load\n  useEffect(() => {\n    fetchBooks().then((mappedLedgers) => {\n      // Logic moved inside to have access to the fetched ledgers directly if returned, \n      // or we rely on state updates which might be async.\n      // Better approach: fetchBooks updates state. We wait for that.\n    });\n  }, []);\n\n  // Effect to handle initial active book selection once ledgers are loaded\n  useEffect(() => {\n    if (!isLoading && ledgers.length > 0 && !activeBookId) {\n      // Try to recover from localStorage\n      const savedBookId = localStorage.getItem('finance_active_book_id');\n      const targetBook = ledgers.find(l => l.id === savedBookId);\n\n      if (targetBook) {\n        handleChangeActiveBook(targetBook.id);\n      } else {\n        // Default to first if no saved book or saved book not found/deleted\n        handleChangeActiveBook(ledgers[0].id);\n      }\n    }\n  }, [isLoading, ledgers, activeBookId]);\n\n  // Helper to format currency based on active book\n  const formatAmount = useCallback((amount: number) => {\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\n    const currency = activeLedger?.currency || 'MXN';\n\n    let locale = 'es-MX';\n    if (currency === 'USD') locale = 'en-US';\n    if (currency === 'EUR') locale = 'es-ES';\n    if (currency === 'PEN') return `S/ ${amount.toLocaleString('es-PE', { minimumFractionDigits: 2 })}`;\n    if (currency === 'COP') locale = 'es-CO';\n\n    return new Intl.NumberFormat(locale, {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 2,\n    }).format(amount);\n  }, [ledgers, activeBookId]);\n\n  const fetchCategories = useCallback(async (bookId: string) => {\n    const { data } = await supabase.from('categories').select('*').eq('book_id', bookId);\n    if (data) {\n      const mapped = data.map((cat: any) => ({\n        id: cat.id,\n        name: cat.name,\n        color: cat.color || '#2563eb',\n        icon: cat.icon || 'category',\n        folder_id: cat.folder_id || null\n      }));\n      setCategories(mapped);\n      localStorage.setItem(`fin_cache_categories_${bookId}`, JSON.stringify(mapped));\n    }\n  }, [supabase]);\n\n  const fetchCategoryFolders = useCallback(async (bookId: string) => {\n    const { data } = await supabase.from('category_folders').select('*').eq('book_id', bookId);\n    if (data) {\n      const mapped = data.map((folder: any) => ({\n        id: folder.id,\n        name: folder.name,\n        color: folder.color || '#6366f1',\n        icon: folder.icon || 'folder'\n      }));\n      setCategoryFolders(mapped);\n      localStorage.setItem(`fin_cache_folders_${bookId}`, JSON.stringify(mapped));\n    }\n  }, [supabase]);\n\n  const fetchAccounts = useCallback(async (bookId: string) => {\n    const { data } = await supabase.from('accounts').select('*').eq('book_id', bookId);\n    if (data) {\n      const mapped = data.map(a => ({\n        ...a,\n        // Ensure types match UI expectation and map snake_case to camelCase\n        type: a.type as any,\n        creditLimit: a.credit_limit,\n        availableCredit: a.available_credit,\n        cutoffDay: a.cutoff_day,\n        payDay: a.pay_day,\n        lastFour: a.last_four,\n        autoPay: a.auto_pay,\n        isDefault: a.is_default,\n        cardholderName: a.cardholder_name,\n        expiryDate: a.expiry_date,\n        // Keep original if needed, but UI uses camelCase\n      }));\n      setAccounts(mapped);\n      localStorage.setItem(`fin_cache_accounts_${bookId}`, JSON.stringify(mapped));\n    }\n  }, [supabase]);\n\n  const fetchTransactions = useCallback(async (bookId: string) => {\n    const { data } = await supabase\n      .from('transactions')\n      .select(`\n        *,\n        categories (name, icon, color),\n        accounts (name)\n      `)\n      .eq('book_id', bookId)\n      .order('occurred_at', { ascending: false });\n\n    if (data) {\n      const mapped = data.map((t: any) => ({\n        id: t.id,\n        amount: t.amount,\n        type: t.type as any,\n        category: t.categories?.name || 'Uncategorized',\n        category_id: t.category_id,\n        account: t.accounts?.name || 'Unknown',\n        account_id: t.account_id,\n        description: t.description || '',\n        date: t.occurred_at,\n        icon: t.categories?.icon || 'attach_money',\n        status: t.status as any,\n        location: t.location_text, // Map DB location_text to UI location\n        notes: t.notes,\n        beneficiary: t.beneficiary,\n        created_at: t.created_at,\n        updated_at: t.updated_at\n      }));\n      setTransactions(mapped);\n      localStorage.setItem(`fin_cache_transactions_${bookId}`, JSON.stringify(mapped));\n    }\n  }, [supabase]);\n\n  const fetchCommitments = useCallback(async (bookId: string) => {\n    const { data, error } = await supabase\n      .from('commitments')\n      .select(`\n        *,\n        categories (name),\n        accounts:account_id (name)\n      `)\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.error('Error fetching commitments:', error);\n    }\n\n    if (data) {\n      setCommitments(data.map((c: any) => ({\n        id: c.id,\n        name: c.title,\n        amount: c.amount,\n        frequency: c.frequency as any,\n        nextDueDate: c.next_due_date,\n        status: c.status as any,\n        type: c.type as any || 'FIXED',\n        isActive: c.is_active ?? true,\n        endDate: c.end_date,\n        category: c.categories?.name || 'General',\n        account: c.accounts?.name || 'Cuenta principal',\n        categoryId: c.category_id,\n        accountId: c.account_id,\n        recurrence: c.recurrence,\n        transaction_type: c.transaction_type,\n        isAutoPay: c.is_auto_pay,\n        fundingAccountId: c.funding_account_id\n      })));\n    }\n  }, [supabase]);\n\n  const fetchBudgets = useCallback(async (bookId: string) => {\n    // Joining handled client-side in UI to ensure robustness\n    const { data, error } = await supabase\n      .from('budgets')\n      .select('*')\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.warn('Error loading budgets', error.message);\n      return;\n    }\n    if (data) {\n      const mapped = data.map((b: any) => ({\n        id: b.id,\n        category: 'Loading...', // Main mapping done in Page via category_id\n        category_id: b.category_id,\n        limit: Number(b.amount || 0),\n        spent: 0,\n        period: 'MONTHLY' as const, // Default or map if DB has it\n        severity: 'NORMAL' as const,\n        start_date: b.start_date,\n        end_date: b.end_date,\n        recurrence_type: b.recurrence_type,\n        recurrence_interval: b.recurrence_interval,\n        created_at: b.created_at\n      }));\n      setBudgets(mapped);\n      localStorage.setItem(`fin_cache_budgets_${bookId}`, JSON.stringify(mapped));\n    }\n  }, [supabase]);\n\n  const fetchRecurringRules = useCallback(async (bookId: string) => {\n    const { data, error } = await supabase\n      .from('recurring_rules')\n      .select(`\n        *,\n        categories (name, icon, color),\n        accounts (name)\n      `)\n      .eq('book_id', bookId);\n\n    if (error) {\n      console.warn('No fue posible cargar reglas recurrentes', error.message);\n      return;\n    }\n    if (data) {\n      setRecurringRules(data.map((r: any) => ({\n        id: r.id,\n        name: r.name,\n        category: r.categories?.name || 'General',\n        account: r.accounts?.name || 'Cuenta principal',\n        amount: Number(r.amount ?? 0),\n        type: (r.type as TransactionType) || 'EXPENSE',\n        frequency: r.frequency || 'Mensual',\n        nextDate: r.next_run_at || '',\n        active: r.is_active ?? true,\n        icon: r.categories?.icon || 'autorenew'\n      })));\n    }\n  }, [supabase]);\n\n  const refreshBooks = useCallback(async () => {\n    await fetchBooks();\n    if (activeBookId) {\n      await Promise.all([\n        fetchAccounts(activeBookId),\n        fetchCategories(activeBookId),\n        fetchCategoryFolders(activeBookId),\n        fetchTransactions(activeBookId),\n        fetchCommitments(activeBookId),\n        fetchBudgets(activeBookId),\n        fetchRecurringRules(activeBookId)\n      ]);\n    }\n  }, [activeBookId, fetchBooks]);\n\n  const createDefaultBook = useCallback(async (userId: string) => {\n    const { data, error } = await supabase.from('books').insert({\n      name: 'Personal',\n      user_id: userId\n    }).select().single();\n\n    if (error) {\n      console.error(\"Error creating default book:\", error);\n    }\n\n    if (data) {\n      const newLedger: Ledger = {\n        id: data.id,\n        name: data.name,\n        description: 'Mi primer libro contable',\n        balance: 0,\n        isActive: true,\n        isArchived: false,\n        lastUpdate: new Date().toISOString(),\n        icon: 'person',\n        color: 'blue',\n        type: 'PERSONAL',\n        members: []\n      };\n      setLedgers([newLedger]);\n      handleChangeActiveBook(data.id);\n    }\n  }, [supabase]);\n\n  const handleChangeActiveBook = useCallback(async (bookId: string) => {\n    setActiveBookId(bookId);\n    localStorage.setItem('finance_active_book_id', bookId); // Persist selection\n    setLedgers(prev => prev.map(l => ({ ...l, isActive: l.id === bookId })));\n\n    // Load Caches Immediately\n    try {\n      const cachedAcc = localStorage.getItem(`fin_cache_accounts_${bookId}`);\n      if (cachedAcc) setAccounts(JSON.parse(cachedAcc));\n\n      const cachedCats = localStorage.getItem(`fin_cache_categories_${bookId}`);\n      if (cachedCats) setCategories(JSON.parse(cachedCats));\n\n      const cachedTx = localStorage.getItem(`fin_cache_transactions_${bookId}`);\n      if (cachedTx) setTransactions(JSON.parse(cachedTx));\n\n      const cachedFolders = localStorage.getItem(`fin_cache_folders_${bookId}`);\n      if (cachedFolders) setCategoryFolders(JSON.parse(cachedFolders));\n\n      const cachedBudgets = localStorage.getItem(`fin_cache_budgets_${bookId}`);\n      if (cachedBudgets) setBudgets(JSON.parse(cachedBudgets));\n\n      // Note: Commitments and Recurring Rules are less critical for 'First Paint' or invalid initial layout, \n      // but encouraged if consistent.\n\n    } catch (e) {\n      console.warn(\"Failed to load cache:\", e);\n    }\n\n    // Fetch Data for this Book (Background Refresh)\n    await Promise.all([\n      fetchAccounts(bookId),\n      fetchCategories(bookId),\n      fetchCategoryFolders(bookId),\n      fetchTransactions(bookId),\n      fetchCommitments(bookId),\n      fetchBudgets(bookId),\n      fetchRecurringRules(bookId)\n    ]);\n  }, [fetchAccounts, fetchCategories, fetchCategoryFolders, fetchTransactions, fetchCommitments, fetchBudgets, fetchRecurringRules]);\n\n\n\n  // ACTIONS\n  const addTransaction = useCallback(async (t: Omit<Transaction, 'id'>) => {\n    if (!activeBookId) return;\n\n    // Find account ID by name (current UI passes name)\n    // In future UI should pass ID. For now, matching by name:\n    const account = accounts.find(a => a.name === t.account);\n    const accountId = account?.id; // Fallback?\n\n    if (!accountId) {\n      console.error(\"Account not found forTransaction name:\", t.account); // Log the name we looked for\n      alert(\"Error: No se encontró la cuenta seleccionada ('\" + t.account + \"'). Por favor selecciona una cuenta válida.\");\n      return;\n    }\n\n    // Find category ID\n    // If t.category is a name, find ID. If t.category_id is provided, use it.\n    let categoryId = t.category_id;\n    if (!categoryId && t.category) {\n      const cat = categories.find(c => c.name === t.category);\n      categoryId = cat?.id;\n    }\n\n    // Handle Location Tracking logic\n    let lat: number | undefined = t.latitude;\n    let lng: number | undefined = t.longitude;\n\n    // If location is enabled in profile and no explicit location passed, try to fetch current\n    if (userProfile?.is_location_enabled && (!lat || !lng)) {\n      try {\n        const pos = await new Promise<GeolocationPosition>((resolve, reject) => {\n          navigator.geolocation.getCurrentPosition(resolve, reject, { timeout: 5000 });\n        });\n        lat = pos.coords.latitude;\n        lng = pos.coords.longitude;\n      } catch (e) {\n        console.warn(\"Could not fetch location for transaction:\", e);\n      }\n    }\n\n    // If t already had coords, they trump everything (passed from manual input maybe)\n    t.latitude = lat;\n    t.longitude = lng;\n\n    const { data, error } = await supabase.from('transactions').insert({\n      book_id: activeBookId,\n      account_id: accountId,\n      type: t.type,\n      amount: t.amount,\n      description: t.description,\n      occurred_at: t.date,\n      category_id: categoryId,\n      currency: account.currency || 'USD',\n      location_text: t.location,\n      location_lat: t.latitude, // Add latitude\n      location_lng: t.longitude, // Add longitude\n      notes: t.notes,\n      beneficiary: t.beneficiary,\n      frequency: t.frequency, // Save frequency to transaction\n      commitment_id: t.commitment_id // Save commitment link\n    }).select().single();\n\n    if (error) {\n      console.error(\"Error creating transaction:\", error);\n      alert(\"Error al guardar: \" + error.message);\n      return;\n    }\n\n    // Update Account Balance manually since no triggers exist\n    if (account) {\n      let newBalance = Number(account.balance);\n      if (t.type === 'INCOME') {\n        newBalance += Number(t.amount);\n      } else {\n        newBalance -= Number(t.amount);\n      }\n\n      const { error: accError } = await supabase\n        .from('accounts')\n        .update({ balance: newBalance })\n        .eq('id', accountId);\n\n      if (accError) {\n        console.error(\"Error updating account balance:\", accError);\n      }\n    }\n\n    // Create Recurring Rule if needed\n    if (data && t.frequency) {\n      let nextDate = new Date(t.date);\n      // Simple logic for next date\n      if (t.frequency === 'DAILY') nextDate.setDate(nextDate.getDate() + 1);\n      if (t.frequency === 'WEEKLY') nextDate.setDate(nextDate.getDate() + 7);\n      if (t.frequency === 'BIWEEKLY') nextDate.setDate(nextDate.getDate() + 14);\n      if (t.frequency === 'MONTHLY') nextDate.setMonth(nextDate.getMonth() + 1);\n      if (t.frequency === 'ANNUAL') nextDate.setFullYear(nextDate.getFullYear() + 1);\n\n      const { error: ruleError } = await supabase.from('recurring_rules').insert({\n        book_id: activeBookId,\n        name: t.description,\n        amount: t.amount,\n        category_id: categoryId,\n        account_id: accountId,\n        type: t.type,\n        frequency: t.frequency,\n        next_run_at: nextDate.toISOString(),\n        end_date: t.end_date,\n        is_active: true\n      });\n\n      if (ruleError) {\n        console.warn(\"Failed to create recurring rule:\", ruleError);\n      } else {\n        fetchRecurringRules(activeBookId);\n      }\n    }\n\n    if (data) {\n      // UI Optimistic Update or Refetch\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId); // Update balances\n    }\n  }, [activeBookId, accounts, categories, userProfile, supabase, fetchRecurringRules, fetchTransactions, fetchAccounts]);\n\n  const addAccount = useCallback(async (a: Omit<Account, 'id'>) => {\n    if (!activeBookId) return;\n\n    // Prepare payload - casting to any to bypass strict database types until migration is run\n    const payload: any = {\n      book_id: activeBookId,\n      name: a.name,\n      type: a.type,\n      balance: a.balance,\n      currency: a.currency,\n      is_default: a.isDefault,\n      // Credit Card Fields\n      credit_limit: a.creditLimit,\n      available_credit: a.availableCredit,\n      pay_day: a.payDay,\n      network: a.network,\n      auto_pay: a.autoPay,\n      last_four: a.lastFour, // Ensure this exists or is removed if unused\n      cardholder_name: a.cardholderName,\n      expiry_date: a.expiryDate,\n      color: 'blue', // Default for now, or passed from 'a' if added to Account type\n      icon: 'account_balance' // Default\n    };\n\n    const { error } = await supabase.from('accounts').insert(payload);\n\n    if (error) {\n      console.error(\"Error creating account:\", error);\n      alert(\"Error creating account: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n  }, [activeBookId, supabase, fetchAccounts]);\n\n  const updateAccount = useCallback(async (id: string, a: Partial<Account>) => {\n    if (!activeBookId) return;\n\n    // Prepare payload\n    const payload: any = {\n      name: a.name,\n      type: a.type,\n      balance: a.balance,\n      currency: a.currency,\n      is_default: a.isDefault,\n      credit_limit: a.creditLimit,\n      available_credit: a.availableCredit,\n      cutoff_day: a.cutoffDay,\n      pay_day: a.payDay,\n      network: a.network,\n      auto_pay: a.autoPay,\n      last_four: a.lastFour,\n      cardholder_name: a.cardholderName,\n      expiry_date: a.expiryDate,\n      color: a.color || 'blue', // preserve or update\n    };\n\n    // Remove undefined keys\n    Object.keys(payload).forEach(key => payload[key] === undefined && delete payload[key]);\n\n    const { error } = await supabase.from('accounts').update(payload).eq('id', id);\n\n    if (error) {\n      console.error(\"Error updating account:\", error);\n      alert(\"Error updating account: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n  }, [activeBookId, supabase, fetchAccounts]);\n\n  const deleteAccount = useCallback(async (id: string) => {\n    if (!activeBookId) return;\n\n    // Check for dependencies? Ideally transactions cascade or block. \n    // Supabase usually set to CASECADE or RESTRICT. Assuming CASCADE or user handled.\n    const { error } = await supabase.from('accounts').delete().eq('id', id);\n\n    if (error) {\n      console.error(\"Error deleting account:\", error);\n      alert(\"Error al eliminar cuenta: \" + error.message);\n      return;\n    }\n\n    fetchAccounts(activeBookId);\n  }, [activeBookId, supabase, fetchAccounts]);\n\n  const addCommitment = useCallback(async (c: Omit<Commitment, 'id'>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {\n      book_id: activeBookId,\n      title: c.name,\n      amount: c.amount,\n      frequency: c.frequency,\n      next_due_date: c.nextDueDate,\n      status: c.status,\n      type: c.type,\n      is_active: c.isActive,\n      end_date: c.endDate,\n      category_id: c.categoryId,\n      account_id: c.accountId,\n      recurrence: c.recurrence,\n      transaction_type: c.transaction_type,\n      is_auto_pay: c.isAutoPay,\n      funding_account_id: c.fundingAccountId\n    };\n\n    if (!c.categoryId && c.category) {\n      const cat = categories.find(cat => cat.name === c.category);\n      if (cat) payload.category_id = cat.id;\n    }\n\n    if (!c.accountId && c.account) {\n      const acc = accounts.find(a => a.name === c.account);\n      if (acc) payload.account_id = acc.id;\n    }\n\n    const { error } = await supabase.from('commitments').insert(payload);\n\n    if (error) {\n      console.error('Error creating commitment:', error);\n      alert('Error al crear compromiso: ' + error.message);\n      return;\n    }\n\n    fetchCommitments(activeBookId);\n  }, [activeBookId, accounts, categories, supabase, fetchCommitments]);\n\n  const updateCommitment = useCallback(async (id: string, updates: Partial<Commitment>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {};\n    if (updates.name !== undefined) payload.title = updates.name;\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.frequency !== undefined) payload.frequency = updates.frequency;\n    if (updates.nextDueDate !== undefined) payload.next_due_date = updates.nextDueDate;\n    if (updates.status !== undefined) payload.status = updates.status;\n    if (updates.type !== undefined) payload.type = updates.type;\n    if (updates.isActive !== undefined) payload.is_active = updates.isActive;\n    if (updates.endDate !== undefined) payload.end_date = updates.endDate;\n    if (updates.recurrence !== undefined) payload.recurrence = updates.recurrence;\n    if (updates.transaction_type !== undefined) payload.transaction_type = updates.transaction_type;\n    if (updates.isAutoPay !== undefined) payload.is_auto_pay = updates.isAutoPay;\n    if (updates.fundingAccountId !== undefined) payload.funding_account_id = updates.fundingAccountId;\n\n    if (updates.categoryId !== undefined) payload.category_id = updates.categoryId;\n    if (updates.accountId !== undefined) payload.account_id = updates.accountId;\n\n    // Fallback for names\n    if (!updates.categoryId && updates.category) {\n      const cat = categories.find(c => c.name === updates.category);\n      if (cat) payload.category_id = cat.id;\n    }\n    if (!updates.accountId && updates.account) {\n      const acc = accounts.find(a => a.name === updates.account);\n      if (acc) payload.account_id = acc.id;\n    }\n\n    const { error } = await supabase.from('commitments').update(payload).eq('id', id);\n\n    if (error) {\n      console.error('Error updating commitment:', error);\n      alert('Error updating commitment: ' + error.message);\n      return;\n    }\n\n    fetchCommitments(activeBookId);\n  }, [activeBookId, accounts, categories, supabase, fetchCommitments]);\n\n  const deleteCommitment = useCallback(async (id: string) => {\n    const { error } = await supabase.from('commitments').delete().eq('id', id);\n    if (error) {\n      console.error(\"Error deleting commitment:\", error);\n      alert(\"Error deleting commitment: \" + error.message);\n      return;\n    }\n    if (activeBookId) fetchCommitments(activeBookId);\n  }, [activeBookId, supabase, fetchCommitments]);\n\n  const deleteTransaction = useCallback(async (id: string) => {\n    // 1. Fetch transaction details to revert balance\n    const { data: transaction } = await supabase\n      .from('transactions')\n      .select('*')\n      .eq('id', id)\n      .single();\n\n    const { error } = await supabase.from('transactions').delete().eq('id', id);\n    if (error) {\n      console.error(\"Error deleting transaction:\", error);\n      alert(\"Error deleting transaction: \" + error.message);\n      return;\n    }\n\n    // 2. Revert Balance\n    if (transaction && transaction.account_id) {\n      const { data: account } = await supabase\n        .from('accounts')\n        .select('balance')\n        .eq('id', transaction.account_id)\n        .single();\n\n      if (account) {\n        let newBalance = Number(account.balance);\n        // Inverse logic: Deleting Income -> Remove money (Subtract)\n        // Inverse logic: Deleting Expense -> Give back money (Add)\n        if (transaction.type === 'INCOME') {\n          newBalance -= Number(transaction.amount);\n        } else {\n          newBalance += Number(transaction.amount);\n        }\n\n        await supabase\n          .from('accounts')\n          .update({ balance: newBalance })\n          .eq('id', transaction.account_id);\n      }\n    }\n\n    // 3. Update Commitment Status if linked\n    if (transaction && transaction.commitment_id) {\n      await supabase\n        .from('commitments')\n        .update({ status: 'PENDING' })\n        .eq('id', transaction.commitment_id);\n\n      fetchCommitments(activeBookId);\n    }\n\n    if (activeBookId) {\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId);\n    }\n  }, [activeBookId, supabase, fetchTransactions, fetchAccounts, fetchCommitments]);\n\n  const updateTransaction = useCallback(async (id: string, updates: Partial<Transaction>) => {\n    // Map UI fields to DB fields\n    const payload: any = {};\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.description !== undefined) payload.description = updates.description;\n    if (updates.date !== undefined) payload.occurred_at = updates.date;\n    if (updates.type !== undefined) payload.type = updates.type;\n    if (updates.notes !== undefined) payload.notes = updates.notes;\n    if (updates.location !== undefined) payload.location_text = updates.location;\n    if (updates.beneficiary !== undefined) payload.beneficiary = updates.beneficiary;\n    if (updates.frequency !== undefined) payload.frequency = updates.frequency;\n    if (updates.end_date !== undefined) payload.end_date = updates.end_date;\n    if (updates.end_date !== undefined) payload.end_date = updates.end_date;\n    // Relationship updates\n    if (updates.category_id) payload.category_id = updates.category_id;\n    if (updates.account_id) payload.account_id = updates.account_id;\n    // Also support name-based updates if IDs not passed (legacy/UI compatibility)\n    if (!updates.category_id && updates.category) {\n      const cat = categories.find(c => c.name === updates.category);\n      if (cat) payload.category_id = cat.id;\n    }\n\n    payload.updated_at = new Date().toISOString();\n\n    const { error } = await supabase.from('transactions').update(payload).eq('id', id);\n\n    if (error) {\n      console.error(\"Error updating transaction:\", error);\n      alert(\"Error updating transaction: \" + error.message);\n      return;\n    }\n    if (activeBookId) {\n      fetchTransactions(activeBookId);\n      fetchAccounts(activeBookId); // Balance might change\n    }\n  }, [activeBookId, categories, supabase, fetchTransactions, fetchAccounts]);\n\n  const duplicateTransaction = useCallback(async (id: string) => {\n    const original = transactions.find(t => t.id === id);\n    if (!original) return;\n\n    const newTrans: Omit<Transaction, 'id'> = {\n      ...original,\n      date: new Date().toISOString(), // Update to current time\n      notes: (original.notes ? original.notes + \" \" : \"\") + \"(Copia)\",\n      created_at: undefined, // Let DB set this\n      updated_at: undefined\n    };\n\n    await addTransaction(newTrans);\n  }, [transactions, addTransaction]);\n\n  const toggleCommitmentStatus = useCallback(async (id: string, currentStatus: string) => {\n    const newStatus = currentStatus === 'PAID' ? 'PENDING' : 'PAID';\n\n    // Optimistic update\n    await updateCommitment(id, { status: newStatus as any });\n\n    // If marking as PAID, generate the transaction\n    if (newStatus === 'PAID') {\n      const commitment = commitments.find(c => c.id === id);\n      if (commitment) {\n        let transType = commitment.transaction_type || 'EXPENSE';\n        // Safety override: Credit Card payments (Temporal) are always INCOME to the card\n        if (commitment.accountId) {\n          const linkedAccount = accounts.find(a => a.id === commitment.accountId);\n          if (linkedAccount && linkedAccount.type === 'CREDIT' && commitment.type === 'TEMPORAL') {\n            transType = 'INCOME';\n          }\n        }\n\n        const transactionData: any = {\n          book_id: activeBookId,\n          amount: commitment.amount,\n          type: transType,\n          account: commitment.account, // Name is used by addTransaction\n          account_id: commitment.accountId, // Pass ID if available for precision\n          category: commitment.category,\n          category_id: commitment.categoryId,\n          description: `[Compromiso] ${commitment.name}`,\n          date: new Date().toISOString(),\n          notes: 'Generado automáticamente desde Compromisos',\n          commitment_id: id // Link back to commitment\n        };\n\n        await addTransaction(transactionData);\n\n        // If Funding Account exists, create the EXPENSE side (Money leaving Debit)\n        if (commitment.fundingAccountId) {\n          const fundingAcc = accounts.find(a => a.id === commitment.fundingAccountId);\n          if (fundingAcc) {\n            await addTransaction({\n              // book_id handled internally by addTransaction\n              amount: commitment.amount,\n              type: 'EXPENSE',\n              account: fundingAcc.name,\n              account_id: fundingAcc.id,\n              category: commitment.category, // Keep same category? Or \"Transfer\"? Usually same category \"Credit Card Payment\"\n              category_id: commitment.categoryId,\n              description: `[Pago] ${commitment.name}`,\n              date: new Date().toISOString(),\n              notes: `Pago realizado a ${commitment.account}`,\n              icon: 'payments'\n            });\n          }\n        }\n\n        // Generate Next Occurrence for Recurring Commitments\n        if (commitment.frequency && commitment.type !== 'TEMPORAL') {\n          const currentDate = new Date(commitment.nextDueDate);\n          // Ensure valid date\n          if (!isNaN(currentDate.getTime())) {\n            const nextDate = new Date(currentDate);\n\n            // Add time based on frequency (using UTC-safe or local logic? standard JS methods use local)\n            // Just basic iteration:\n            switch (commitment.frequency) {\n              case 'DAILY': nextDate.setDate(nextDate.getDate() + 1); break;\n              case 'WEEKLY': nextDate.setDate(nextDate.getDate() + 7); break;\n              case 'BIWEEKLY': nextDate.setDate(nextDate.getDate() + 14); break;\n              case 'MONTHLY': nextDate.setMonth(nextDate.getMonth() + 1); break;\n              case 'QUARTERLY': nextDate.setMonth(nextDate.getMonth() + 3); break;\n              case 'SEMIANNUAL': nextDate.setMonth(nextDate.getMonth() + 6); break;\n              case 'ANNUAL': nextDate.setFullYear(nextDate.getFullYear() + 1); break;\n            }\n\n            // Check End Date\n            const hasEndDate = commitment.endDate && commitment.endDate.trim() !== '';\n            const isAfterEnd = hasEndDate && new Date(commitment.endDate!) < nextDate;\n\n            if (!isAfterEnd) {\n              // Create the next commitment\n              // We omit 'id' effectively by constructing a new object.\n              // We pass the new calculated date.\n              const nextCommitment = {\n                ...commitment,\n                // Reset status to PENDING for the new one\n                status: 'PENDING' as const,\n                nextDueDate: nextDate.toISOString(),\n                // Keep the rest (name, amount, etc)\n              };\n\n              // Remove IDs from the spread object to avoid TS issues if possible, \n              // but addCommitment accepts Omit<Commitment, 'id'>. \n              // We can cast or just rely on addCommitment implementation ignoring them.\n              // Let's rely on addCommitment implementation which constructs payload explicitly.\n              await addCommitment(nextCommitment);\n            }\n          }\n        }\n      }\n    }\n  }, [activeBookId, commitments, accounts, updateCommitment, addTransaction, addCommitment]);\n\n  const toggleRuleStatus = useCallback((id: string) => {\n    // impl\n  }, []);\n\n  const activateLedger = useCallback((id: string) => {\n    handleChangeActiveBook(id);\n  }, [handleChangeActiveBook]);\n\n  const generateSampleData = useCallback(async () => {\n    if (!activeBookId) return;\n\n    setIsLoading(true);\n\n    // 1. Create Accounts\n    const accountsData = [\n      { book_id: activeBookId, name: 'Chase Sapphire', type: 'CREDIT', balance: -1250.00, last_four: '4242' },\n      { book_id: activeBookId, name: 'Bank of America', type: 'DEBIT', balance: 5430.50, last_four: '8899' },\n      { book_id: activeBookId, name: 'Efectivo', type: 'CASH', balance: 200.00, last_four: 'N/A' },\n      { book_id: activeBookId, name: 'Inversiones', type: 'INVESTMENT', balance: 15000.00, last_four: 'N/A' }\n    ];\n\n    const { data: newAccounts } = await supabase.from('accounts').insert(accountsData).select();\n\n    if (newAccounts) {\n      // 2. Create Transactions (Random dates in last 30 days)\n      const categories = ['Alimentos', 'Transporte', 'Vivienda', 'Entretenimiento', 'Salud', 'Servicios'];\n      const types: TransactionType[] = ['EXPENSE', 'EXPENSE', 'EXPENSE', 'INCOME']; // More expenses usually\n\n      const transactionsData = Array.from({ length: 20 }).map((_, i) => {\n        const type = types[Math.floor(Math.random() * types.length)];\n        const amount = Math.floor(Math.random() * 500) + 10;\n        const account = newAccounts[Math.floor(Math.random() * newAccounts.length)];\n        const category = categories[Math.floor(Math.random() * categories.length)];\n        const date = new Date();\n        date.setDate(date.getDate() - Math.floor(Math.random() * 30));\n\n        return {\n          book_id: activeBookId,\n          account_id: account.id,\n          type: type,\n          amount: type === 'INCOME' ? amount * 5 : amount,\n          description: `Movimiento de prueba ${i + 1}`,\n          category_id: null, // text for now\n          occurred_at: date.toISOString(),\n          // Metadata stored in JSON or simplified for this quick mocked context\n        };\n      });\n\n      await supabase.from('transactions').insert(transactionsData);\n\n      // 3. Create Commitments\n      await supabase.from('commitments').insert([\n        { book_id: activeBookId, title: 'Netflix Premium', amount: 15.99, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PENDING' },\n        { book_id: activeBookId, title: 'Spotify Couple', amount: 12.99, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PAID' },\n        { book_id: activeBookId, title: 'Gym Membership', amount: 45.00, frequency: 'MONTHLY', next_due_date: new Date().toISOString(), status: 'PENDING' },\n      ]);\n    }\n\n    // Refresh all\n    await handleChangeActiveBook(activeBookId);\n    setIsLoading(false);\n  }, [activeBookId, supabase, handleChangeActiveBook]);\n\n  const addBudget = useCallback(async (budgetData: { amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }) => {\n    if (!activeBookId) return;\n\n    const { error } = await supabase.from('budgets').insert({\n      book_id: activeBookId,\n      category_id: budgetData.categoryId,\n      amount: budgetData.amount,\n      recurrence_type: budgetData.recurrenceType || 'MONTHLY',\n      recurrence_interval: budgetData.recurrenceInterval || 1,\n      start_date: budgetData.startDate || new Date().toISOString(),\n      end_date: budgetData.endDate || null,\n      period: 'MONTHLY' // Default for legacy/required DB column if I made it NOT NULL default 'MONTHLY'\n    });\n\n    if (error) {\n      console.error('Error creating budget:', error);\n      alert('Error al crear presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  }, [activeBookId, supabase, fetchBudgets]);\n\n  const deleteBudget = useCallback(async (id: string) => {\n    if (!activeBookId) return;\n\n    const { error } = await supabase.from('budgets').delete().eq('id', id);\n\n    if (error) {\n      console.error('Error deleting budget:', error);\n      alert('Error al eliminar presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  }, [activeBookId, supabase, fetchBudgets]);\n\n  const updateBudget = useCallback(async (id: string, updates: Partial<{ amount: number; categoryId: string; recurrenceType?: string; recurrenceInterval?: number; startDate?: string; endDate?: string }>) => {\n    if (!activeBookId) return;\n\n    const payload: any = {};\n    if (updates.amount !== undefined) payload.amount = updates.amount;\n    if (updates.categoryId !== undefined) payload.category_id = updates.categoryId;\n    if (updates.recurrenceType !== undefined) payload.recurrence_type = updates.recurrenceType;\n    if (updates.recurrenceInterval !== undefined) payload.recurrence_interval = updates.recurrenceInterval;\n    if (updates.startDate !== undefined) payload.start_date = updates.startDate;\n    if (updates.endDate !== undefined) payload.end_date = updates.endDate;\n\n    const { error } = await supabase.from('budgets').update(payload).eq('id', id);\n\n    if (error) {\n      console.error('Error updating budget:', error);\n      alert('Error al actualizar presupuesto: ' + error.message);\n      return;\n    }\n\n    await fetchBudgets(activeBookId);\n  }, [activeBookId, supabase, fetchBudgets]);\n\n  const checkRecurringBudgets = useCallback(async () => {\n    if (!activeBookId || budgets.length === 0) return;\n\n    const today = new Date();\n    const createdBudgets: any[] = [];\n\n    for (const budget of budgets) {\n      if (!budget.recurrence_type || budget.recurrence_type === 'NONE' || !budget.start_date) continue;\n\n      const startDate = new Date(budget.start_date);\n      const endDate = budget.end_date ? new Date(budget.end_date) : null;\n\n      let nextStartDate: Date | null = null;\n      let nextEndDate: Date | null = null;\n\n      if (!endDate) continue;\n\n      if (isBefore(endDate, today)) {\n        nextStartDate = addDays(endDate, 1);\n\n        if (budget.recurrence_type === 'MONTHLY') {\n          nextStartDate = addMonths(startDate, 1);\n          nextEndDate = endOfMonth(nextStartDate);\n        } else if (budget.recurrence_type === 'WEEKLY') {\n          nextStartDate = addWeeks(startDate, 1);\n          nextEndDate = addDays(nextStartDate, 6);\n        } else if (budget.recurrence_type === 'BIWEEKLY') {\n          nextStartDate = addDays(startDate, 14);\n          nextEndDate = addDays(nextStartDate, 13);\n        } else if (budget.recurrence_type === 'ANNUAL') {\n          nextStartDate = addYears(startDate, 1);\n          nextEndDate = new Date(nextStartDate.getFullYear(), 11, 31);\n        } else {\n          continue;\n        }\n\n        const exists = budgets.some(b =>\n          b.category_id === budget.category_id &&\n          isSameDay(new Date(b.start_date), nextStartDate!)\n        );\n\n        if (!exists && nextStartDate) {\n          createdBudgets.push({\n            book_id: activeBookId,\n            category_id: budget.category_id,\n            amount: budget.limit,\n            recurrence_type: budget.recurrence_type,\n            recurrence_interval: budget.recurrence_interval,\n            start_date: nextStartDate.toISOString(),\n            end_date: nextEndDate ? nextEndDate.toISOString() : null,\n            period: 'MONTHLY'\n          });\n        }\n      }\n    }\n\n    if (createdBudgets.length > 0) {\n      console.log(\"Generating recurring budgets:\", createdBudgets.length);\n      const { error } = await supabase.from('budgets').insert(createdBudgets);\n      if (error) {\n        console.error(\"Error generating recurring budgets:\", error);\n      } else {\n        await fetchBudgets(activeBookId);\n      }\n    }\n  }, [activeBookId, budgets, supabase, fetchBudgets]);\n\n  const checkAutoPayCommitments = useCallback(async () => {\n    if (!activeBookId || commitments.length === 0) return;\n\n    const today = new Date();\n    today.setHours(0, 0, 0, 0);\n\n    const pendingAutoPay = commitments.filter(c =>\n      c.isActive &&\n      c.isAutoPay &&\n      c.status === 'PENDING' &&\n      new Date(c.nextDueDate) <= today\n    );\n\n    for (const commitment of pendingAutoPay) {\n      console.log(`Auto-paying commitment: ${commitment.name}`);\n      await toggleCommitmentStatus(commitment.id, 'PENDING');\n    }\n  }, [activeBookId, commitments, toggleCommitmentStatus]);\n\n  useEffect(() => {\n    if (!isLoading && activeBookId && commitments.length > 0) {\n      checkAutoPayCommitments();\n    }\n  }, [isLoading, activeBookId, commitments]);\n\n  // Modal State\n  const [isTransactionModalOpen, setIsTransactionModalOpen] = useState(false);\n\n  const openTransactionModal = () => setIsTransactionModalOpen(true);\n  const closeTransactionModal = () => setIsTransactionModalOpen(false);\n\n  const totalBalance = useMemo(() => accounts.reduce((sum, acc) => sum + acc.balance, 0), [accounts]);\n\n  const fetchUserProfile = useCallback(async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    let { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', user.id)\n      .single();\n\n    if (error && error.code !== 'PGRST116') {\n      console.error(\"Error fetching user profile:\", error);\n    }\n\n    if (error && error.code === 'PGRST116') {\n      // Profile doesn't exist, create it\n      const newProfile = {\n        id: user.id,\n        full_name: 'Paul', // Default as requested\n        email: user.email || '',\n        phone: '',\n        username: '@paul',\n        language: 'es',\n        currency: 'PEN',\n        country: 'Peru',\n        city: 'Lima',\n        notifications_enabled: true,\n        two_factor_enabled: false\n      };\n\n      const { data: createdProfile, error: createError } = await supabase\n        .from('profiles')\n        .insert(newProfile)\n        .select()\n        .single();\n\n      if (createError) {\n        console.error(\"Error creating default profile:\", createError);\n      } else {\n        data = createdProfile;\n      }\n    }\n\n    if (data) {\n      // Prioritize Auth email over DB email to ensure accuracy for display\n      setUserProfile({\n        ...data,\n        email: user.email || data.email || '',\n        email_confirmed_at: user.email_confirmed_at || null\n      });\n    }\n  }, [supabase]);\n\n  const updateUserProfile = useCallback(async (updates: Partial<UserProfile>) => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    // Handle Email Update in Auth (if changed)\n    if (updates.email && updates.email !== user.email) {\n      const { error: authError } = await supabase.auth.updateUser({ email: updates.email });\n\n      if (authError) {\n        console.error(\"Error updating auth email:\", authError);\n        alert(\"Error al actualizar correo de inicio de sesión: \" + authError.message);\n        return; // Stop execution if auth update fails to prevent inconsistency\n      }\n\n      alert(`Se ha solicitado el cambio de correo a ${updates.email}. Por favor revisa tu bandeja de entrada para confirmar el cambio.`);\n    }\n\n    // Update Profile Data in Database\n    const { error } = await supabase\n      .from('profiles')\n      .update(updates)\n      .eq('id', user.id);\n\n    if (error) {\n      console.error(\"Error updating profile:\", error);\n      alert(\"Error al actualizar perfil: \" + error.message);\n    } else {\n      fetchUserProfile();\n    }\n  }, [supabase, fetchUserProfile]);\n\n  const updatePassword = useCallback(async (current: string, newPass: string): Promise<boolean> => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user || !user.email) return false;\n\n    // 1. Re-authenticate\n    const { error: signInError } = await supabase.auth.signInWithPassword({\n      email: user.email,\n      password: current\n    });\n\n    if (signInError) {\n      console.error(\"Re-authentication failed:\", signInError);\n      alert(\"La contraseña actual es incorrecta.\");\n      return false;\n    }\n\n    // 2. Update Password\n    const { error: updateError } = await supabase.auth.updateUser({ password: newPass });\n\n    if (updateError) {\n      console.error(\"Error updating password:\", updateError);\n      alert(\"Error al actualizar contraseña: \" + updateError.message);\n      return false;\n    }\n\n    return true;\n  }, [supabase]);\n\n  const resetPasswordForEmail = useCallback(async (email: string): Promise<boolean> => {\n    const { error } = await supabase.auth.resetPasswordForEmail(email);\n    if (error) {\n      console.error(\"Error sending reset email:\", error);\n      alert(\"Error al enviar el correo: \" + error.message);\n      return false;\n    }\n    return true;\n  }, [supabase]);\n\n  const deleteUserAccount = useCallback(async () => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return;\n\n    try {\n      setIsLoading(true);\n\n      // 1. Delete dependent data (reverse order of creation/dependency)\n      // Transactions\n      await supabase.from('transactions').delete().eq('user_id', user.id);\n\n      // Commitments\n      await supabase.from('commitments').delete().eq('user_id', user.id);\n\n      // Budgets\n      await supabase.from('budgets').delete().eq('user_id', user.id);\n\n      // Accounts\n      await supabase.from('accounts').delete().eq('user_id', user.id);\n\n      // Ledgers/Books (and member relations if any)\n      await supabase.from('books').delete().eq('owner', user.id); // Assuming owner field or RLS handles it\n\n      // Profile\n      const { error: profileError } = await supabase.from('profiles').delete().eq('id', user.id);\n      if (profileError) {\n        throw profileError;\n      }\n\n      // 2. Sign out\n      await supabase.auth.signOut();\n\n      // 3. Optional: Redirect is usually handled by auth state change listener in layout\n      // window.location.href = '/login'; \n\n    } catch (error: any) {\n      console.error(\"Error deleting account:\", error);\n      alert(\"Error al eliminar la cuenta: \" + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [supabase, setIsLoading]);\n\n  const uploadAvatar = useCallback(async (file: File): Promise<string | null> => {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) return null;\n\n    const fileExt = file.name.split('.').pop();\n    const fileName = `${user.id}-${Math.random()}.${fileExt}`;\n    const filePath = `${user.id}/${fileName}`;\n\n    const { error: uploadError } = await supabase.storage\n      .from('avatars')\n      .upload(filePath, file);\n\n    if (uploadError) {\n      console.error('Error uploading avatar:', uploadError);\n      return null;\n    }\n\n    const { data: { publicUrl } } = supabase.storage\n      .from('avatars')\n      .getPublicUrl(filePath);\n\n    return publicUrl;\n  }, [supabase]);\n\n  useEffect(() => {\n    // Fetch profile on mount if authorized\n    fetchUserProfile();\n  }, []);\n\n\n\n  const contextValue = useMemo(() => ({\n    transactions,\n    accounts,\n    categories,\n    categoryFolders,\n    budgets,\n    commitments,\n    recurringRules,\n    ledgers,\n    userProfile,\n    fetchUserProfile,\n    updateUserProfile,\n    uploadAvatar,\n    addTransaction,\n    deleteTransaction,\n    addAccount,\n    updateAccount,\n    deleteAccount,\n    addCommitment,\n    updateCommitment,\n    deleteCommitment,\n    toggleCommitmentStatus,\n    updateTransaction,\n    duplicateTransaction,\n    toggleRuleStatus,\n    activateLedger,\n    generateSampleData,\n    totalBalance,\n    isDarkMode,\n    toggleTheme,\n    isLoading,\n    activeBookId,\n    refreshBooks,\n    formatAmount,\n    isTransactionModalOpen,\n    openTransactionModal,\n    closeTransactionModal,\n    addBudget,\n    updateBudget,\n    deleteBudget,\n    checkRecurringBudgets,\n    deleteCategory: async (id: string) => {\n      if (!activeBookId) return;\n      const { error } = await supabase.from('categories').delete().eq('id', id);\n      if (error) {\n        console.error(\"Error deleting category:\", error);\n        alert(\"Error al eliminar categoría: \" + error.message);\n      } else {\n        await fetchCategories(activeBookId);\n      }\n    },\n    deleteCategoryFolder: async (id: string) => {\n      if (!activeBookId) return;\n      const { error } = await supabase.from('category_folders').delete().eq('id', id);\n      if (error) {\n        console.error(\"Error deleting folder:\", error);\n        alert(\"Error al eliminar carpeta: \" + error.message);\n      } else {\n        await fetchCategoryFolders(activeBookId);\n        await fetchCategories(activeBookId);\n      }\n    },\n    notifications,\n    unreadCount,\n    markNotificationAsRead,\n    markAllNotificationsAsRead,\n    updatePassword,\n    resetPasswordForEmail,\n    deleteUserAccount\n  }), [\n    transactions,\n    accounts,\n    categories,\n    categoryFolders,\n    budgets,\n    commitments,\n    recurringRules,\n    ledgers,\n    userProfile,\n    fetchUserProfile,\n    updateUserProfile,\n    uploadAvatar,\n    addTransaction,\n    deleteTransaction,\n    addAccount,\n    updateAccount,\n    deleteAccount,\n    addCommitment,\n    updateCommitment,\n    deleteCommitment,\n    toggleCommitmentStatus,\n    updateTransaction,\n    duplicateTransaction,\n    toggleRuleStatus,\n    activateLedger,\n    generateSampleData,\n    totalBalance,\n    isDarkMode,\n    toggleTheme,\n    isLoading,\n    activeBookId,\n    refreshBooks,\n    formatAmount,\n    isTransactionModalOpen,\n    addBudget,\n    updateBudget,\n    deleteBudget,\n    checkRecurringBudgets,\n    notifications,\n    unreadCount,\n    markNotificationAsRead,\n    markAllNotificationsAsRead,\n    supabase\n  ]);\n\n  return (\n    <FinanceContext.Provider value={contextValue}>\n      {children}\n    </FinanceContext.Provider>\n  );\n};\n\nexport const useFinance = () => {\n  const context = useContext(FinanceContext);\n  if (!context) throw new Error('useFinance must be used within a FinanceProvider');\n  return context;\n};\n"],"names":[],"mappings":";;;;;;AAsH+C;;AAnH/C;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AANA;;;;;AAoEA,MAAM,+BAAiB,IAAA,8KAAa,EAAiC;AAE9D,MAAM,kBAAqD,CAAC,EAAE,QAAQ,EAAE;;IAC7E,MAAM,WAAW,IAAA,8IAAY;IAC7B,MAAM,SAAS,IAAA,kJAAS;IAExB,QAAQ;IACR,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB;IAChE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAgB,EAAE;IAClE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAa,EAAE;IAC3D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAe,EAAE;IAC/D,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAkB,EAAE,GAAG,uCAAuC;IAClH,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAW,EAAE,GAAG,wBAAwB;IAC9E,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAqB;IACnE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAiB,EAAE;IAGrE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,cAAc;IACd,MAAM,cAAc,IAAA,4KAAW;oDAAC;YAC9B;4DAAc,CAAA;oBACZ,MAAM,UAAU,CAAC;oBACjB,wCAAmC;wBACjC,MAAM,OAAO,OAAO,QAAQ,CAAC,eAAe;wBAC5C,IAAI,SAAS,KAAK,SAAS,CAAC,GAAG,CAAC;6BAC3B,KAAK,SAAS,CAAC,MAAM,CAAC;oBAC7B;oBACA,OAAO;gBACT;;QACF;mDAAG,EAAE;IAEL,MAAM,aAAa,IAAA,4KAAW;mDAAC;YAC7B,aAAa;YACb,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YAEtD,IAAI,CAAC,MAAM;gBACT,aAAa;gBACb;YACF;YAEA,MAAM,EAAE,MAAM,KAAK,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC;YAEnE,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,yBAAyB;gBACvC,QAAQ,KAAK,CAAC,yBAAyB,CAAC;gBACxC,QAAQ,KAAK,CAAC,yBAAyB,CAAC;YAC1C;YAEA,IAAI,SAAS,MAAM,MAAM,GAAG,GAAG;gBAC7B,MAAM,gBAA0B,MAAM,GAAG;6EAAC,CAAA,IAAK,CAAC;4BAC9C,IAAI,EAAE,EAAE;4BACR,MAAM,EAAE,IAAI;4BACZ,aAAa,EAAE,iBAAiB,IAAI;4BACpC,SAAS;4BACT,UAAU;4BACV,YAAY;4BACZ,YAAY,EAAE,UAAU;4BACxB,MAAM,EAAE,IAAI,IAAI;4BAChB,OAAO,EAAE,KAAK,IAAI;4BAClB,MAAM;4BACN,SAAS,EAAE;4BACX,UAAU,EAAE,QAAQ;wBACtB,CAAC;;gBAED,WAAW;YAEX,uDAAuD;YACvD,iEAAiE;YACnE,OAAO;gBACL,MAAM,kBAAkB,KAAK,EAAE;YACjC;YACA,aAAa;QACf;kDAAG;QAAC;KAAS;IAEb,oCAAoC;IACpC,MAAM,6BAA6B,IAAA,4KAAW;mEAAC;YAC7C,IAAI,SAAS,MAAM,KAAK,KAAK,aAAa,MAAM,KAAK,KAAK,WAAW;YAErE,KAAK,MAAM,WAAW,SAAU;gBAC9B,IAAI,QAAQ,IAAI,KAAK,YAAY,CAAC,QAAQ,SAAS,IAAI,CAAC,QAAQ,MAAM,EAAE;gBAExE,MAAM,QAAQ,IAAI;gBAClB,0CAA0C;gBAC1C,IAAI,cAAc,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,IAAI,QAAQ,SAAS;gBAEnF,4FAA4F;gBAC5F,IAAI,MAAM,OAAO,MAAM,QAAQ,SAAS,EAAE;oBACxC,cAAc,IAAA,wJAAS,EAAC,aAAa;gBACvC;gBAEA,+BAA+B;gBAC/B,MAAM,cAAc,IAAA,kKAAM,EAAC,aAAa;gBACxC,MAAM,iBAAiB,CAAC,aAAa,EAAE,QAAQ,IAAI,CAAC,GAAG,EAAE,aAAa;gBAEtE,2CAA2C;gBAC3C,IAAI,oBAAoB,WAAW,IAAI;+EAAC,CAAA,IAAK;4BAAC;4BAAS;4BAAW;4BAAY;4BAAU;4BAAW;4BAAW;yBAAW,CAAC,IAAI;uFAAC,CAAA,MAAO,EAAE,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;;+EAAQ;gBAC5K,IAAI,CAAC,mBAAmB,oBAAoB,WAAW,IAAI;+EAAC,CAAA,IAAK,EAAE,IAAI,KAAK;+EAAY;gBACxF,IAAI,CAAC,qBAAqB,WAAW,MAAM,GAAG,GAAG;oBAC/C,oBAAoB,UAAU,CAAC,EAAE,CAAC,EAAE;gBACtC;gBAEA,wDAAwD;gBACxD,MAAM,iBAAiB,SAAS,IAAI;+EAAC,CAAA,IAAK,EAAE,IAAI,KAAK,WAAW,EAAE,OAAO,GAAG;iFAAM,SAAS,IAAI;+EAAC,CAAA,IAAK,EAAE,IAAI,KAAK;;gBAEhH,oBAAoB;gBACpB,MAAM,UAAU,YAAY,MAAM;uFAAC,CAAA,IAAK,EAAE,IAAI,KAAK,kBAAkB,EAAE,SAAS,KAAK,QAAQ,EAAE;;gBAC/F,IAAI,QAAQ,MAAM,GAAG,GAAG;oBACtB,qFAAqF;oBACrF,MAAM,QAAQ,QAAQ,IAAI;mFAAC,CAAA,IAAK,EAAE,gBAAgB,KAAK,YAAY,EAAE,gBAAgB;qFAChF,QAAQ,IAAI;mFAAC,CAAA,IAAK,EAAE,gBAAgB,KAAK;qFACzC,OAAO,CAAC,EAAE;oBAEf,MAAM,SAAS,QAAQ,MAAM;0FAAC,CAAA,IAAK,EAAE,EAAE,KAAK,MAAM,EAAE;;oBACpD,KAAK,MAAM,SAAS,OAAQ;wBAC1B,QAAQ,GAAG,CAAC,CAAC,+BAA+B,EAAE,MAAM,EAAE,EAAE;wBACxD,MAAM,iBAAiB,MAAM,EAAE;oBACjC;gBACA,6DAA6D;gBAC/D;gBAEA,0EAA0E;gBAC1E,MAAM,qBAAqB,YAAY,IAAI;kGAAC,CAAA,IAAK,EAAE,IAAI,KAAK,kBAAkB,EAAE,SAAS,KAAK,QAAQ,EAAE;;gBAExG,IAAI,oBAAoB;oBACtB,yEAAyE;oBACzE,IAAI,mBAAmB,gBAAgB,KAAK,YAAY,CAAC,mBAAmB,UAAU,IAAI,CAAC,mBAAmB,gBAAgB,EAAE;wBAC9H,QAAQ,GAAG,CAAC,CAAC,4BAA4B,EAAE,mBAAmB,IAAI,EAAE;wBACpE,MAAM,iBAAiB,mBAAmB,EAAE,EAAE;4BAC5C,kBAAkB;4BAClB,YAAY;4BACZ,kBAAkB,gBAAgB;wBACpC;oBACF;oBACA;gBACF;gBAEA,2BAA2B;gBAC3B,0CAA0C;gBAC1C,MAAM,aAAa,IAAA,wJAAS,EAAC,aAAa;gBAC1C,MAAM,eAAe,IAAA,0JAAU,EAAC,IAAA,oJAAO,EAAC,YAAY;gBACpD,MAAM,aAAa,IAAA,sJAAQ,EAAC;gBAE5B,MAAM,gBAAgB,aAAa,MAAM;6FAAC,CAAC,KAAK;wBAC9C,IAAI,CAAC,EAAE,OAAO,KAAK,QAAQ,IAAI,IAAI,EAAE,UAAU,KAAK,QAAQ,EAAE,KAC5D,EAAE,IAAI,KAAK,WAAW;4BACtB,MAAM,QAAQ,IAAI,KAAK,EAAE,IAAI;4BAC7B,IAAI,SAAS,gBAAgB,SAAS,YAAY;gCAChD,OAAO,MAAM,EAAE,MAAM;4BACvB;wBACF;wBACA,OAAO;oBACT;4FAAG;gBAEH,IAAI,iBAAiB,GAAG;gBAExB,uCAAuC;gBACvC,IAAI,UAAU,IAAI,KAAK,YAAY,WAAW,IAAI,YAAY,QAAQ,IAAI,QAAQ,MAAM;gBACxF,8FAA8F;gBAC9F,6DAA6D;gBAC7D,IAAI,QAAQ,MAAM,IAAI,QAAQ,SAAS,EAAE;oBACvC,UAAU,IAAA,wJAAS,EAAC,SAAS;gBAC/B,OAAO;gBACL,2CAA2C;gBAC3C,wCAAwC;gBAC1C;gBAEA,MAAM,YAAY,IAAA,oJAAO,EAAC,SAAS;gBAEnC,gDAAgD;gBAChD,MAAM,cAAc;oBAClB,MAAM;oBACN,QAAQ;oBACR,WAAW;oBACX,MAAM;oBACN,aAAa,UAAU,WAAW;oBAClC,QAAQ;oBACR,UAAU;oBACV,WAAW,QAAQ,EAAE;oBACrB,YAAY;oBACZ,kBAAkB;oBAClB,kBAAkB,gBAAgB;oBAClC,SAAS,QAAQ,IAAI;gBACvB;gBAEA,QAAQ,GAAG,CAAC,CAAC,yBAAyB,EAAE,QAAQ,IAAI,CAAC,EAAE,EAAE,cAAc,KAAK,EAAE,UAAU,WAAW,IAAI;YACzG;QACF;kEAAG;QAAC;QAAU;QAAc;QAAW;QAAY;KAAY,GAAG,uBAAuB;IAEzF,2BAA2B;IAC3B,MAAM,yBAAyB,IAAA,4KAAW;+DAAC,OAAO,SAAkB;YAClE,MAAM,iBAAiB,CAAC,aAAa,EAAE,QAAQ,IAAI,CAAC,GAAG,EAAE,aAAa;YACtE,gCAAgC;YAChC,MAAM,UAAU,YAAY,MAAM;+EAAC,CAAA,IAAK,EAAE,IAAI,KAAK,kBAAkB,EAAE,SAAS,KAAK,QAAQ,EAAE;;YAE/F,IAAI,QAAQ,MAAM,GAAG,GAAG;gBACtB,QAAQ,IAAI,CAAC,CAAC,MAAM,EAAE,QAAQ,MAAM,CAAC,gBAAgB,EAAE,eAAe,oDAAoD,CAAC;gBAC3H,8EAA8E;gBAC9E,wEAAwE;gBACxE,sGAAsG;gBACtG,MAAM,OAAO,QAAQ,IAAI;2EAAC,CAAA,IAAK,EAAE,gBAAgB;6EAAK,OAAO,CAAC,EAAE;gBAChE,MAAM,WAAW,QAAQ,MAAM;oFAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK,EAAE;;gBAErD,KAAK,MAAM,KAAK,SAAU;oBACxB,MAAM,iBAAiB,EAAE,EAAE;gBAC7B;YACF;QACF;8DAAG;QAAC;KAAY;IAEhB,IAAA,0KAAS;qCAAC;YACR,yEAAyE;YACzE,uEAAuE;YACvE,2DAA2D;YAC3D,4FAA4F;YAC5F,mFAAmF;YACnF,kEAAkE;YAClE,IAAI,CAAC,aAAa,SAAS,MAAM,GAAG,KAAK,aAAa,MAAM,GAAG,GAAG;gBAChE;gBACA;YACF;QACF;oCAAG;QAAC;QAAW;QAAU,aAAa,MAAM;QAAE,YAAY,MAAM;QAAE,QAAQ,MAAM;KAAC,GAAG,qBAAqB;IAEzG,qBAAqB;IACrB,MAAM,wBAAwB,IAAA,4KAAW;8DAAC;YACxC,MAAM,mBAAmC,EAAE;YAC3C,MAAM,QAAQ,IAAI;YAElB,mCAAmC;YACnC,YAAY,OAAO;sEAAC,CAAA;oBAClB,IAAI,EAAE,MAAM,KAAK,aAAa,EAAE,QAAQ,EAAE;wBACxC,MAAM,UAAU,IAAA,sJAAQ,EAAC,EAAE,WAAW;wBACtC,IAAI,IAAA,sJAAQ,EAAC,SAAS,IAAA,oJAAO,EAAC,OAAO,OAAO,IAAA,oJAAO,EAAC,SAAS,IAAA,oJAAO,EAAC,OAAO,KAAK;4BAC/E,iBAAiB,IAAI,CAAC;gCACpB,IAAI,CAAC,KAAK,EAAE,EAAE,EAAE,EAAE;gCAClB,OAAO;gCACP,SAAS,CAAC,eAAe,EAAE,EAAE,IAAI,CAAC,WAAW,EAAE,IAAA,kKAAM,EAAC,SAAS,UAAU,CAAC,CAAC;gCAC3E,MAAM,IAAA,kKAAM,EAAC,OAAO;gCACpB,MAAM;gCACN,MAAM;4BACR;wBACF;oBACF;gBACF;;YAEA,6CAA6C;YAC7C,sFAAsF;YACtF,MAAM,aAAa,IAAA,8JAAY,EAAC;YAChC,MAAM,WAAW,IAAA,0JAAU,EAAC;YAE5B,QAAQ,OAAO;sEAAC,CAAA;oBACd,MAAM,aAAa,EAAE,WAAW;oBAChC,IAAI,CAAC,YAAY,QAAQ,gBAAgB;oBAEzC,8DAA8D;oBAC9D,MAAM,QAAQ,aACX,MAAM;oFAAC,CAAA,IACN,EAAE,IAAI,KAAK,aACX,EAAE,WAAW,KAAK,cAClB,IAAA,sKAAgB,EAAC,IAAI,KAAK,EAAE,IAAI,GAAG;gCAAE,OAAO;gCAAY,KAAK;4BAAS;mFAEvE,MAAM;oFAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;mFAAE;oBAEtC,MAAM,QAAQ,EAAE,KAAK,GAAG,IAAI,QAAQ,EAAE,KAAK,GAAG;oBAE9C,IAAI,SAAS,GAAG;wBACd,iBAAiB,IAAI,CAAC;4BACpB,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,EAAE;4BACrB,OAAO;4BACP,SAAS,CAAC,+BAA+B,EAAE,EAAE,QAAQ,IAAI,YAAY,CAAC,CAAC;4BACvE,MAAM;4BACN,MAAM;4BACN,MAAM;wBACR;oBACF,OAAO,IAAI,SAAS,KAAK;wBACvB,iBAAiB,IAAI,CAAC;4BACpB,IAAI,CAAC,SAAS,EAAE,EAAE,EAAE,EAAE;4BACtB,OAAO;4BACP,SAAS,CAAC,SAAS,EAAE,CAAC,QAAQ,GAAG,EAAE,OAAO,CAAC,GAAG,uBAAuB,EAAE,EAAE,QAAQ,IAAI,YAAY,CAAC,CAAC;4BACnG,MAAM;4BACN,MAAM;4BACN,MAAM;wBACR;oBACF;gBACF;;YAEA,mCAAmC;YACnC,SAAS,MAAM;sEAAC,CAAA,IAAK,EAAE,IAAI,KAAK;qEAAU,OAAO;sEAAC,CAAA;oBAChD,IAAI,IAAI,MAAM,EAAE;wBACd,iEAAiE;wBACjE,IAAI,UAAU,IAAI,KAAK,MAAM,WAAW,IAAI,MAAM,QAAQ,IAAI,IAAI,MAAM;wBACxE,IAAI,IAAA,sJAAQ,EAAC,SAAS,QAAQ;4BAC5B,UAAU,IAAA,wJAAS,EAAC,SAAS;wBAC/B;wBAEA,IAAI,IAAA,sKAAgB,EAAC,SAAS;4BAAE,OAAO;4BAAO,KAAK,IAAA,oJAAO,EAAC,OAAO;wBAAG,IAAI;4BACvE,iBAAiB,IAAI,CAAC;gCACpB,IAAI,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;gCAClB,OAAO;gCACP,SAAS,CAAC,oBAAoB,EAAE,IAAI,IAAI,CAAC,OAAO,EAAE,IAAA,kKAAM,EAAC,SAAS,UAAU,CAAC,CAAC;gCAC9E,MAAM;gCACN,MAAM;gCACN,MAAM;4BACR;wBACF;oBACF;gBACF;;YAEA,kDAAkD;YAClD,qEAAqE;YACrE,0DAA0D;YAC1D,8DAA8D;YAC9D,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,yBAAyB;YAEzE,MAAM,qBAAqB,iBAAiB,GAAG;yFAAC,CAAA,IAAK,CAAC;wBACpD,GAAG,CAAC;wBACJ,MAAM,QAAQ,QAAQ,CAAC,EAAE,EAAE;oBAC7B,CAAC;;YAED,QAAQ;YACR,iBAAiB;QACnB;6DAAG;QAAC;QAAa;QAAS;QAAc;KAAS;IAEjD,MAAM,yBAAyB,IAAA,4KAAW;+DAAC,CAAC;YAC1C;uEAAiB,CAAA,OAAQ,KAAK,GAAG;+EAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;gCAAE,GAAG,CAAC;gCAAE,MAAM;4BAAK,IAAI;;;YAC5E,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,yBAAyB;YACzE,IAAI,CAAC,QAAQ,QAAQ,CAAC,KAAK;gBACzB,QAAQ,IAAI,CAAC;gBACb,aAAa,OAAO,CAAC,sBAAsB,KAAK,SAAS,CAAC;YAC5D;QACF;8DAAG,EAAE;IAEL,MAAM,6BAA6B,IAAA,4KAAW;mEAAC;YAC7C;2EAAiB,CAAA,OAAQ,KAAK,GAAG;mFAAC,CAAA,IAAK,CAAC;gCAAE,GAAG,CAAC;gCAAE,MAAM;4BAAK,CAAC;;;YAC5D,MAAM,SAAS,cAAc,GAAG;kFAAC,CAAA,IAAK,EAAE,EAAE;;YAC1C,MAAM,UAAU,KAAK,KAAK,CAAC,aAAa,OAAO,CAAC,yBAAyB;YACzE,MAAM,aAAa,MAAM,IAAI,CAAC,IAAI,IAAI;mBAAI;mBAAY;aAAO;YAC7D,aAAa,OAAO,CAAC,sBAAsB,KAAK,SAAS,CAAC;QAC5D;kEAAG;QAAC;KAAc;IAElB,MAAM,cAAc,cAAc,MAAM,CAAC,CAAA,IAAK,CAAC,EAAE,IAAI,EAAE,MAAM;IAG7D,eAAe;IACf,IAAA,0KAAS;qCAAC;YACR,aAAa,IAAI;6CAAC,CAAC;gBACjB,kFAAkF;gBAClF,oDAAoD;gBACpD,+DAA+D;gBACjE;;QACF;oCAAG,EAAE;IAEL,yEAAyE;IACzE,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,aAAa,QAAQ,MAAM,GAAG,KAAK,CAAC,cAAc;gBACrD,mCAAmC;gBACnC,MAAM,cAAc,aAAa,OAAO,CAAC;gBACzC,MAAM,aAAa,QAAQ,IAAI;4DAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;gBAE9C,IAAI,YAAY;oBACd,uBAAuB,WAAW,EAAE;gBACtC,OAAO;oBACL,oEAAoE;oBACpE,uBAAuB,OAAO,CAAC,EAAE,CAAC,EAAE;gBACtC;YACF;QACF;oCAAG;QAAC;QAAW;QAAS;KAAa;IAErC,iDAAiD;IACjD,MAAM,eAAe,IAAA,4KAAW;qDAAC,CAAC;YAChC,MAAM,eAAe,QAAQ,IAAI;0EAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;YAChD,MAAM,WAAW,cAAc,YAAY;YAE3C,IAAI,SAAS;YACb,IAAI,aAAa,OAAO,SAAS;YACjC,IAAI,aAAa,OAAO,SAAS;YACjC,IAAI,aAAa,OAAO,OAAO,CAAC,GAAG,EAAE,OAAO,cAAc,CAAC,SAAS;gBAAE,uBAAuB;YAAE,IAAI;YACnG,IAAI,aAAa,OAAO,SAAS;YAEjC,OAAO,IAAI,KAAK,YAAY,CAAC,QAAQ;gBACnC,OAAO;gBACP,UAAU;gBACV,uBAAuB;YACzB,GAAG,MAAM,CAAC;QACZ;oDAAG;QAAC;QAAS;KAAa;IAE1B,MAAM,kBAAkB,IAAA,4KAAW;wDAAC,OAAO;YACzC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,cAAc,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;YAC7E,IAAI,MAAM;gBACR,MAAM,SAAS,KAAK,GAAG;2EAAC,CAAC,MAAa,CAAC;4BACrC,IAAI,IAAI,EAAE;4BACV,MAAM,IAAI,IAAI;4BACd,OAAO,IAAI,KAAK,IAAI;4BACpB,MAAM,IAAI,IAAI,IAAI;4BAClB,WAAW,IAAI,SAAS,IAAI;wBAC9B,CAAC;;gBACD,cAAc;gBACd,aAAa,OAAO,CAAC,CAAC,qBAAqB,EAAE,QAAQ,EAAE,KAAK,SAAS,CAAC;YACxE;QACF;uDAAG;QAAC;KAAS;IAEb,MAAM,uBAAuB,IAAA,4KAAW;6DAAC,OAAO;YAC9C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,oBAAoB,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;YACnF,IAAI,MAAM;gBACR,MAAM,SAAS,KAAK,GAAG;gFAAC,CAAC,SAAgB,CAAC;4BACxC,IAAI,OAAO,EAAE;4BACb,MAAM,OAAO,IAAI;4BACjB,OAAO,OAAO,KAAK,IAAI;4BACvB,MAAM,OAAO,IAAI,IAAI;wBACvB,CAAC;;gBACD,mBAAmB;gBACnB,aAAa,OAAO,CAAC,CAAC,kBAAkB,EAAE,QAAQ,EAAE,KAAK,SAAS,CAAC;YACrE;QACF;4DAAG;QAAC;KAAS;IAEb,MAAM,gBAAgB,IAAA,4KAAW;sDAAC,OAAO;YACvC,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,WAAW;YAC3E,IAAI,MAAM;gBACR,MAAM,SAAS,KAAK,GAAG;yEAAC,CAAA,IAAK,CAAC;4BAC5B,GAAG,CAAC;4BACJ,oEAAoE;4BACpE,MAAM,EAAE,IAAI;4BACZ,aAAa,EAAE,YAAY;4BAC3B,iBAAiB,EAAE,gBAAgB;4BACnC,WAAW,EAAE,UAAU;4BACvB,QAAQ,EAAE,OAAO;4BACjB,UAAU,EAAE,SAAS;4BACrB,SAAS,EAAE,QAAQ;4BACnB,WAAW,EAAE,UAAU;4BACvB,gBAAgB,EAAE,eAAe;4BACjC,YAAY,EAAE,WAAW;wBAE3B,CAAC;;gBACD,YAAY;gBACZ,aAAa,OAAO,CAAC,CAAC,mBAAmB,EAAE,QAAQ,EAAE,KAAK,SAAS,CAAC;YACtE;QACF;qDAAG;QAAC;KAAS;IAEb,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO;YAC3C,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,SACpB,IAAI,CAAC,gBACL,MAAM,CAAC,CAAC;;;;MAIT,CAAC,EACA,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,eAAe;gBAAE,WAAW;YAAM;YAE3C,IAAI,MAAM;gBACR,MAAM,SAAS,KAAK,GAAG;6EAAC,CAAC,IAAW,CAAC;4BACnC,IAAI,EAAE,EAAE;4BACR,QAAQ,EAAE,MAAM;4BAChB,MAAM,EAAE,IAAI;4BACZ,UAAU,EAAE,UAAU,EAAE,QAAQ;4BAChC,aAAa,EAAE,WAAW;4BAC1B,SAAS,EAAE,QAAQ,EAAE,QAAQ;4BAC7B,YAAY,EAAE,UAAU;4BACxB,aAAa,EAAE,WAAW,IAAI;4BAC9B,MAAM,EAAE,WAAW;4BACnB,MAAM,EAAE,UAAU,EAAE,QAAQ;4BAC5B,QAAQ,EAAE,MAAM;4BAChB,UAAU,EAAE,aAAa;4BACzB,OAAO,EAAE,KAAK;4BACd,aAAa,EAAE,WAAW;4BAC1B,YAAY,EAAE,UAAU;4BACxB,YAAY,EAAE,UAAU;wBAC1B,CAAC;;gBACD,gBAAgB;gBAChB,aAAa,OAAO,CAAC,CAAC,uBAAuB,EAAE,QAAQ,EAAE,KAAK,SAAS,CAAC;YAC1E;QACF;yDAAG;QAAC;KAAS;IAEb,MAAM,mBAAmB,IAAA,4KAAW;yDAAC,OAAO;YAC1C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;MAIT,CAAC,EACA,EAAE,CAAC,WAAW;YAEjB,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,+BAA+B;YAC/C;YAEA,IAAI,MAAM;gBACR,eAAe,KAAK,GAAG;qEAAC,CAAC,IAAW,CAAC;4BACnC,IAAI,EAAE,EAAE;4BACR,MAAM,EAAE,KAAK;4BACb,QAAQ,EAAE,MAAM;4BAChB,WAAW,EAAE,SAAS;4BACtB,aAAa,EAAE,aAAa;4BAC5B,QAAQ,EAAE,MAAM;4BAChB,MAAM,EAAE,IAAI,IAAW;4BACvB,UAAU,EAAE,SAAS,IAAI;4BACzB,SAAS,EAAE,QAAQ;4BACnB,UAAU,EAAE,UAAU,EAAE,QAAQ;4BAChC,SAAS,EAAE,QAAQ,EAAE,QAAQ;4BAC7B,YAAY,EAAE,WAAW;4BACzB,WAAW,EAAE,UAAU;4BACvB,YAAY,EAAE,UAAU;4BACxB,kBAAkB,EAAE,gBAAgB;4BACpC,WAAW,EAAE,WAAW;4BACxB,kBAAkB,EAAE,kBAAkB;wBACxC,CAAC;;YACH;QACF;wDAAG;QAAC;KAAS;IAEb,MAAM,eAAe,IAAA,4KAAW;qDAAC,OAAO;YACtC,yDAAyD;YACzD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,WACL,MAAM,CAAC,KACP,EAAE,CAAC,WAAW;YAEjB,IAAI,OAAO;gBACT,QAAQ,IAAI,CAAC,yBAAyB,MAAM,OAAO;gBACnD;YACF;YACA,IAAI,MAAM;gBACR,MAAM,SAAS,KAAK,GAAG;wEAAC,CAAC,IAAW,CAAC;4BACnC,IAAI,EAAE,EAAE;4BACR,UAAU;4BACV,aAAa,EAAE,WAAW;4BAC1B,OAAO,OAAO,EAAE,MAAM,IAAI;4BAC1B,OAAO;4BACP,QAAQ;4BACR,UAAU;4BACV,YAAY,EAAE,UAAU;4BACxB,UAAU,EAAE,QAAQ;4BACpB,iBAAiB,EAAE,eAAe;4BAClC,qBAAqB,EAAE,mBAAmB;4BAC1C,YAAY,EAAE,UAAU;wBAC1B,CAAC;;gBACD,WAAW;gBACX,aAAa,OAAO,CAAC,CAAC,kBAAkB,EAAE,QAAQ,EAAE,KAAK,SAAS,CAAC;YACrE;QACF;oDAAG;QAAC;KAAS;IAEb,MAAM,sBAAsB,IAAA,4KAAW;4DAAC,OAAO;YAC7C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,mBACL,MAAM,CAAC,CAAC;;;;MAIT,CAAC,EACA,EAAE,CAAC,WAAW;YAEjB,IAAI,OAAO;gBACT,QAAQ,IAAI,CAAC,4CAA4C,MAAM,OAAO;gBACtE;YACF;YACA,IAAI,MAAM;gBACR,kBAAkB,KAAK,GAAG;wEAAC,CAAC,IAAW,CAAC;4BACtC,IAAI,EAAE,EAAE;4BACR,MAAM,EAAE,IAAI;4BACZ,UAAU,EAAE,UAAU,EAAE,QAAQ;4BAChC,SAAS,EAAE,QAAQ,EAAE,QAAQ;4BAC7B,QAAQ,OAAO,EAAE,MAAM,IAAI;4BAC3B,MAAM,AAAC,EAAE,IAAI,IAAwB;4BACrC,WAAW,EAAE,SAAS,IAAI;4BAC1B,UAAU,EAAE,WAAW,IAAI;4BAC3B,QAAQ,EAAE,SAAS,IAAI;4BACvB,MAAM,EAAE,UAAU,EAAE,QAAQ;wBAC9B,CAAC;;YACH;QACF;2DAAG;QAAC;KAAS;IAEb,MAAM,eAAe,IAAA,4KAAW;qDAAC;YAC/B,MAAM;YACN,IAAI,cAAc;gBAChB,MAAM,QAAQ,GAAG,CAAC;oBAChB,cAAc;oBACd,gBAAgB;oBAChB,qBAAqB;oBACrB,kBAAkB;oBAClB,iBAAiB;oBACjB,aAAa;oBACb,oBAAoB;iBACrB;YACH;QACF;oDAAG;QAAC;QAAc;KAAW;IAE7B,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO;YAC3C,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,CAAC;gBAC1D,MAAM;gBACN,SAAS;YACX,GAAG,MAAM,GAAG,MAAM;YAElB,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,gCAAgC;YAChD;YAEA,IAAI,MAAM;gBACR,MAAM,YAAoB;oBACxB,IAAI,KAAK,EAAE;oBACX,MAAM,KAAK,IAAI;oBACf,aAAa;oBACb,SAAS;oBACT,UAAU;oBACV,YAAY;oBACZ,YAAY,IAAI,OAAO,WAAW;oBAClC,MAAM;oBACN,OAAO;oBACP,MAAM;oBACN,SAAS,EAAE;gBACb;gBACA,WAAW;oBAAC;iBAAU;gBACtB,uBAAuB,KAAK,EAAE;YAChC;QACF;yDAAG;QAAC;KAAS;IAEb,MAAM,yBAAyB,IAAA,4KAAW;+DAAC,OAAO;YAChD,gBAAgB;YAChB,aAAa,OAAO,CAAC,0BAA0B,SAAS,oBAAoB;YAC5E;uEAAW,CAAA,OAAQ,KAAK,GAAG;+EAAC,CAAA,IAAK,CAAC;gCAAE,GAAG,CAAC;gCAAE,UAAU,EAAE,EAAE,KAAK;4BAAO,CAAC;;;YAErE,0BAA0B;YAC1B,IAAI;gBACF,MAAM,YAAY,aAAa,OAAO,CAAC,CAAC,mBAAmB,EAAE,QAAQ;gBACrE,IAAI,WAAW,YAAY,KAAK,KAAK,CAAC;gBAEtC,MAAM,aAAa,aAAa,OAAO,CAAC,CAAC,qBAAqB,EAAE,QAAQ;gBACxE,IAAI,YAAY,cAAc,KAAK,KAAK,CAAC;gBAEzC,MAAM,WAAW,aAAa,OAAO,CAAC,CAAC,uBAAuB,EAAE,QAAQ;gBACxE,IAAI,UAAU,gBAAgB,KAAK,KAAK,CAAC;gBAEzC,MAAM,gBAAgB,aAAa,OAAO,CAAC,CAAC,kBAAkB,EAAE,QAAQ;gBACxE,IAAI,eAAe,mBAAmB,KAAK,KAAK,CAAC;gBAEjD,MAAM,gBAAgB,aAAa,OAAO,CAAC,CAAC,kBAAkB,EAAE,QAAQ;gBACxE,IAAI,eAAe,WAAW,KAAK,KAAK,CAAC;YAEzC,wGAAwG;YACxG,gCAAgC;YAElC,EAAE,OAAO,GAAG;gBACV,QAAQ,IAAI,CAAC,yBAAyB;YACxC;YAEA,gDAAgD;YAChD,MAAM,QAAQ,GAAG,CAAC;gBAChB,cAAc;gBACd,gBAAgB;gBAChB,qBAAqB;gBACrB,kBAAkB;gBAClB,iBAAiB;gBACjB,aAAa;gBACb,oBAAoB;aACrB;QACH;8DAAG;QAAC;QAAe;QAAiB;QAAsB;QAAmB;QAAkB;QAAc;KAAoB;IAIjI,UAAU;IACV,MAAM,iBAAiB,IAAA,4KAAW;uDAAC,OAAO;YACxC,IAAI,CAAC,cAAc;YAEnB,mDAAmD;YACnD,0DAA0D;YAC1D,MAAM,UAAU,SAAS,IAAI;uEAAC,CAAA,IAAK,EAAE,IAAI,KAAK,EAAE,OAAO;;YACvD,MAAM,YAAY,SAAS,IAAI,YAAY;YAE3C,IAAI,CAAC,WAAW;gBACd,QAAQ,KAAK,CAAC,0CAA0C,EAAE,OAAO,GAAG,6BAA6B;gBACjG,MAAM,oDAAoD,EAAE,OAAO,GAAG;gBACtE;YACF;YAEA,mBAAmB;YACnB,0EAA0E;YAC1E,IAAI,aAAa,EAAE,WAAW;YAC9B,IAAI,CAAC,cAAc,EAAE,QAAQ,EAAE;gBAC7B,MAAM,MAAM,WAAW,IAAI;uEAAC,CAAA,IAAK,EAAE,IAAI,KAAK,EAAE,QAAQ;;gBACtD,aAAa,KAAK;YACpB;YAEA,iCAAiC;YACjC,IAAI,MAA0B,EAAE,QAAQ;YACxC,IAAI,MAA0B,EAAE,SAAS;YAEzC,0FAA0F;YAC1F,IAAI,aAAa,uBAAuB,CAAC,CAAC,OAAO,CAAC,GAAG,GAAG;gBACtD,IAAI;oBACF,MAAM,MAAM,MAAM,IAAI;uEAA6B,CAAC,SAAS;4BAC3D,UAAU,WAAW,CAAC,kBAAkB,CAAC,SAAS,QAAQ;gCAAE,SAAS;4BAAK;wBAC5E;;oBACA,MAAM,IAAI,MAAM,CAAC,QAAQ;oBACzB,MAAM,IAAI,MAAM,CAAC,SAAS;gBAC5B,EAAE,OAAO,GAAG;oBACV,QAAQ,IAAI,CAAC,6CAA6C;gBAC5D;YACF;YAEA,kFAAkF;YAClF,EAAE,QAAQ,GAAG;YACb,EAAE,SAAS,GAAG;YAEd,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;gBACjE,SAAS;gBACT,YAAY;gBACZ,MAAM,EAAE,IAAI;gBACZ,QAAQ,EAAE,MAAM;gBAChB,aAAa,EAAE,WAAW;gBAC1B,aAAa,EAAE,IAAI;gBACnB,aAAa;gBACb,UAAU,QAAQ,QAAQ,IAAI;gBAC9B,eAAe,EAAE,QAAQ;gBACzB,cAAc,EAAE,QAAQ;gBACxB,cAAc,EAAE,SAAS;gBACzB,OAAO,EAAE,KAAK;gBACd,aAAa,EAAE,WAAW;gBAC1B,WAAW,EAAE,SAAS;gBACtB,eAAe,EAAE,aAAa,CAAC,uBAAuB;YACxD,GAAG,MAAM,GAAG,MAAM;YAElB,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM,uBAAuB,MAAM,OAAO;gBAC1C;YACF;YAEA,0DAA0D;YAC1D,IAAI,SAAS;gBACX,IAAI,aAAa,OAAO,QAAQ,OAAO;gBACvC,IAAI,EAAE,IAAI,KAAK,UAAU;oBACvB,cAAc,OAAO,EAAE,MAAM;gBAC/B,OAAO;oBACL,cAAc,OAAO,EAAE,MAAM;gBAC/B;gBAEA,MAAM,EAAE,OAAO,QAAQ,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,YACL,MAAM,CAAC;oBAAE,SAAS;gBAAW,GAC7B,EAAE,CAAC,MAAM;gBAEZ,IAAI,UAAU;oBACZ,QAAQ,KAAK,CAAC,mCAAmC;gBACnD;YACF;YAEA,kCAAkC;YAClC,IAAI,QAAQ,EAAE,SAAS,EAAE;gBACvB,IAAI,WAAW,IAAI,KAAK,EAAE,IAAI;gBAC9B,6BAA6B;gBAC7B,IAAI,EAAE,SAAS,KAAK,SAAS,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;gBACnE,IAAI,EAAE,SAAS,KAAK,UAAU,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;gBACpE,IAAI,EAAE,SAAS,KAAK,YAAY,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;gBACtE,IAAI,EAAE,SAAS,KAAK,WAAW,SAAS,QAAQ,CAAC,SAAS,QAAQ,KAAK;gBACvE,IAAI,EAAE,SAAS,KAAK,UAAU,SAAS,WAAW,CAAC,SAAS,WAAW,KAAK;gBAE5E,MAAM,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,mBAAmB,MAAM,CAAC;oBACzE,SAAS;oBACT,MAAM,EAAE,WAAW;oBACnB,QAAQ,EAAE,MAAM;oBAChB,aAAa;oBACb,YAAY;oBACZ,MAAM,EAAE,IAAI;oBACZ,WAAW,EAAE,SAAS;oBACtB,aAAa,SAAS,WAAW;oBACjC,UAAU,EAAE,QAAQ;oBACpB,WAAW;gBACb;gBAEA,IAAI,WAAW;oBACb,QAAQ,IAAI,CAAC,oCAAoC;gBACnD,OAAO;oBACL,oBAAoB;gBACtB;YACF;YAEA,IAAI,MAAM;gBACR,kCAAkC;gBAClC,kBAAkB;gBAClB,cAAc,eAAe,kBAAkB;YACjD;QACF;sDAAG;QAAC;QAAc;QAAU;QAAY;QAAa;QAAU;QAAqB;QAAmB;KAAc;IAErH,MAAM,aAAa,IAAA,4KAAW;mDAAC,OAAO;YACpC,IAAI,CAAC,cAAc;YAEnB,0FAA0F;YAC1F,MAAM,UAAe;gBACnB,SAAS;gBACT,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE,OAAO;gBAClB,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,SAAS;gBACvB,qBAAqB;gBACrB,cAAc,EAAE,WAAW;gBAC3B,kBAAkB,EAAE,eAAe;gBACnC,SAAS,EAAE,MAAM;gBACjB,SAAS,EAAE,OAAO;gBAClB,UAAU,EAAE,OAAO;gBACnB,WAAW,EAAE,QAAQ;gBACrB,iBAAiB,EAAE,cAAc;gBACjC,aAAa,EAAE,UAAU;gBACzB,OAAO;gBACP,MAAM,kBAAkB,UAAU;YACpC;YAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC;YAEzD,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,6BAA6B,MAAM,OAAO;gBAChD;YACF;YAEA,cAAc;QAChB;kDAAG;QAAC;QAAc;QAAU;KAAc;IAE1C,MAAM,gBAAgB,IAAA,4KAAW;sDAAC,OAAO,IAAY;YACnD,IAAI,CAAC,cAAc;YAEnB,kBAAkB;YAClB,MAAM,UAAe;gBACnB,MAAM,EAAE,IAAI;gBACZ,MAAM,EAAE,IAAI;gBACZ,SAAS,EAAE,OAAO;gBAClB,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,SAAS;gBACvB,cAAc,EAAE,WAAW;gBAC3B,kBAAkB,EAAE,eAAe;gBACnC,YAAY,EAAE,SAAS;gBACvB,SAAS,EAAE,MAAM;gBACjB,SAAS,EAAE,OAAO;gBAClB,UAAU,EAAE,OAAO;gBACnB,WAAW,EAAE,QAAQ;gBACrB,iBAAiB,EAAE,cAAc;gBACjC,aAAa,EAAE,UAAU;gBACzB,OAAO,EAAE,KAAK,IAAI;YACpB;YAEA,wBAAwB;YACxB,OAAO,IAAI,CAAC,SAAS,OAAO;8DAAC,CAAA,MAAO,OAAO,CAAC,IAAI,KAAK,aAAa,OAAO,OAAO,CAAC,IAAI;;YAErF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM;YAE3E,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,6BAA6B,MAAM,OAAO;gBAChD;YACF;YAEA,cAAc;QAChB;qDAAG;QAAC;QAAc;QAAU;KAAc;IAE1C,MAAM,gBAAgB,IAAA,4KAAW;sDAAC,OAAO;YACvC,IAAI,CAAC,cAAc;YAEnB,kEAAkE;YAClE,kFAAkF;YAClF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,MAAM;YAEpE,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,+BAA+B,MAAM,OAAO;gBAClD;YACF;YAEA,cAAc;QAChB;qDAAG;QAAC;QAAc;QAAU;KAAc;IAE1C,MAAM,gBAAgB,IAAA,4KAAW;sDAAC,OAAO;YACvC,IAAI,CAAC,cAAc;YAEnB,MAAM,UAAe;gBACnB,SAAS;gBACT,OAAO,EAAE,IAAI;gBACb,QAAQ,EAAE,MAAM;gBAChB,WAAW,EAAE,SAAS;gBACtB,eAAe,EAAE,WAAW;gBAC5B,QAAQ,EAAE,MAAM;gBAChB,MAAM,EAAE,IAAI;gBACZ,WAAW,EAAE,QAAQ;gBACrB,UAAU,EAAE,OAAO;gBACnB,aAAa,EAAE,UAAU;gBACzB,YAAY,EAAE,SAAS;gBACvB,YAAY,EAAE,UAAU;gBACxB,kBAAkB,EAAE,gBAAgB;gBACpC,aAAa,EAAE,SAAS;gBACxB,oBAAoB,EAAE,gBAAgB;YACxC;YAEA,IAAI,CAAC,EAAE,UAAU,IAAI,EAAE,QAAQ,EAAE;gBAC/B,MAAM,MAAM,WAAW,IAAI;sEAAC,CAAA,MAAO,IAAI,IAAI,KAAK,EAAE,QAAQ;;gBAC1D,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,EAAE;YACvC;YAEA,IAAI,CAAC,EAAE,SAAS,IAAI,EAAE,OAAO,EAAE;gBAC7B,MAAM,MAAM,SAAS,IAAI;sEAAC,CAAA,IAAK,EAAE,IAAI,KAAK,EAAE,OAAO;;gBACnD,IAAI,KAAK,QAAQ,UAAU,GAAG,IAAI,EAAE;YACtC;YAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC;YAE5D,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,MAAM,gCAAgC,MAAM,OAAO;gBACnD;YACF;YAEA,iBAAiB;QACnB;qDAAG;QAAC;QAAc;QAAU;QAAY;QAAU;KAAiB;IAEnE,MAAM,mBAAmB,IAAA,4KAAW;yDAAC,OAAO,IAAY;YACtD,IAAI,CAAC,cAAc;YAEnB,MAAM,UAAe,CAAC;YACtB,IAAI,QAAQ,IAAI,KAAK,WAAW,QAAQ,KAAK,GAAG,QAAQ,IAAI;YAC5D,IAAI,QAAQ,MAAM,KAAK,WAAW,QAAQ,MAAM,GAAG,QAAQ,MAAM;YACjE,IAAI,QAAQ,SAAS,KAAK,WAAW,QAAQ,SAAS,GAAG,QAAQ,SAAS;YAC1E,IAAI,QAAQ,WAAW,KAAK,WAAW,QAAQ,aAAa,GAAG,QAAQ,WAAW;YAClF,IAAI,QAAQ,MAAM,KAAK,WAAW,QAAQ,MAAM,GAAG,QAAQ,MAAM;YACjE,IAAI,QAAQ,IAAI,KAAK,WAAW,QAAQ,IAAI,GAAG,QAAQ,IAAI;YAC3D,IAAI,QAAQ,QAAQ,KAAK,WAAW,QAAQ,SAAS,GAAG,QAAQ,QAAQ;YACxE,IAAI,QAAQ,OAAO,KAAK,WAAW,QAAQ,QAAQ,GAAG,QAAQ,OAAO;YACrE,IAAI,QAAQ,UAAU,KAAK,WAAW,QAAQ,UAAU,GAAG,QAAQ,UAAU;YAC7E,IAAI,QAAQ,gBAAgB,KAAK,WAAW,QAAQ,gBAAgB,GAAG,QAAQ,gBAAgB;YAC/F,IAAI,QAAQ,SAAS,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,SAAS;YAC5E,IAAI,QAAQ,gBAAgB,KAAK,WAAW,QAAQ,kBAAkB,GAAG,QAAQ,gBAAgB;YAEjG,IAAI,QAAQ,UAAU,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,UAAU;YAC9E,IAAI,QAAQ,SAAS,KAAK,WAAW,QAAQ,UAAU,GAAG,QAAQ,SAAS;YAE3E,qBAAqB;YACrB,IAAI,CAAC,QAAQ,UAAU,IAAI,QAAQ,QAAQ,EAAE;gBAC3C,MAAM,MAAM,WAAW,IAAI;yEAAC,CAAA,IAAK,EAAE,IAAI,KAAK,QAAQ,QAAQ;;gBAC5D,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,EAAE;YACvC;YACA,IAAI,CAAC,QAAQ,SAAS,IAAI,QAAQ,OAAO,EAAE;gBACzC,MAAM,MAAM,SAAS,IAAI;yEAAC,CAAA,IAAK,EAAE,IAAI,KAAK,QAAQ,OAAO;;gBACzD,IAAI,KAAK,QAAQ,UAAU,GAAG,IAAI,EAAE;YACtC;YAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM;YAE9E,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,MAAM,gCAAgC,MAAM,OAAO;gBACnD;YACF;YAEA,iBAAiB;QACnB;wDAAG;QAAC;QAAc;QAAU;QAAY;QAAU;KAAiB;IAEnE,MAAM,mBAAmB,IAAA,4KAAW;yDAAC,OAAO;YAC1C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,GAAG,EAAE,CAAC,MAAM;YACvE,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,MAAM,gCAAgC,MAAM,OAAO;gBACnD;YACF;YACA,IAAI,cAAc,iBAAiB;QACrC;wDAAG;QAAC;QAAc;QAAU;KAAiB;IAE7C,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO;YAC3C,iDAAiD;YACjD,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SACjC,IAAI,CAAC,gBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,IACT,MAAM;YAET,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,GAAG,EAAE,CAAC,MAAM;YACxE,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM,iCAAiC,MAAM,OAAO;gBACpD;YACF;YAEA,oBAAoB;YACpB,IAAI,eAAe,YAAY,UAAU,EAAE;gBACzC,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,WACP,EAAE,CAAC,MAAM,YAAY,UAAU,EAC/B,MAAM;gBAET,IAAI,SAAS;oBACX,IAAI,aAAa,OAAO,QAAQ,OAAO;oBACvC,4DAA4D;oBAC5D,2DAA2D;oBAC3D,IAAI,YAAY,IAAI,KAAK,UAAU;wBACjC,cAAc,OAAO,YAAY,MAAM;oBACzC,OAAO;wBACL,cAAc,OAAO,YAAY,MAAM;oBACzC;oBAEA,MAAM,SACH,IAAI,CAAC,YACL,MAAM,CAAC;wBAAE,SAAS;oBAAW,GAC7B,EAAE,CAAC,MAAM,YAAY,UAAU;gBACpC;YACF;YAEA,wCAAwC;YACxC,IAAI,eAAe,YAAY,aAAa,EAAE;gBAC5C,MAAM,SACH,IAAI,CAAC,eACL,MAAM,CAAC;oBAAE,QAAQ;gBAAU,GAC3B,EAAE,CAAC,MAAM,YAAY,aAAa;gBAErC,iBAAiB;YACnB;YAEA,IAAI,cAAc;gBAChB,kBAAkB;gBAClB,cAAc;YAChB;QACF;yDAAG;QAAC;QAAc;QAAU;QAAmB;QAAe;KAAiB;IAE/E,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO,IAAY;YACvD,6BAA6B;YAC7B,MAAM,UAAe,CAAC;YACtB,IAAI,QAAQ,MAAM,KAAK,WAAW,QAAQ,MAAM,GAAG,QAAQ,MAAM;YACjE,IAAI,QAAQ,WAAW,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,WAAW;YAChF,IAAI,QAAQ,IAAI,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,IAAI;YAClE,IAAI,QAAQ,IAAI,KAAK,WAAW,QAAQ,IAAI,GAAG,QAAQ,IAAI;YAC3D,IAAI,QAAQ,KAAK,KAAK,WAAW,QAAQ,KAAK,GAAG,QAAQ,KAAK;YAC9D,IAAI,QAAQ,QAAQ,KAAK,WAAW,QAAQ,aAAa,GAAG,QAAQ,QAAQ;YAC5E,IAAI,QAAQ,WAAW,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,WAAW;YAChF,IAAI,QAAQ,SAAS,KAAK,WAAW,QAAQ,SAAS,GAAG,QAAQ,SAAS;YAC1E,IAAI,QAAQ,QAAQ,KAAK,WAAW,QAAQ,QAAQ,GAAG,QAAQ,QAAQ;YACvE,IAAI,QAAQ,QAAQ,KAAK,WAAW,QAAQ,QAAQ,GAAG,QAAQ,QAAQ;YACvE,uBAAuB;YACvB,IAAI,QAAQ,WAAW,EAAE,QAAQ,WAAW,GAAG,QAAQ,WAAW;YAClE,IAAI,QAAQ,UAAU,EAAE,QAAQ,UAAU,GAAG,QAAQ,UAAU;YAC/D,8EAA8E;YAC9E,IAAI,CAAC,QAAQ,WAAW,IAAI,QAAQ,QAAQ,EAAE;gBAC5C,MAAM,MAAM,WAAW,IAAI;0EAAC,CAAA,IAAK,EAAE,IAAI,KAAK,QAAQ,QAAQ;;gBAC5D,IAAI,KAAK,QAAQ,WAAW,GAAG,IAAI,EAAE;YACvC;YAEA,QAAQ,UAAU,GAAG,IAAI,OAAO,WAAW;YAE3C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM;YAE/E,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,MAAM,iCAAiC,MAAM,OAAO;gBACpD;YACF;YACA,IAAI,cAAc;gBAChB,kBAAkB;gBAClB,cAAc,eAAe,uBAAuB;YACtD;QACF;yDAAG;QAAC;QAAc;QAAY;QAAU;QAAmB;KAAc;IAEzE,MAAM,uBAAuB,IAAA,4KAAW;6DAAC,OAAO;YAC9C,MAAM,WAAW,aAAa,IAAI;8EAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;YACjD,IAAI,CAAC,UAAU;YAEf,MAAM,WAAoC;gBACxC,GAAG,QAAQ;gBACX,MAAM,IAAI,OAAO,WAAW;gBAC5B,OAAO,CAAC,SAAS,KAAK,GAAG,SAAS,KAAK,GAAG,MAAM,EAAE,IAAI;gBACtD,YAAY;gBACZ,YAAY;YACd;YAEA,MAAM,eAAe;QACvB;4DAAG;QAAC;QAAc;KAAe;IAEjC,MAAM,yBAAyB,IAAA,4KAAW;+DAAC,OAAO,IAAY;YAC5D,MAAM,YAAY,kBAAkB,SAAS,YAAY;YAEzD,oBAAoB;YACpB,MAAM,iBAAiB,IAAI;gBAAE,QAAQ;YAAiB;YAEtD,+CAA+C;YAC/C,IAAI,cAAc,QAAQ;gBACxB,MAAM,aAAa,YAAY,IAAI;sFAAC,CAAA,IAAK,EAAE,EAAE,KAAK;;gBAClD,IAAI,YAAY;oBACd,IAAI,YAAY,WAAW,gBAAgB,IAAI;oBAC/C,iFAAiF;oBACjF,IAAI,WAAW,SAAS,EAAE;wBACxB,MAAM,gBAAgB,SAAS,IAAI;iGAAC,CAAA,IAAK,EAAE,EAAE,KAAK,WAAW,SAAS;;wBACtE,IAAI,iBAAiB,cAAc,IAAI,KAAK,YAAY,WAAW,IAAI,KAAK,YAAY;4BACtF,YAAY;wBACd;oBACF;oBAEA,MAAM,kBAAuB;wBAC3B,SAAS;wBACT,QAAQ,WAAW,MAAM;wBACzB,MAAM;wBACN,SAAS,WAAW,OAAO;wBAC3B,YAAY,WAAW,SAAS;wBAChC,UAAU,WAAW,QAAQ;wBAC7B,aAAa,WAAW,UAAU;wBAClC,aAAa,CAAC,aAAa,EAAE,WAAW,IAAI,EAAE;wBAC9C,MAAM,IAAI,OAAO,WAAW;wBAC5B,OAAO;wBACP,eAAe,GAAG,0BAA0B;oBAC9C;oBAEA,MAAM,eAAe;oBAErB,2EAA2E;oBAC3E,IAAI,WAAW,gBAAgB,EAAE;wBAC/B,MAAM,aAAa,SAAS,IAAI;8FAAC,CAAA,IAAK,EAAE,EAAE,KAAK,WAAW,gBAAgB;;wBAC1E,IAAI,YAAY;4BACd,MAAM,eAAe;gCACnB,+CAA+C;gCAC/C,QAAQ,WAAW,MAAM;gCACzB,MAAM;gCACN,SAAS,WAAW,IAAI;gCACxB,YAAY,WAAW,EAAE;gCACzB,UAAU,WAAW,QAAQ;gCAC7B,aAAa,WAAW,UAAU;gCAClC,aAAa,CAAC,OAAO,EAAE,WAAW,IAAI,EAAE;gCACxC,MAAM,IAAI,OAAO,WAAW;gCAC5B,OAAO,CAAC,iBAAiB,EAAE,WAAW,OAAO,EAAE;gCAC/C,MAAM;4BACR;wBACF;oBACF;oBAEA,qDAAqD;oBACrD,IAAI,WAAW,SAAS,IAAI,WAAW,IAAI,KAAK,YAAY;wBAC1D,MAAM,cAAc,IAAI,KAAK,WAAW,WAAW;wBACnD,oBAAoB;wBACpB,IAAI,CAAC,MAAM,YAAY,OAAO,KAAK;4BACjC,MAAM,WAAW,IAAI,KAAK;4BAE1B,6FAA6F;4BAC7F,wBAAwB;4BACxB,OAAQ,WAAW,SAAS;gCAC1B,KAAK;oCAAS,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;oCAAI;gCACxD,KAAK;oCAAU,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;oCAAI;gCACzD,KAAK;oCAAY,SAAS,OAAO,CAAC,SAAS,OAAO,KAAK;oCAAK;gCAC5D,KAAK;oCAAW,SAAS,QAAQ,CAAC,SAAS,QAAQ,KAAK;oCAAI;gCAC5D,KAAK;oCAAa,SAAS,QAAQ,CAAC,SAAS,QAAQ,KAAK;oCAAI;gCAC9D,KAAK;oCAAc,SAAS,QAAQ,CAAC,SAAS,QAAQ,KAAK;oCAAI;gCAC/D,KAAK;oCAAU,SAAS,WAAW,CAAC,SAAS,WAAW,KAAK;oCAAI;4BACnE;4BAEA,iBAAiB;4BACjB,MAAM,aAAa,WAAW,OAAO,IAAI,WAAW,OAAO,CAAC,IAAI,OAAO;4BACvE,MAAM,aAAa,cAAc,IAAI,KAAK,WAAW,OAAO,IAAK;4BAEjE,IAAI,CAAC,YAAY;gCACf,6BAA6B;gCAC7B,yDAAyD;gCACzD,mCAAmC;gCACnC,MAAM,iBAAiB;oCACrB,GAAG,UAAU;oCACb,0CAA0C;oCAC1C,QAAQ;oCACR,aAAa,SAAS,WAAW;gCAEnC;gCAEA,qEAAqE;gCACrE,qDAAqD;gCACrD,0EAA0E;gCAC1E,kFAAkF;gCAClF,MAAM,cAAc;4BACtB;wBACF;oBACF;gBACF;YACF;QACF;8DAAG;QAAC;QAAc;QAAa;QAAU;QAAkB;QAAgB;KAAc;IAEzF,MAAM,mBAAmB,IAAA,4KAAW;yDAAC,CAAC;QACpC,OAAO;QACT;wDAAG,EAAE;IAEL,MAAM,iBAAiB,IAAA,4KAAW;uDAAC,CAAC;YAClC,uBAAuB;QACzB;sDAAG;QAAC;KAAuB;IAE3B,MAAM,qBAAqB,IAAA,4KAAW;2DAAC;YACrC,IAAI,CAAC,cAAc;YAEnB,aAAa;YAEb,qBAAqB;YACrB,MAAM,eAAe;gBACnB;oBAAE,SAAS;oBAAc,MAAM;oBAAkB,MAAM;oBAAU,SAAS,CAAC;oBAAS,WAAW;gBAAO;gBACtG;oBAAE,SAAS;oBAAc,MAAM;oBAAmB,MAAM;oBAAS,SAAS;oBAAS,WAAW;gBAAO;gBACrG;oBAAE,SAAS;oBAAc,MAAM;oBAAY,MAAM;oBAAQ,SAAS;oBAAQ,WAAW;gBAAM;gBAC3F;oBAAE,SAAS;oBAAc,MAAM;oBAAe,MAAM;oBAAc,SAAS;oBAAU,WAAW;gBAAM;aACvG;YAED,MAAM,EAAE,MAAM,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,cAAc,MAAM;YAEzF,IAAI,aAAa;gBACf,wDAAwD;gBACxD,MAAM,aAAa;oBAAC;oBAAa;oBAAc;oBAAY;oBAAmB;oBAAS;iBAAY;gBACnG,MAAM,QAA2B;oBAAC;oBAAW;oBAAW;oBAAW;iBAAS,EAAE,wBAAwB;gBAEtG,MAAM,mBAAmB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAG,GAAG,GAAG;wFAAC,CAAC,GAAG;wBAC1D,MAAM,OAAO,KAAK,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM,MAAM,EAAE;wBAC5D,MAAM,SAAS,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,OAAO;wBACjD,MAAM,UAAU,WAAW,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,YAAY,MAAM,EAAE;wBAC3E,MAAM,WAAW,UAAU,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,WAAW,MAAM,EAAE;wBAC1E,MAAM,OAAO,IAAI;wBACjB,KAAK,OAAO,CAAC,KAAK,OAAO,KAAK,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;wBAEzD,OAAO;4BACL,SAAS;4BACT,YAAY,QAAQ,EAAE;4BACtB,MAAM;4BACN,QAAQ,SAAS,WAAW,SAAS,IAAI;4BACzC,aAAa,CAAC,qBAAqB,EAAE,IAAI,GAAG;4BAC5C,aAAa;4BACb,aAAa,KAAK,WAAW;wBAE/B;oBACF;;gBAEA,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,CAAC;gBAE3C,wBAAwB;gBACxB,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,CAAC;oBACxC;wBAAE,SAAS;wBAAc,OAAO;wBAAmB,QAAQ;wBAAO,WAAW;wBAAW,eAAe,IAAI,OAAO,WAAW;wBAAI,QAAQ;oBAAU;oBACnJ;wBAAE,SAAS;wBAAc,OAAO;wBAAkB,QAAQ;wBAAO,WAAW;wBAAW,eAAe,IAAI,OAAO,WAAW;wBAAI,QAAQ;oBAAO;oBAC/I;wBAAE,SAAS;wBAAc,OAAO;wBAAkB,QAAQ;wBAAO,WAAW;wBAAW,eAAe,IAAI,OAAO,WAAW;wBAAI,QAAQ;oBAAU;iBACnJ;YACH;YAEA,cAAc;YACd,MAAM,uBAAuB;YAC7B,aAAa;QACf;0DAAG;QAAC;QAAc;QAAU;KAAuB;IAEnD,MAAM,YAAY,IAAA,4KAAW;kDAAC,OAAO;YACnC,IAAI,CAAC,cAAc;YAEnB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,WAAW,MAAM,CAAC;gBACtD,SAAS;gBACT,aAAa,WAAW,UAAU;gBAClC,QAAQ,WAAW,MAAM;gBACzB,iBAAiB,WAAW,cAAc,IAAI;gBAC9C,qBAAqB,WAAW,kBAAkB,IAAI;gBACtD,YAAY,WAAW,SAAS,IAAI,IAAI,OAAO,WAAW;gBAC1D,UAAU,WAAW,OAAO,IAAI;gBAChC,QAAQ,UAAU,gFAAgF;YACpG;YAEA,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,MAAM,iCAAiC,MAAM,OAAO;gBACpD;YACF;YAEA,MAAM,aAAa;QACrB;iDAAG;QAAC;QAAc;QAAU;KAAa;IAEzC,MAAM,eAAe,IAAA,4KAAW;qDAAC,OAAO;YACtC,IAAI,CAAC,cAAc;YAEnB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,WAAW,MAAM,GAAG,EAAE,CAAC,MAAM;YAEnE,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,MAAM,oCAAoC,MAAM,OAAO;gBACvD;YACF;YAEA,MAAM,aAAa;QACrB;oDAAG;QAAC;QAAc;QAAU;KAAa;IAEzC,MAAM,eAAe,IAAA,4KAAW;qDAAC,OAAO,IAAY;YAClD,IAAI,CAAC,cAAc;YAEnB,MAAM,UAAe,CAAC;YACtB,IAAI,QAAQ,MAAM,KAAK,WAAW,QAAQ,MAAM,GAAG,QAAQ,MAAM;YACjE,IAAI,QAAQ,UAAU,KAAK,WAAW,QAAQ,WAAW,GAAG,QAAQ,UAAU;YAC9E,IAAI,QAAQ,cAAc,KAAK,WAAW,QAAQ,eAAe,GAAG,QAAQ,cAAc;YAC1F,IAAI,QAAQ,kBAAkB,KAAK,WAAW,QAAQ,mBAAmB,GAAG,QAAQ,kBAAkB;YACtG,IAAI,QAAQ,SAAS,KAAK,WAAW,QAAQ,UAAU,GAAG,QAAQ,SAAS;YAC3E,IAAI,QAAQ,OAAO,KAAK,WAAW,QAAQ,QAAQ,GAAG,QAAQ,OAAO;YAErE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,WAAW,MAAM,CAAC,SAAS,EAAE,CAAC,MAAM;YAE1E,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,0BAA0B;gBACxC,MAAM,sCAAsC,MAAM,OAAO;gBACzD;YACF;YAEA,MAAM,aAAa;QACrB;oDAAG;QAAC;QAAc;QAAU;KAAa;IAEzC,MAAM,wBAAwB,IAAA,4KAAW;8DAAC;YACxC,IAAI,CAAC,gBAAgB,QAAQ,MAAM,KAAK,GAAG;YAE3C,MAAM,QAAQ,IAAI;YAClB,MAAM,iBAAwB,EAAE;YAEhC,KAAK,MAAM,UAAU,QAAS;gBAC5B,IAAI,CAAC,OAAO,eAAe,IAAI,OAAO,eAAe,KAAK,UAAU,CAAC,OAAO,UAAU,EAAE;gBAExF,MAAM,YAAY,IAAI,KAAK,OAAO,UAAU;gBAC5C,MAAM,UAAU,OAAO,QAAQ,GAAG,IAAI,KAAK,OAAO,QAAQ,IAAI;gBAE9D,IAAI,gBAA6B;gBACjC,IAAI,cAA2B;gBAE/B,IAAI,CAAC,SAAS;gBAEd,IAAI,IAAA,sJAAQ,EAAC,SAAS,QAAQ;oBAC5B,gBAAgB,IAAA,oJAAO,EAAC,SAAS;oBAEjC,IAAI,OAAO,eAAe,KAAK,WAAW;wBACxC,gBAAgB,IAAA,wJAAS,EAAC,WAAW;wBACrC,cAAc,IAAA,0JAAU,EAAC;oBAC3B,OAAO,IAAI,OAAO,eAAe,KAAK,UAAU;wBAC9C,gBAAgB,IAAA,sJAAQ,EAAC,WAAW;wBACpC,cAAc,IAAA,oJAAO,EAAC,eAAe;oBACvC,OAAO,IAAI,OAAO,eAAe,KAAK,YAAY;wBAChD,gBAAgB,IAAA,oJAAO,EAAC,WAAW;wBACnC,cAAc,IAAA,oJAAO,EAAC,eAAe;oBACvC,OAAO,IAAI,OAAO,eAAe,KAAK,UAAU;wBAC9C,gBAAgB,IAAA,sJAAQ,EAAC,WAAW;wBACpC,cAAc,IAAI,KAAK,cAAc,WAAW,IAAI,IAAI;oBAC1D,OAAO;wBACL;oBACF;oBAEA,MAAM,SAAS,QAAQ,IAAI;qFAAC,CAAA,IAC1B,EAAE,WAAW,KAAK,OAAO,WAAW,IACpC,IAAA,wJAAS,EAAC,IAAI,KAAK,EAAE,UAAU,GAAG;;oBAGpC,IAAI,CAAC,UAAU,eAAe;wBAC5B,eAAe,IAAI,CAAC;4BAClB,SAAS;4BACT,aAAa,OAAO,WAAW;4BAC/B,QAAQ,OAAO,KAAK;4BACpB,iBAAiB,OAAO,eAAe;4BACvC,qBAAqB,OAAO,mBAAmB;4BAC/C,YAAY,cAAc,WAAW;4BACrC,UAAU,cAAc,YAAY,WAAW,KAAK;4BACpD,QAAQ;wBACV;oBACF;gBACF;YACF;YAEA,IAAI,eAAe,MAAM,GAAG,GAAG;gBAC7B,QAAQ,GAAG,CAAC,iCAAiC,eAAe,MAAM;gBAClE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,WAAW,MAAM,CAAC;gBACxD,IAAI,OAAO;oBACT,QAAQ,KAAK,CAAC,uCAAuC;gBACvD,OAAO;oBACL,MAAM,aAAa;gBACrB;YACF;QACF;6DAAG;QAAC;QAAc;QAAS;QAAU;KAAa;IAElD,MAAM,0BAA0B,IAAA,4KAAW;gEAAC;YAC1C,IAAI,CAAC,gBAAgB,YAAY,MAAM,KAAK,GAAG;YAE/C,MAAM,QAAQ,IAAI;YAClB,MAAM,QAAQ,CAAC,GAAG,GAAG,GAAG;YAExB,MAAM,iBAAiB,YAAY,MAAM;uFAAC,CAAA,IACxC,EAAE,QAAQ,IACV,EAAE,SAAS,IACX,EAAE,MAAM,KAAK,aACb,IAAI,KAAK,EAAE,WAAW,KAAK;;YAG7B,KAAK,MAAM,cAAc,eAAgB;gBACvC,QAAQ,GAAG,CAAC,CAAC,wBAAwB,EAAE,WAAW,IAAI,EAAE;gBACxD,MAAM,uBAAuB,WAAW,EAAE,EAAE;YAC9C;QACF;+DAAG;QAAC;QAAc;QAAa;KAAuB;IAEtD,IAAA,0KAAS;qCAAC;YACR,IAAI,CAAC,aAAa,gBAAgB,YAAY,MAAM,GAAG,GAAG;gBACxD;YACF;QACF;oCAAG;QAAC;QAAW;QAAc;KAAY;IAEzC,cAAc;IACd,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,IAAA,yKAAQ,EAAC;IAErE,MAAM,uBAAuB,IAAM,0BAA0B;IAC7D,MAAM,wBAAwB,IAAM,0BAA0B;IAE9D,MAAM,eAAe,IAAA,wKAAO;iDAAC,IAAM,SAAS,MAAM;yDAAC,CAAC,KAAK,MAAQ,MAAM,IAAI,OAAO;wDAAE;gDAAI;QAAC;KAAS;IAElG,MAAM,mBAAmB,IAAA,4KAAW;yDAAC;YACnC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YAEX,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SACzB,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY;gBACtC,QAAQ,KAAK,CAAC,gCAAgC;YAChD;YAEA,IAAI,SAAS,MAAM,IAAI,KAAK,YAAY;gBACtC,mCAAmC;gBACnC,MAAM,aAAa;oBACjB,IAAI,KAAK,EAAE;oBACX,WAAW;oBACX,OAAO,KAAK,KAAK,IAAI;oBACrB,OAAO;oBACP,UAAU;oBACV,UAAU;oBACV,UAAU;oBACV,SAAS;oBACT,MAAM;oBACN,uBAAuB;oBACvB,oBAAoB;gBACtB;gBAEA,MAAM,EAAE,MAAM,cAAc,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SACxD,IAAI,CAAC,YACL,MAAM,CAAC,YACP,MAAM,GACN,MAAM;gBAET,IAAI,aAAa;oBACf,QAAQ,KAAK,CAAC,mCAAmC;gBACnD,OAAO;oBACL,OAAO;gBACT;YACF;YAEA,IAAI,MAAM;gBACR,qEAAqE;gBACrE,eAAe;oBACb,GAAG,IAAI;oBACP,OAAO,KAAK,KAAK,IAAI,KAAK,KAAK,IAAI;oBACnC,oBAAoB,KAAK,kBAAkB,IAAI;gBACjD;YACF;QACF;wDAAG;QAAC;KAAS;IAEb,MAAM,oBAAoB,IAAA,4KAAW;0DAAC,OAAO;YAC3C,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YAEX,2CAA2C;YAC3C,IAAI,QAAQ,KAAK,IAAI,QAAQ,KAAK,KAAK,KAAK,KAAK,EAAE;gBACjD,MAAM,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC;oBAAE,OAAO,QAAQ,KAAK;gBAAC;gBAEnF,IAAI,WAAW;oBACb,QAAQ,KAAK,CAAC,8BAA8B;oBAC5C,MAAM,qDAAqD,UAAU,OAAO;oBAC5E,QAAQ,+DAA+D;gBACzE;gBAEA,MAAM,CAAC,uCAAuC,EAAE,QAAQ,KAAK,CAAC,kEAAkE,CAAC;YACnI;YAEA,kCAAkC;YAClC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,YACL,MAAM,CAAC,SACP,EAAE,CAAC,MAAM,KAAK,EAAE;YAEnB,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,iCAAiC,MAAM,OAAO;YACtD,OAAO;gBACL;YACF;QACF;yDAAG;QAAC;QAAU;KAAiB;IAE/B,MAAM,iBAAiB,IAAA,4KAAW;uDAAC,OAAO,SAAiB;YACzD,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,OAAO;YAEjC,qBAAqB;YACrB,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,kBAAkB,CAAC;gBACpE,OAAO,KAAK,KAAK;gBACjB,UAAU;YACZ;YAEA,IAAI,aAAa;gBACf,QAAQ,KAAK,CAAC,6BAA6B;gBAC3C,MAAM;gBACN,OAAO;YACT;YAEA,qBAAqB;YACrB,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,UAAU,CAAC;gBAAE,UAAU;YAAQ;YAElF,IAAI,aAAa;gBACf,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,MAAM,qCAAqC,YAAY,OAAO;gBAC9D,OAAO;YACT;YAEA,OAAO;QACT;sDAAG;QAAC;KAAS;IAEb,MAAM,wBAAwB,IAAA,4KAAW;8DAAC,OAAO;YAC/C,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,qBAAqB,CAAC;YAC5D,IAAI,OAAO;gBACT,QAAQ,KAAK,CAAC,8BAA8B;gBAC5C,MAAM,gCAAgC,MAAM,OAAO;gBACnD,OAAO;YACT;YACA,OAAO;QACT;6DAAG;QAAC;KAAS;IAEb,MAAM,oBAAoB,IAAA,4KAAW;0DAAC;YACpC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YAEX,IAAI;gBACF,aAAa;gBAEb,kEAAkE;gBAClE,eAAe;gBACf,MAAM,SAAS,IAAI,CAAC,gBAAgB,MAAM,GAAG,EAAE,CAAC,WAAW,KAAK,EAAE;gBAElE,cAAc;gBACd,MAAM,SAAS,IAAI,CAAC,eAAe,MAAM,GAAG,EAAE,CAAC,WAAW,KAAK,EAAE;gBAEjE,UAAU;gBACV,MAAM,SAAS,IAAI,CAAC,WAAW,MAAM,GAAG,EAAE,CAAC,WAAW,KAAK,EAAE;gBAE7D,WAAW;gBACX,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,WAAW,KAAK,EAAE;gBAE9D,8CAA8C;gBAC9C,MAAM,SAAS,IAAI,CAAC,SAAS,MAAM,GAAG,EAAE,CAAC,SAAS,KAAK,EAAE,GAAG,yCAAyC;gBAErG,UAAU;gBACV,MAAM,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,GAAG,EAAE,CAAC,MAAM,KAAK,EAAE;gBACzF,IAAI,cAAc;oBAChB,MAAM;gBACR;gBAEA,cAAc;gBACd,MAAM,SAAS,IAAI,CAAC,OAAO;YAE3B,mFAAmF;YACnF,oCAAoC;YAEtC,EAAE,OAAO,OAAY;gBACnB,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,MAAM,kCAAkC,MAAM,OAAO;YACvD,SAAU;gBACR,aAAa;YACf;QACF;yDAAG;QAAC;QAAU;KAAa;IAE3B,MAAM,eAAe,IAAA,4KAAW;qDAAC,OAAO;YACtC,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM,OAAO;YAElB,MAAM,UAAU,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG;YACxC,MAAM,WAAW,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,KAAK,MAAM,GAAG,CAAC,EAAE,SAAS;YACzD,MAAM,WAAW,GAAG,KAAK,EAAE,CAAC,CAAC,EAAE,UAAU;YAEzC,MAAM,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,OAAO,CAClD,IAAI,CAAC,WACL,MAAM,CAAC,UAAU;YAEpB,IAAI,aAAa;gBACf,QAAQ,KAAK,CAAC,2BAA2B;gBACzC,OAAO;YACT;YAEA,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,EAAE,GAAG,SAAS,OAAO,CAC7C,IAAI,CAAC,WACL,YAAY,CAAC;YAEhB,OAAO;QACT;oDAAG;QAAC;KAAS;IAEb,IAAA,0KAAS;qCAAC;YACR,uCAAuC;YACvC;QACF;oCAAG,EAAE;IAIL,MAAM,eAAe,IAAA,wKAAO;iDAAC,IAAM,CAAC;gBAClC;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA,cAAc;6DAAE,OAAO;wBACrB,IAAI,CAAC,cAAc;wBACnB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,cAAc,MAAM,GAAG,EAAE,CAAC,MAAM;wBACtE,IAAI,OAAO;4BACT,QAAQ,KAAK,CAAC,4BAA4B;4BAC1C,MAAM,kCAAkC,MAAM,OAAO;wBACvD,OAAO;4BACL,MAAM,gBAAgB;wBACxB;oBACF;;gBACA,oBAAoB;6DAAE,OAAO;wBAC3B,IAAI,CAAC,cAAc;wBACnB,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,oBAAoB,MAAM,GAAG,EAAE,CAAC,MAAM;wBAC5E,IAAI,OAAO;4BACT,QAAQ,KAAK,CAAC,0BAA0B;4BACxC,MAAM,gCAAgC,MAAM,OAAO;wBACrD,OAAO;4BACL,MAAM,qBAAqB;4BAC3B,MAAM,gBAAgB;wBACxB;oBACF;;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;gBACA;YACF,CAAC;gDAAG;QACF;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,qBACE,6LAAC,eAAe,QAAQ;QAAC,OAAO;kBAC7B;;;;;;AAGP;GA/qDa;;QAEI,kJAAS;;;KAFb;AAirDN,MAAM,aAAa;;IACxB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT;IAJa"}},
    {"offset": {"line": 1990, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/components/TransactionModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect } from 'react';\nimport { useFinance } from '@/context/FinanceContext';\nimport { Transaction, TransactionType } from '@/types';\nimport { format } from 'date-fns';\n\ninterface TransactionModalProps {\n    isOpen?: boolean;\n    onClose?: () => void;\n    transactionToEdit?: Transaction | null;\n}\n\nexport const TransactionModal = ({ isOpen, onClose, transactionToEdit }: TransactionModalProps) => {\n    const {\n        isTransactionModalOpen,\n        closeTransactionModal,\n        addTransaction,\n        updateTransaction,\n        accounts,\n        categories,\n        formatAmount,\n        ledgers,\n        activeBookId\n    } = useFinance();\n\n    const finalIsOpen = isOpen !== undefined ? isOpen : isTransactionModalOpen;\n    const finalOnClose = onClose || closeTransactionModal;\n\n    const [amount, setAmount] = useState('');\n    const [description, setDescription] = useState('');\n    const [type, setType] = useState<TransactionType>('EXPENSE');\n    const [categoryId, setCategoryId] = useState('');\n    const [accountId, setAccountId] = useState('');\n    // Initialize with local date\n    const [date, setDate] = useState(format(new Date(), 'yyyy-MM-dd'));\n    const [time, setTime] = useState(new Date().toTimeString().slice(0, 5));\n    const [location, setLocation] = useState('');\n    const [notes, setNotes] = useState('');\n    const [beneficiary, setBeneficiary] = useState('');\n    const [isPending, setIsPending] = useState(false);\n    const [isRecurring, setIsRecurring] = useState(false);\n    const [frequency, setFrequency] = useState('MONTHLY');\n    const [endDate, setEndDate] = useState('');\n\n    // Reset or Populate form\n    useEffect(() => {\n        if (finalIsOpen) {\n            if (transactionToEdit) {\n                // Edit Mode\n                setAmount(transactionToEdit.amount.toString());\n                setDescription(transactionToEdit.description);\n                setType(transactionToEdit.type);\n                setCategoryId(transactionToEdit.category_id || categories.find(c => c.name === transactionToEdit.category)?.id || '');\n                setAccountId(transactionToEdit.account_id || accounts.find(a => a.name === transactionToEdit.account)?.id || '');\n\n                const d = new Date(transactionToEdit.date);\n                // When editing, we rely on the stored date string being correct or standardized.\n                // But usually we just want to display the date part. \n                // If stored in UTC ISO, splitting T might be okay IF it was stored correctly.\n                // However, let's keep the existing logic for EDIT for now, or ensure consistency.\n                // Usually edit takes what's in DB.\n                setDate(d.toISOString().split('T')[0]);\n                setTime(d.toTimeString().slice(0, 5));\n\n                setLocation(transactionToEdit.location || '');\n                setNotes(transactionToEdit.notes || '');\n                setBeneficiary(transactionToEdit.beneficiary || '');\n                setIsPending(transactionToEdit.status === 'PENDING');\n                setIsRecurring(transactionToEdit.isRecurring || false);\n                setFrequency(transactionToEdit.frequency || 'MONTHLY');\n                const endDateVal = transactionToEdit.end_date ? new Date(transactionToEdit.end_date).toISOString().split('T')[0] : '';\n                setEndDate(endDateVal);\n            } else {\n                // Create Mode\n                setAmount('');\n                setDescription('');\n                setType('EXPENSE');\n                setCategoryId('');\n                setAccountId(accounts[0]?.id || '');\n\n                // Use local time for new transactions\n                const now = new Date();\n                setDate(format(now, 'yyyy-MM-dd'));\n                setTime(now.toTimeString().slice(0, 5));\n\n                setLocation('');\n                setNotes('');\n                setBeneficiary('');\n                setIsPending(false);\n                setIsRecurring(false);\n                setFrequency('MONTHLY');\n                setEndDate('');\n            }\n        }\n    }, [finalIsOpen, transactionToEdit, accounts, categories]);\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n\n        const numAmount = parseFloat(amount);\n        if (isNaN(numAmount) || numAmount <= 0) {\n            alert('Por favor ingresa un monto válido');\n            return;\n        }\n\n        if (!accountId) {\n            alert('Por favor selecciona una cuenta');\n            return;\n        }\n\n        const dateTime = new Date(`${date}T${time}`);\n        const selectedAccount = accounts.find(a => a.id === accountId);\n\n        const transactionData = {\n            amount: numAmount,\n            type: type,\n            description: description || (type === 'INCOME' ? 'Ingreso' : 'Gasto'),\n            account: selectedAccount?.name || 'Unknown',\n            account_id: accountId,\n            category_id: categoryId || undefined,\n            category: categories.find(c => c.id === categoryId)?.name || 'Sin categoría',\n            date: dateTime.toISOString(),\n            status: (isPending ? 'PENDING' : 'COMPLETED') as 'PENDING' | 'COMPLETED',\n            location: location,\n            notes: notes,\n            beneficiary: beneficiary,\n            icon: type === 'INCOME' ? 'trending_up' : 'trending_down',\n            isRecurring: isRecurring,\n            frequency: isRecurring ? frequency : null,\n            end_date: isRecurring && endDate ? new Date(endDate).toISOString() : null\n        };\n\n        if (transactionToEdit) {\n            await updateTransaction(transactionToEdit.id, transactionData);\n        } else {\n            await addTransaction(transactionData);\n        }\n\n        finalOnClose();\n    };\n\n    // Close on Escape key\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'Escape' && finalIsOpen) {\n                finalOnClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [finalIsOpen, finalOnClose]);\n\n    if (!finalIsOpen) return null;\n\n    return (\n        <div\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\n            onClick={finalOnClose}\n        >\n            <div\n                className=\"bg-white dark:bg-[#1e2530] w-full max-w-4xl rounded-3xl shadow-2xl overflow-hidden flex flex-col md:flex-row max-h-[90vh]\"\n                onClick={(e) => e.stopPropagation()}\n            >\n\n                {/* Left Side - Amount & Type */}\n                <div className=\"w-full md:w-5/12 bg-gray-50 dark:bg-[#252b36] p-8 flex flex-col justify-center items-center relative border-b md:border-b-0 md:border-r border-gray-100 dark:border-white/5\">\n                    <div className=\"absolute top-6 left-1/2 -translate-x-1/2 bg-gray-200 dark:bg-[#2f3642] p-1 rounded-xl flex\">\n                        <button\n                            onClick={() => setType('EXPENSE')}\n                            className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${type === 'EXPENSE' ? 'bg-white dark:bg-[#1e2530] shadow-sm text-danger' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}\n                        >\n                            Gasto\n                        </button>\n                        <button\n                            onClick={() => setType('INCOME')}\n                            className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${type === 'INCOME' ? 'bg-white dark:bg-[#1e2530] shadow-sm text-success' : 'text-gray-500 dark:text-gray-400 hover:text-gray-700'}`}\n                        >\n                            Ingreso\n                        </button>\n                    </div>\n\n                    <div className=\"mt-12 text-center w-full\">\n                        <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-4\">MONTO TOTAL</p>\n                        <div className=\"relative w-full max-w-[280px] mx-auto\">\n                            <input\n                                type=\"number\"\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                                placeholder=\"0.00\"\n                                className={`w-full bg-transparent text-6xl font-black text-center outline-none border-b-2 border-transparent focus:border-primary/50 transition-colors pb-2 placeholder-gray-200 dark:placeholder-gray-700 ${type === 'INCOME' ? 'text-success' : 'text-text-main dark:text-white'}`}\n                                autoFocus\n                            />\n                            <span className={`absolute top-2 -left-6 text-4xl font-medium ${type === 'INCOME' ? 'text-success/50' : 'text-gray-300 dark:text-gray-600'}`}>\n                                {ledgers.find(l => l.id === activeBookId)?.currency || '$'}\n                            </span>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-auto w-full\">\n                        <label className=\"block text-xs font-bold text-gray-400 uppercase tracking-widest mb-3\">Cuenta de Origen</label>\n                        <div className=\"relative\">\n                            <select\n                                value={accountId}\n                                onChange={(e) => setAccountId(e.target.value)}\n                                className=\"w-full appearance-none bg-white dark:bg-[#1e2530] border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-white rounded-xl px-4 py-3 pr-10 font-semibold focus:outline-none focus:ring-2 focus:ring-primary/20 transition-all cursor-pointer\"\n                            >\n                                {accounts.map(acc => (\n                                    <option key={acc.id} value={acc.id}>\n                                        {acc.name} ({formatAmount(acc.balance)})\n                                    </option>\n                                ))}\n                            </select>\n                            <div className=\"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500\">\n                                <span className=\"material-symbols-outlined\">expand_more</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Right Side - Details Form */}\n                <div className=\"w-full md:w-7/12 p-8 overflow-y-auto custom-scrollbar bg-white dark:bg-[#1e2530]\">\n                    <div className=\"flex justify-between items-center mb-8\">\n                        <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Nueva Transacción</h2>\n                        <button onClick={finalOnClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\">\n                            <span className=\"material-symbols-outlined text-gray-500\">close</span>\n                        </button>\n                    </div>\n\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-6\">\n\n                        {/* Category */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Categoría</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">category</span>\n                                </div>\n                                <select\n                                    value={categoryId}\n                                    onChange={(e) => setCategoryId(e.target.value)}\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white cursor-pointer\"\n                                >\n                                    <option value=\"\">Selecciona una categoría...</option>\n                                    {categories.map(cat => (\n                                        <option key={cat.id} value={cat.id}>{cat.name}</option>\n                                    ))}\n                                </select>\n                            </div>\n                        </div>\n\n                        {/* Description */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Descripción / Beneficiario</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">description</span>\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    value={description}\n                                    onChange={(e) => setDescription(e.target.value)}\n                                    placeholder=\"Ej. Compra semanal, Starbucks, Nómina...\"\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                />\n                            </div>\n                        </div>\n\n                        {/* Date & Time Row */}\n                        <div className=\"grid grid-cols-2 gap-4\">\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Fecha</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">calendar_today</span>\n                                    </div>\n                                    <input\n                                        type=\"date\"\n                                        value={date}\n                                        onChange={(e) => setDate(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                            <div>\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Hora</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">schedule</span>\n                                    </div>\n                                    <input\n                                        type=\"time\"\n                                        value={time}\n                                        onChange={(e) => setTime(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white\"\n                                    />\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Location */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Ubicación</label>\n                            <div className=\"relative group\">\n                                <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                    <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">location_on</span>\n                                </div>\n                                <input\n                                    type=\"text\"\n                                    value={location}\n                                    onChange={(e) => setLocation(e.target.value)}\n                                    placeholder=\"Añadir ubicación...\"\n                                    className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                />\n                                <div className=\"absolute inset-y-0 right-0 pr-3 flex items-center\">\n                                    <button type=\"button\" className=\"p-1 hover:bg-gray-200 dark:hover:bg-white/10 rounded-full transition-colors text-gray-400\" title=\"Usar ubicación actual\">\n                                        <span className=\"material-symbols-outlined text-[18px]\">my_location</span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n\n                        {/* Notes */}\n                        <div>\n                            <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Notas</label>\n                            <textarea\n                                value={notes}\n                                onChange={(e) => setNotes(e.target.value)}\n                                placeholder=\"Notas adicionales...\"\n                                rows={2}\n                                className=\"w-full p-4 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400 resize-none\"\n                            />\n                        </div>\n\n                        {/* Toggles */}\n                        <div className=\"flex gap-6 py-2\">\n                            <label className=\"flex items-center gap-3 cursor-pointer group select-none\">\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${isPending ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}>\n                                    <div className={`bg-white size-4 rounded-full shadow-md transform transition-transform duration-300 ${isPending ? 'translate-x-6' : ''}`}></div>\n                                </div>\n                                <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors\">Pendiente</span>\n                                <input type=\"checkbox\" checked={isPending} onChange={(e) => setIsPending(e.target.checked)} className=\"hidden\" />\n                            </label>\n\n                            <label className=\"flex items-center gap-3 cursor-pointer group select-none\">\n                                <div className={`w-12 h-6 rounded-full p-1 transition-colors duration-300 ${isRecurring ? 'bg-primary' : 'bg-gray-200 dark:bg-gray-700'}`}>\n                                    <div className={`bg-white size-4 rounded-full shadow-md transform transition-transform duration-300 ${isRecurring ? 'translate-x-6' : ''}`}></div>\n                                </div>\n                                <span className=\"text-sm font-semibold text-gray-700 dark:text-gray-300 group-hover:text-primary transition-colors\">Recurrente</span>\n                                <input type=\"checkbox\" checked={isRecurring} onChange={(e) => setIsRecurring(e.target.checked)} className=\"hidden\" />\n                            </label>\n                        </div>\n\n                        {/* Frequency Dropdown */}\n                        {isRecurring && (\n                            <div className=\"animate-fade-in-down\">\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Frecuencia</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">repeat</span>\n                                    </div>\n                                    <select\n                                        value={frequency}\n                                        onChange={(e) => setFrequency(e.target.value)}\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white cursor-pointer appearance-none\"\n                                    >\n                                        <option value=\"DAILY\">Diariamente</option>\n                                        <option value=\"WEEKLY\">Semanalmente</option>\n                                        <option value=\"BIWEEKLY\">Cada 2 semanas</option>\n                                        <option value=\"WEEKLY_3\">Cada 3 semanas</option>\n                                        <option value=\"WEEKLY_4\">Cada 4 semanas</option>\n                                        <option value=\"MONTHLY\">Mensual</option>\n                                        <option value=\"BIMONTHLY\">Cada 2 meses</option>\n                                        <option value=\"QUARTERLY\">Trimestral</option>\n                                        <option value=\"SEMIANNUAL\">Semestral</option>\n                                        <option value=\"ANNUAL\">Anual</option>\n                                    </select>\n                                    <div className=\"absolute inset-y-0 right-0 flex items-center px-4 pointer-events-none text-gray-500\">\n                                        <span className=\"material-symbols-outlined\">expand_more</span>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n\n                        {/* End Date */}\n                        {isRecurring && (\n                            <div className=\"animate-fade-in-down delay-75\">\n                                <label className=\"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2\">Fecha de Finalización (Opcional)</label>\n                                <div className=\"relative group\">\n                                    <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\n                                        <span className=\"material-symbols-outlined text-gray-400 group-focus-within:text-primary transition-colors\">event_busy</span>\n                                    </div>\n                                    <input\n                                        type=\"date\"\n                                        value={endDate}\n                                        onChange={(e) => setEndDate(e.target.value)}\n                                        min={date} // Cannot end before start\n                                        className=\"w-full pl-10 pr-4 py-3 bg-gray-50 dark:bg-[#252b36] border border-gray-200 dark:border-gray-700/50 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary focus:bg-white dark:focus:bg-[#252b36] transition-all outline-none font-medium text-gray-700 dark:text-white placeholder-gray-400\"\n                                    />\n                                    {endDate && (\n                                        <button\n                                            type=\"button\"\n                                            onClick={() => setEndDate('')}\n                                            className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-danger transition-colors\"\n                                            title=\"Limpiar fecha\"\n                                        >\n                                            <span className=\"material-symbols-outlined text-[18px]\">close</span>\n                                        </button>\n                                    )}\n                                </div>\n                            </div>\n                        )}\n\n                        {/* Footer Buttons */}\n                        <div className=\"flex gap-4 mt-4 pt-4 border-t border-gray-100 dark:border-white/5\">\n                            <button\n                                type=\"button\"\n                                onClick={finalOnClose}\n                                className=\"flex-1 py-3.5 rounded-xl border border-gray-200 dark:border-white/10 text-gray-600 dark:text-gray-300 font-bold hover:bg-gray-50 dark:hover:bg-white/5 transition-all\"\n                            >\n                                Cancelar\n                            </button>\n                            <button\n                                type=\"submit\"\n                                className=\"flex-[2] py-3.5 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold shadow-lg shadow-primary/30 transform hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2\"\n                            >\n                                <span className=\"material-symbols-outlined\">save</span>\n                                Guardar Transacción\n                            </button>\n                        </div>\n\n                    </form>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}}]
}