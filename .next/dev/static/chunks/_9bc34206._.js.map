{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/components/CreateBudgetModal.tsx"],"sourcesContent":["\"use client\";\nimport React, { useState, useEffect } from 'react';\nimport { useFinance } from '@/context/FinanceContext';\n\ninterface CreateBudgetModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function CreateBudgetModal({ isOpen, onClose }: CreateBudgetModalProps) {\n    const { categories, addBudget, ledgers, activeBookId } = useFinance();\n    const [amount, setAmount] = useState('');\n    const [categoryId, setCategoryId] = useState('');\n    const [isRecurring, setIsRecurring] = useState(false);\n    const [recurrenceOption, setRecurrenceOption] = useState('MONTHLY');\n    const [endDate, setEndDate] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n\n    // Reset form when opening\n    // Close on Escape key\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.key === 'Escape' && isOpen) {\n                onClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, onClose]);\n\n    if (!isOpen) return null;\n\n    const currencySymbol = ledgers.find(l => l.id === activeBookId)?.currency || '$';\n\n    const recurrenceOptions = [\n        { label: 'Diariamente', value: 'DAILY_1' },\n        { label: 'Semanalmente', value: 'WEEKLY_1' },\n        { label: 'Cada 2 semanas', value: 'WEEKLY_2' },\n        { label: 'Cada 3 semanas', value: 'WEEKLY_3' },\n        { label: 'Cada 4 semanas', value: 'WEEKLY_4' },\n        { label: 'Mensual', value: 'MONTHLY_1' },\n        { label: 'Cada 2 meses', value: 'MONTHLY_2' },\n        { label: 'Trimestral', value: 'MONTHLY_3' },\n        { label: 'Semestral', value: 'MONTHLY_6' },\n        { label: 'Anual', value: 'YEARLY_1' },\n    ];\n\n    const handleSubmit = async () => {\n        if (!amount || !categoryId) return;\n        setIsSubmitting(true);\n\n        try {\n            let recurrenceType = 'MONTHLY';\n            let recurrenceInterval = 1;\n\n            if (isRecurring) {\n                const [type, interval] = recurrenceOption.split('_');\n                recurrenceType = type;\n                recurrenceInterval = parseInt(interval);\n            }\n\n            await addBudget({\n                amount: parseFloat(amount),\n                categoryId,\n                recurrenceType: isRecurring ? recurrenceType : undefined,\n                recurrenceInterval: isRecurring ? recurrenceInterval : undefined,\n                startDate: new Date().toISOString(), // Starts now\n                endDate: isRecurring && endDate ? endDate : undefined\n            });\n\n            onClose();\n        } catch (error) {\n            console.error(error);\n        } finally {\n            setIsSubmitting(false);\n        }\n    };\n\n    return (\n        <div\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\n            onClick={onClose}\n        >\n            <div\n                className=\"w-full max-w-lg bg-white dark:bg-[#1e293b] rounded-[2rem] shadow-2xl flex flex-col max-h-[90vh] overflow-hidden animate-scale-in border border-slate-200 dark:border-slate-700\"\n                onClick={(e) => e.stopPropagation()}\n            >\n\n                {/* Header */}\n                <header className=\"flex-none px-8 py-6 flex justify-between items-start border-b border-slate-100 dark:border-slate-800\">\n                    <div className=\"flex flex-col gap-1\">\n                        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Nuevo Presupuesto</h2>\n                        <p className=\"text-slate-500 dark:text-slate-400 text-sm\">Define un límite de gasto para una categoría.</p>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors bg-slate-50 dark:bg-slate-800 p-2 rounded-full\"\n                    >\n                        <span className=\"material-symbols-outlined text-xl\">close</span>\n                    </button>\n                </header>\n\n                {/* Body */}\n                <div className=\"flex-1 overflow-y-auto px-8 py-6 flex flex-col gap-6 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700\">\n\n                    {/* Amount */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Monto ({currencySymbol})</label>\n                        <div className=\"flex items-center rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-4 h-14 focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary transition-all\">\n                            <span className=\"text-slate-900 dark:text-white font-bold text-lg mr-2\">{currencySymbol}</span>\n                            <input\n                                value={amount}\n                                onChange={(e) => setAmount(e.target.value)}\n                                className=\"w-full bg-transparent border-none outline-none text-slate-900 dark:text-white text-2xl font-bold placeholder:text-slate-300\"\n                                placeholder=\"0.00\"\n                                type=\"number\"\n                                autoFocus\n                            />\n                        </div>\n                    </div>\n\n                    {/* Category */}\n                    <div className=\"space-y-2\">\n                        <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Categoría</label>\n                        <select\n                            value={categoryId}\n                            onChange={(e) => setCategoryId(e.target.value)}\n                            className=\"w-full h-12 px-4 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white text-sm font-semibold appearance-none cursor-pointer focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none\"\n                        >\n                            <option value=\"\">Seleccionar categoría</option>\n                            {categories.map(cat => (\n                                <option key={cat.id} value={cat.id}>{cat.name}</option>\n                            ))}\n                        </select>\n                    </div>\n\n                    {/* Recurrence Toggle */}\n                    <div className=\"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className={`p-2 rounded-lg ${isRecurring ? 'bg-primary/10 text-primary' : 'bg-slate-200 dark:bg-slate-700 text-slate-500'}`}>\n                                <span className=\"material-symbols-outlined\">update</span>\n                            </div>\n                            <div className=\"flex flex-col\">\n                                <span className=\"text-sm font-bold text-slate-900 dark:text-white\">Repetir Presupuesto</span>\n                                <span className=\"text-xs text-slate-500\">Renovar automáticamente</span>\n                            </div>\n                        </div>\n                        <div\n                            onClick={() => setIsRecurring(!isRecurring)}\n                            className={`w-11 h-6 rounded-full p-1 cursor-pointer transition-colors ${isRecurring ? 'bg-primary' : 'bg-slate-300 dark:bg-slate-600'}`}\n                        >\n                            <div className={`size-4 bg-white rounded-full shadow-sm transition-transform ${isRecurring ? 'translate-x-5' : ''}`} />\n                        </div>\n                    </div>\n\n                    {/* Recurrence Options */}\n                    {isRecurring && (\n                        <div className=\"space-y-4 animate-slide-down pl-2 border-l-2 border-primary/20 ml-4 py-2\">\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Frecuencia</label>\n                                <select\n                                    value={recurrenceOption}\n                                    onChange={(e) => setRecurrenceOption(e.target.value)}\n                                    className=\"w-full h-10 px-3 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-medium focus:ring-2 focus:ring-primary/20 outline-none\"\n                                >\n                                    {recurrenceOptions.map(opt => (\n                                        <option key={opt.value} value={opt.value}>{opt.label}</option>\n                                    ))}\n                                </select>\n                            </div>\n\n                            <div className=\"space-y-2\">\n                                <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Fecha de Finalización (Opcional)</label>\n                                <input\n                                    type=\"date\"\n                                    value={endDate}\n                                    onChange={(e) => setEndDate(e.target.value)}\n                                    className=\"w-full h-10 px-3 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-medium focus:ring-2 focus:ring-primary/20 outline-none text-slate-900 dark:text-white\"\n                                />\n                            </div>\n                        </div>\n                    )}\n                </div>\n\n                {/* Footer */}\n                <footer className=\"flex-none px-8 py-5 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\n                    <button\n                        onClick={onClose}\n                        className=\"px-5 py-2.5 rounded-xl text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 font-bold text-sm transition-colors\"\n                    >\n                        Cancelar\n                    </button>\n                    <button\n                        onClick={handleSubmit}\n                        disabled={!amount || !categoryId || isSubmitting}\n                        className=\"px-6 py-2.5 rounded-xl bg-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold text-sm shadow-md shadow-blue-500/20 transition-all flex items-center gap-2 active:scale-95\"\n                    >\n                        {isSubmitting ? (\n                            <span className=\"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\n                        ) : (\n                            <span className=\"material-symbols-outlined text-[18px]\">check</span>\n                        )}\n                        Crear Presupuesto\n                    </button>\n                </footer>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 489, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/components/DateRangeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useMemo, useLayoutEffect } from 'react';\nimport { DayPicker, DateRange } from 'react-day-picker';\nimport { format, startOfDay, endOfDay, subDays, startOfMonth, endOfMonth, subMonths, addMonths } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport 'react-day-picker/dist/style.css';\n\ninterface DateRangeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onApply: (start: Date, end: Date) => void;\n    initialStartDate?: Date | null;\n    initialEndDate?: Date | null;\n}\n\ninterface QuickRange {\n    label: string;\n    description?: string;\n    getRange: () => { from: Date; to: Date };\n}\n\nconst quickRanges: QuickRange[] = [\n    {\n        label: 'Hoy',\n        getRange: () => {\n            const today = new Date();\n            return { from: startOfDay(today), to: endOfDay(today) };\n        }\n    },\n    {\n        label: 'Ayer',\n        getRange: () => {\n            const yesterday = subDays(new Date(), 1);\n            return { from: startOfDay(yesterday), to: endOfDay(yesterday) };\n        }\n    },\n    {\n        label: 'Últimos 7 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 6)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Últimos 30 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 29)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Este mes',\n        getRange: () => ({\n            from: startOfMonth(new Date()),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Mes pasado',\n        getRange: () => {\n            const reference = subMonths(new Date(), 1);\n            return {\n                from: startOfMonth(reference),\n                to: endOfMonth(reference)\n            };\n        }\n    },\n    {\n        label: 'Últimos 3 meses',\n        getRange: () => ({\n            from: startOfMonth(subMonths(new Date(), 2)),\n            to: endOfDay(new Date())\n        })\n    }\n];\n\nconst monthNames = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];\n\nexport const DateRangeModal: React.FC<DateRangeModalProps> = ({ isOpen, onClose, onApply, initialStartDate, initialEndDate }) => {\n    const [range, setRange] = useState<DateRange | undefined>({\n        from: initialStartDate || undefined,\n        to: initialEndDate || undefined\n    });\n    const [activePreset, setActivePreset] = useState<string | null>(null);\n    const [leftMonth, setLeftMonth] = useState<Date>(() => startOfMonth(initialStartDate || new Date()));\n    const [rightMonth, setRightMonth] = useState<Date>(() => addMonths(startOfMonth(initialStartDate || new Date()), 1));\n    const [isMounted, setIsMounted] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n\n    const syncCalendarMonths = (fromDate?: Date | null, toDate?: Date | null) => {\n        const baseLeft = startOfMonth(fromDate || new Date());\n        let baseRight = toDate ? startOfMonth(toDate) : addMonths(baseLeft, 1);\n        if (baseRight <= baseLeft) {\n            baseRight = addMonths(baseLeft, 1);\n        }\n        setLeftMonth(baseLeft);\n        setRightMonth(baseRight);\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setRange({\n                from: initialStartDate || undefined,\n                to: initialEndDate || undefined\n            });\n            setActivePreset(null);\n            syncCalendarMonths(initialStartDate || undefined, initialEndDate || undefined);\n        }\n    }, [isOpen, initialStartDate, initialEndDate]);\n\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'Escape') {\n                onClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, onClose]);\n\n    useLayoutEffect(() => {\n        if (isOpen) {\n            setIsMounted(true);\n            const raf = requestAnimationFrame(() => setIsVisible(true));\n            return () => cancelAnimationFrame(raf);\n        }\n\n        if (isMounted) {\n            setIsVisible(false);\n            const timeout = setTimeout(() => setIsMounted(false), 300);\n            return () => clearTimeout(timeout);\n        }\n    }, [isOpen, isMounted]);\n\n    const years = useMemo(() => {\n        const current = new Date().getFullYear();\n        return Array.from({ length: 11 }, (_, idx) => current - 5 + idx);\n    }, []);\n\n    const handleRangeSelect = (selected: DateRange | undefined) => {\n        if (!selected?.from) {\n            setRange(undefined);\n            return;\n        }\n\n        if (!selected.to) {\n            setRange({ from: selected.from, to: undefined });\n            syncCalendarMonths(selected.from, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        const start = startOfDay(selected.from);\n        const end = endOfDay(selected.to);\n\n        if (end < start) {\n            setRange({ from: end, to: undefined });\n            syncCalendarMonths(end, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        setRange({ from: start, to: end });\n        syncCalendarMonths(start, end);\n        setActivePreset(null);\n    };\n\n    const handlePresetClick = (preset: QuickRange) => {\n        const presetRange = preset.getRange();\n        setRange(presetRange);\n        setActivePreset(preset.label);\n        syncCalendarMonths(presetRange.from, presetRange.to);\n    };\n\n    const handleApply = () => {\n        if (range?.from && range?.to) {\n            onApply(range.from, range.to);\n            onClose();\n        }\n    };\n\n    const formattedRange = useMemo(() => {\n        if (!range?.from || !range?.to) return 'Selecciona un rango';\n        return `${format(range.from, \"d MMM, yyyy\", { locale: es })} - ${format(range.to, \"d MMM, yyyy\", { locale: es })}`;\n    }, [range]);\n\n    if (!isMounted) return null;\n\n    const handleLeftMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        setLeftMonth(normalized);\n        if (rightMonth <= normalized) {\n            setRightMonth(addMonths(normalized, 1));\n        }\n    };\n\n    const handleRightMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        if (normalized <= leftMonth) {\n            setRightMonth(addMonths(leftMonth, 1));\n            return;\n        }\n        setRightMonth(normalized);\n    };\n\n    const MonthControls = ({\n        month,\n        onChange,\n        disablePrev,\n        disableNext\n    }: {\n        month: Date;\n        onChange: (date: Date) => void;\n        disablePrev?: boolean;\n        disableNext?: boolean;\n    }) => (\n        <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n                <select\n                    value={month.getMonth()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setMonth(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {monthNames.map((name, idx) => (\n                        <option key={name} value={idx}>\n                            {name.charAt(0).toUpperCase() + name.slice(1)}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    value={month.getFullYear()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setFullYear(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {years.map((year) => (\n                        <option key={year} value={year}>\n                            {year}\n                        </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"flex items-center gap-1 text-primary\">\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, -1))}\n                    disabled={disablePrev}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_left</span>\n                </button>\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, 1))}\n                    disabled={disableNext}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_right</span>\n                </button>\n            </div>\n        </div>\n    );\n\n    return (\n        <div\n            className={`fixed inset-0 z-[120] flex transition-opacity duration-400 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100' : 'opacity-0'}`}\n            onClick={onClose}\n        >\n            <div\n                className=\"hidden lg:block h-full\"\n                style={{ width: 'var(--sidebar-width, 280px)' }}\n            />\n            <div\n                className={`flex-1 w-full relative flex items-center justify-center bg-slate-900/35 p-3 sm:p-4 transition-[opacity,backdrop-filter] duration-300 ease-out ${isVisible ? 'opacity-100 backdrop-blur-md' : 'opacity-0 backdrop-blur-none'}`}\n            >\n                <div\n                    className={`date-range-modal w-full max-w-5xl bg-white dark:bg-[#101828] rounded-[28px] shadow-2xl border border-slate-200/80 dark:border-white/10 p-4 sm:p-5 transition-all duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-8'}`}\n                    onClick={(e) => e.stopPropagation()}\n                >\n                    <div className=\"flex items-start justify-between gap-3 mb-4\">\n                        <h3 className=\"text-base font-black text-slate-900 dark:text-white\">Seleccionar Rango</h3>\n                        <button\n                            onClick={onClose}\n                            className=\"size-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:text-primary hover:bg-primary/10 transition-colors dark:bg-white/10 dark:text-white\"\n                        >\n                            <span className=\"material-symbols-outlined text-lg\">close</span>\n                        </button>\n                    </div>\n\n                    <div className=\"flex flex-col lg:flex-row gap-4\">\n                        <aside className=\"flex flex-col gap-2 w-full lg:w-56\">\n                            <p className=\"text-[9px] font-semibold text-slate-500 uppercase tracking-wide\">Rangos rápidos</p>\n                            <div className=\"grid grid-cols-2 lg:grid-cols-1 gap-2\">\n                                {quickRanges.map((preset) => {\n                                    const isActive = activePreset === preset.label;\n                                    return (\n                                        <button\n                                            key={preset.label}\n                                            onClick={() => handlePresetClick(preset)}\n                                            className={`text-left px-3 py-1.5 rounded-2xl border text-[11px] font-semibold transition-all ${\n                                                isActive\n                                                    ? 'bg-primary/10 border-primary/40 text-primary'\n                                                    : 'border-slate-200 text-slate-600 hover:border-primary/30 hover:text-primary'\n                                            }`}\n                                        >\n                                            {preset.label}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                        </aside>\n\n                        <div className=\"flex-1 overflow-hidden px-2 md:px-4\">\n                            <style>{`\n                                .date-range-modal .rdp {\n                                    --rdp-cell-size: 30px;\n                                    --rdp-accent-color: #2563eb;\n                                    --rdp-background-color: rgba(37, 99, 235, 0.12);\n                                    --rdp-range_border-radius: 999px;\n                                    margin: 0;\n                                    color: #0f172a;\n                                }\n                                .dark .date-range-modal .rdp {\n                                    color: #f8fafc;\n                                }\n                                .date-range-modal .rdp-head_cell {\n                                    color: #94a3b8;\n                                    font-weight: 600;\n                                    font-size: 0.7rem;\n                                    text-transform: uppercase;\n                                }\n                                .dark .date-range-modal .rdp-head_cell {\n                                    color: rgba(255,255,255,0.7);\n                                }\n                                .date-range-modal .rdp-day {\n                                    font-weight: 500;\n                                    font-size: 0.85rem;\n                                }\n                                .date-range-modal .rdp-day_selected:not([disabled]) {\n                                    background-color: #2563eb;\n                                    color: #fff;\n                                }\n                                .date-range-modal .rdp-day_range_middle {\n                                    background-color: rgba(37,99,235,0.12);\n                                    color: inherit;\n                                    border-radius: 999px !important;\n                                }\n                                .date-range-modal .rdp-root,\n                                .date-range-modal .rdp-months,\n                                .date-range-modal .rdp-month {\n                                    width: 100%;\n                                }\n                                .date-range-modal .rdp-caption,\n                                .date-range-modal .rdp-nav {\n                                    display: none;\n                                }\n                            `}</style>\n                            <div className=\"w-full flex flex-col md:flex-row gap-3 md:gap-6 justify-between\">\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={leftMonth}\n                                        onChange={handleLeftMonthChange}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={leftMonth}\n                                        onMonthChange={handleLeftMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={rightMonth}\n                                        onChange={handleRightMonthChange}\n                                        disablePrev={rightMonth <= addMonths(leftMonth, 1)}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={rightMonth}\n                                        onMonthChange={handleRightMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-5 border-t border-slate-100 dark:border-white/10 pt-3 flex flex-col gap-3\">\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 flex-1\">\n                                <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                                    <input\n                                        readOnly\n                                        value={range?.from ? format(range.from, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Inicio\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                    <span className=\"text-slate-400 text-xs\">-</span>\n                                    <input\n                                        readOnly\n                                        value={range?.to ? format(range.to, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Fin\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                </div>\n                                <p className=\"text-[11px] text-slate-400 dark:text-white/60\">{formattedRange}</p>\n                            </div>\n                            <div className=\"flex flex-col sm:flex-row items-center gap-2 justify-end w-full sm:w-auto\">\n                                <button onClick={onClose} className=\"px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-[11px] font-semibold hover:border-slate-300 dark:border-white/10 dark:text-white\">\n                                    Cancelar\n                                </button>\n                                <button\n                                    onClick={handleApply}\n                                    disabled={!range?.from || !range?.to}\n                                    className=\"px-6 py-2 rounded-xl bg-primary text-white text-[11px] font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\"\n                                >\n                                    Aplicar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1214, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/app/%28dashboard%29/budgets/page.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useMemo } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useFinance } from '@/context/FinanceContext';\nimport { Budget, Transaction } from '@/types';\nimport CreateBudgetModal from '@/components/CreateBudgetModal';\nimport { DateRangeModal } from '@/components/DateRangeModal';\nimport { startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';\n\nexport default function Budgets() {\n    const router = useRouter();\n    const { budgets, categories, transactions, formatAmount } = useFinance();\n    const [filter, setFilter] = useState<'all' | 'danger' | 'exceeded' | 'healthy'>('all');\n    const [sortBy, setSortBy] = useState('amount_desc');\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\n\n    // Date Range State\n    const [isDateModalOpen, setIsDateModalOpen] = useState(false);\n    const [dateRange, setDateRange] = useState<{ start: Date; end: Date }>({\n        start: startOfMonth(new Date()),\n        end: endOfMonth(new Date())\n    });\n\n    // Calculate real spent for each budget based on transactions\n    const calculatedBudgets = useMemo(() => {\n        return budgets.map(budget => {\n            const budgetSpent = transactions\n                .filter(t => {\n                    if (t.type !== 'EXPENSE') return false;\n                    // Filter by category\n                    // If budget has category_id, match it. \n                    // If not, match by name (legacy support)\n                    const matchesCategory = budget.category_id\n                        ? t.category_id === budget.category_id\n                        : t.category === budget.category; // fallback\n\n                    if (!matchesCategory) return false;\n\n                    // Filter by Date Range\n                    const txDate = new Date(t.date);\n                    return isWithinInterval(txDate, { start: dateRange.start, end: dateRange.end });\n                })\n                .reduce((sum, t) => sum + t.amount, 0);\n\n            return {\n                ...budget,\n                spent: budgetSpent\n            };\n        });\n    }, [budgets, transactions, dateRange]);\n\n    // Calcular métricas globales usando calculatedBudgets\n    const totalPlanned = useMemo(() => calculatedBudgets.reduce((sum, b) => sum + b.limit, 0), [calculatedBudgets]);\n    const totalSpent = useMemo(() => calculatedBudgets.reduce((sum, b) => sum + b.spent, 0), [calculatedBudgets]);\n    const totalAvailable = totalPlanned - totalSpent;\n    const availablePercent = totalPlanned > 0 ? (totalAvailable / totalPlanned) * 100 : 0;\n\n    // Categorías cerca del límite (alertas)\n    const alertsCount = useMemo(() => calculatedBudgets.filter(b => (b.spent / b.limit) >= 0.9).length, [calculatedBudgets]);\n\n    // Lógica de filtrado y ordenación\n    const filteredBudgets = useMemo(() => {\n        let result = calculatedBudgets.filter(b => {\n            const ratio = b.limit > 0 ? b.spent / b.limit : 0;\n            if (filter === 'danger') return ratio >= 0.9 && ratio < 1;\n            if (filter === 'exceeded') return ratio >= 1;\n            if (filter === 'healthy') return ratio < 0.9;\n            return true;\n        });\n\n        return result.sort((a, b) => {\n            if (sortBy === 'amount_desc') return b.limit - a.limit;\n            if (sortBy === 'amount_asc') return a.limit - b.limit;\n            if (sortBy === 'name') {\n                // Client-side lookup for sorting if needed, but 'category' field is present from context mapping (Loading...)\n                // We can look up here or just use what we have. \n                // Context returns 'Loading...' but Page maps it. \n                // Let's rely on the ID match logic inside the render for display, \n                // but for sorting we might need the name.\n                // Ideally calculatedBudgets should include the resolved name.\n                // For now, let's leave as is, sorting might be slightly off until mapped.\n                return a.category.localeCompare(b.category);\n            }\n            return 0;\n        });\n    }, [calculatedBudgets, filter, sortBy]);\n\n    const getStatusInfo = (spent: number, limit: number) => {\n        const ratio = limit > 0 ? spent / limit : 0;\n        if (ratio >= 1) return { label: 'Excedido', colorClass: 'text-danger', bgClass: 'bg-red-50 dark:bg-red-900/20', borderClass: 'border-l-danger', barClass: 'bg-danger' };\n        if (ratio >= 0.9) return { label: 'Cuidado', colorClass: 'text-warning', bgClass: 'bg-orange-50 dark:bg-orange-900/20', borderClass: 'border-l-warning', barClass: 'bg-warning' };\n        return { label: 'Normal', colorClass: 'text-primary', bgClass: 'bg-blue-50 dark:bg-blue-900/20', borderClass: 'border-l-primary', barClass: 'bg-primary' };\n    };\n\n    const getIcon = (category: string) => {\n        const cat = category.toLowerCase();\n        if (cat.includes('super')) return 'shopping_cart';\n        if (cat.includes('transporte')) return 'directions_bus';\n        if (cat.includes('entretenimiento')) return 'local_activity';\n        if (cat.includes('ropa')) return 'checkroom';\n        if (cat.includes('restaurante')) return 'restaurant';\n        if (cat.includes('mascota')) return 'pets';\n        return 'payments';\n    };\n\n    return (\n        <div className=\"flex-1 flex flex-col h-full overflow-y-auto overflow-x-hidden relative scrollbar-hide pb-24\">\n            {/* Background Decor */}\n            <div className=\"fixed inset-0 -z-10 pointer-events-none opacity-40 dark:opacity-10\">\n                <div className=\"absolute top-0 left-0 w-[500px] h-[500px] bg-blue-100 rounded-full blur-[120px]\"></div>\n                <div className=\"absolute bottom-0 right-0 w-[500px] h-[500px] bg-indigo-100 rounded-full blur-[120px]\"></div>\n            </div>\n\n            <div className=\"container mx-auto max-w-[1200px] p-6 lg:p-10 flex flex-col gap-8\">\n                {/* Page Header */}\n                <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 animate-fade-in\">\n                    <div className=\"flex flex-col gap-1\">\n                        <h1 className=\"text-3xl lg:text-4xl font-black tracking-tight text-[#111418] dark:text-white\">Presupuestos</h1>\n                        <p className=\"text-gray-500 dark:text-gray-400 text-lg font-normal capitalize\">\n                            Planificación de {dateRange.start.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\n                        </p>\n                    </div>\n                    <div className=\"flex flex-col sm:flex-row gap-3 w-full md:w-auto\">\n                        <button\n                            onClick={() => setIsDateModalOpen(true)}\n                            className=\"flex items-center gap-2 px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 font-medium text-sm hover:border-primary hover:text-primary transition-colors h-12\"\n                        >\n                            <span className=\"material-symbols-outlined text-[20px]\">calendar_month</span>\n                            <span>{dateRange.start.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })} - {dateRange.end.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })}</span>\n                        </button>\n\n                        <button\n                            onClick={() => setIsCreateModalOpen(true)}\n                            className=\"flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 h-12\"\n                        >\n                            <span className=\"material-symbols-outlined text-[20px]\">add</span>\n                            <span className=\"text-sm\">Nuevo Presupuesto</span>\n                        </button>\n                    </div>\n                </header>\n\n                {/* Summary Stats */}\n                <section className=\"grid grid-cols-1 md:grid-cols-3 gap-5 animate-fade-in\" style={{ animationDelay: '0.1s' }}>\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-primary\">\n                                <span className=\"material-symbols-outlined\">assignment</span>\n                            </div>\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Total Planeado</span>\n                        </div>\n                        <div>\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{formatAmount(totalPlanned)}</h3>\n                            <p className=\"text-sm text-gray-500 mt-1\">Suma de todas las categorías</p>\n                        </div>\n                    </div>\n\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"p-2 bg-green-50 dark:bg-green-900/30 rounded-lg text-emerald-600\">\n                                <span className=\"material-symbols-outlined\">savings</span>\n                            </div>\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Disponible</span>\n                        </div>\n                        <div>\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{formatAmount(totalAvailable)}</h3>\n                            <p className=\"text-sm text-emerald-600 mt-1 font-medium flex items-center gap-1\">\n                                <span className=\"material-symbols-outlined text-sm\">trending_up</span>\n                                {availablePercent.toFixed(0)}% Restante del mes\n                            </p>\n                        </div>\n                    </div>\n\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300 relative overflow-hidden\">\n                        <div className=\"absolute -right-4 -top-4 w-20 h-20 bg-orange-100 dark:bg-orange-900/20 rounded-full blur-2xl\"></div>\n                        <div className=\"flex items-center justify-between relative z-10\">\n                            <div className=\"p-2 bg-orange-50 dark:bg-orange-900/30 rounded-lg text-orange-500\">\n                                <span className=\"material-symbols-outlined\">notifications_active</span>\n                            </div>\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Alertas</span>\n                        </div>\n                        <div className=\"relative z-10\">\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{alertsCount}</h3>\n                            <p className=\"text-sm text-gray-500 mt-1\">Categorías en alerta</p>\n                        </div>\n                    </div>\n                </section>\n\n                {/* Filters */}\n                <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 py-2 animate-fade-in\" style={{ animationDelay: '0.15s' }}>\n                    <div className=\"flex gap-2 overflow-x-auto w-full sm:w-auto pb-2 sm:pb-0 scrollbar-hide\">\n                        {[\n                            { id: 'all', label: 'Todos' },\n                            { id: 'danger', label: 'En Peligro' },\n                            { id: 'exceeded', label: 'Excedidos' },\n                            { id: 'healthy', label: 'Saludables' }\n                        ].map(btn => (\n                            <button\n                                key={btn.id}\n                                onClick={() => setFilter(btn.id as any)}\n                                className={`px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${filter === btn.id\n                                    ? 'bg-[#111418] text-white shadow-md'\n                                    : 'glass-panel text-gray-600 dark:text-gray-300 hover:bg-white hover:text-primary'\n                                    }`}\n                            >\n                                {btn.label}\n                            </button>\n                        ))}\n                    </div>\n                    <div className=\"flex items-center gap-2 w-full sm:w-auto text-gray-500 text-sm\">\n                        <span className=\"hidden sm:inline\">Ordenar por:</span>\n                        <select\n                            value={sortBy}\n                            onChange={(e) => setSortBy(e.target.value)}\n                            className=\"bg-transparent font-medium text-gray-700 dark:text-gray-300 focus:outline-none cursor-pointer border-none p-0\"\n                        >\n                            <option value=\"amount_desc\">Mayor monto</option>\n                            <option value=\"amount_asc\">Menor monto</option>\n                            <option value=\"name\">Nombre</option>\n                        </select>\n                    </div>\n                </div>\n\n                {/* Budgets Grid */}\n                <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in\" style={{ animationDelay: '0.2s' }}>\n                    {filteredBudgets.map((budget) => {\n                        const percentage = Math.min((budget.spent / budget.limit) * 100, 100);\n                        const status = getStatusInfo(budget.spent, budget.limit);\n                        const remaining = budget.limit - budget.spent;\n\n                        // Client-side category lookup\n                        const categoryObj = categories.find(c => c.id === budget.category_id);\n                        const displayCategory = categoryObj ? categoryObj.name : (budget.category || 'Sin categoría');\n                        const displayIcon = categoryObj?.icon || getIcon(displayCategory);\n\n                        return (\n                            <div\n                                key={budget.id}\n                                onClick={() => router.push(`/budget/${budget.id}`)}\n                                className={`glass-panel rounded-2xl p-5 shadow-glass hover:shadow-xl transition-all duration-300 group cursor-pointer border-l-4 border-l-transparent hover:${status.borderClass}`}\n                            >\n                                <div className=\"flex justify-between items-start mb-4\">\n                                    <div className=\"flex items-center gap-3\">\n                                        <div className={`size-10 rounded-full flex items-center justify-center ${status.bgClass} ${status.colorClass}`}>\n                                            <span className=\"material-symbols-outlined\">{displayIcon}</span>\n                                        </div>\n                                        <div>\n                                            <h4 className=\"font-bold text-gray-900 dark:text-white\">{displayCategory}</h4>\n                                            <span className=\"text-xs text-gray-500\">Mensual</span>\n                                        </div>\n                                    </div>\n                                    <span className={`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${status.bgClass} ${status.colorClass}`}>\n                                        {status.label}\n                                    </span>\n                                </div>\n                                <div className=\"flex flex-col gap-2\">\n                                    <div className=\"flex justify-between items-end\">\n                                        <span className=\"text-2xl font-bold text-gray-900 dark:text-white\">{formatAmount(budget.spent)}</span>\n                                        <span className=\"text-sm font-medium text-gray-500 mb-1\">de {formatAmount(budget.limit)}</span>\n                                    </div>\n                                    <div className=\"h-3 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden relative\">\n                                        {/* Background faint bar for exceeded state */}\n                                        {percentage >= 100 && <div className=\"absolute inset-0 bg-red-400 opacity-20\"></div>}\n                                        <div\n                                            className={`h-full rounded-full transition-all duration-1000 ease-out ${status.barClass}`}\n                                            style={{ width: `${percentage}%` }}\n                                        ></div>\n                                    </div>\n                                    <div className=\"flex justify-between text-xs text-gray-400 mt-1\">\n                                        <span>{percentage.toFixed(0)}% gastado</span>\n                                        <span className={`font-medium ${remaining < 0 ? 'text-danger' : remaining < (budget.limit * 0.1) ? 'text-orange-500' : ''}`}>\n                                            {remaining < 0 ? `+${formatAmount(Math.abs(remaining))} sobre límite` : `${formatAmount(remaining)} restante`}\n                                        </span>\n                                    </div>\n                                </div>\n                            </div>\n                        );\n                    })}\n\n                    {/* Add New Placeholder Card */}\n                    <div\n                        onClick={() => setIsCreateModalOpen(true)}\n                        className=\"w-full border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl p-8 flex flex-col items-center justify-center gap-4 text-gray-400 hover:text-primary hover:border-primary hover:bg-white/50 dark:hover:bg-slate-800/20 transition-all cursor-pointer group min-h-[160px]\"\n                    >\n                        <div className=\"size-14 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center group-hover:bg-primary/10 transition-colors\">\n                            <span className=\"material-symbols-outlined text-3xl\">add</span>\n                        </div>\n                        <p className=\"font-medium\">Crear nuevo presupuesto</p>\n                    </div>\n                </section>\n\n                <CreateBudgetModal\n                    isOpen={isCreateModalOpen}\n                    onClose={() => setIsCreateModalOpen(false)}\n                />\n\n                <DateRangeModal\n                    isOpen={isDateModalOpen}\n                    onClose={() => setIsDateModalOpen(false)}\n                    initialStartDate={dateRange.start}\n                    initialEndDate={dateRange.end}\n                    onApply={(start, end) => setDateRange({ start, end })}\n                />\n\n                {filteredBudgets.length === 0 && (\n                    <div className=\"py-20 text-center opacity-40\">\n                        <span className=\"material-symbols-outlined text-6xl mb-4\">search_off</span>\n                        <p className=\"font-medium\">No se encontraron presupuestos con este filtro.</p>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}