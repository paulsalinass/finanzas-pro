{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/transaction-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function resetAndSeedTransactions(bookId: string) {\r\n    const supabase = await createClient()\r\n\r\n    // 1. Delete all transactions for this book\r\n    const { error: deleteError } = await supabase.from('transactions').delete().eq('book_id', bookId)\r\n    if (deleteError) return { error: 'Error deleting transactions: ' + deleteError.message }\r\n\r\n    // 2. Fetch available resources\r\n    const { data: categories } = await supabase.from('categories').select('id, name').eq('book_id', bookId)\r\n    const { data: accounts } = await supabase.from('accounts').select('id, name').eq('book_id', bookId)\r\n\r\n    if (!categories || categories.length === 0) return { error: 'No hay categorías disponibles para crear transacciones.' }\r\n    if (!accounts || accounts.length === 0) return { error: 'No hay cuentas disponibles. Crea una cuenta primero.' }\r\n\r\n    // 3. Generate Data\r\n    const transactions = []\r\n    const now = new Date()\r\n\r\n    // Helper to get random item\r\n    const getRand = (arr: any[]) => arr[Math.floor(Math.random() * arr.length)]\r\n\r\n    // 2 Incomes\r\n    for (let i = 0; i < 2; i++) {\r\n        transactions.push({\r\n            book_id: bookId,\r\n            account_id: getRand(accounts).id,\r\n            category_id: getRand(categories).id,\r\n            amount: Number((Math.random() * 4000 + 500).toFixed(2)), // 500 - 4500\r\n            type: 'INCOME',\r\n            description: `Ingreso de prueba ${i + 1}`,\r\n            occurred_at: new Date(now.getTime() - Math.random() * 1000 * 60 * 60 * 24 * 30).toISOString(), // Random time in last 30 days\r\n        })\r\n    }\r\n\r\n    // 2 Expenses\r\n    for (let i = 0; i < 2; i++) {\r\n        transactions.push({\r\n            book_id: bookId,\r\n            account_id: getRand(accounts).id,\r\n            category_id: getRand(categories).id,\r\n            amount: Number((Math.random() * 200 + 10).toFixed(2)), // 10 - 210\r\n            type: 'EXPENSE',\r\n            description: `Gasto de prueba ${i + 1}`,\r\n            occurred_at: new Date(now.getTime() - Math.random() * 1000 * 60 * 60 * 24 * 30).toISOString(),\r\n        })\r\n    }\r\n\r\n    // 4. Insert\r\n    const { error: insertError } = await supabase.from('transactions').insert(transactions)\r\n\r\n    if (insertError) return { error: 'Error inserting generic data: ' + insertError.message }\r\n\r\n    revalidatePath('/')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,4DAAA"}},
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/CategoryIcon.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport * as Icons from \"lucide-react\";\r\n\r\nexport function CategoryIcon({ icon, className }: { icon: string, className?: string }) {\r\n    const LucideIcon = (Icons as any)[icon];\r\n    if (LucideIcon) {\r\n        return <LucideIcon className={className} />;\r\n    }\r\n    return <span className={`material-symbols-outlined ${className} !text-[inherit]`}>{icon}</span>\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AAHA;;;AAKO,SAAS,aAAa,EAAE,IAAI,EAAE,SAAS,EAAwC;IAClF,MAAM,aAAa,AAAC,oKAAa,CAAC,KAAK;IACvC,IAAI,YAAY;QACZ,qBAAO,6LAAC;YAAW,WAAW;;;;;;IAClC;IACA,qBAAO,6LAAC;QAAK,WAAW,CAAC,0BAA0B,EAAE,UAAU,gBAAgB,CAAC;kBAAG;;;;;;AACvF;KANgB"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/DateRangeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useMemo, useLayoutEffect } from 'react';\nimport { DayPicker, DateRange } from 'react-day-picker';\nimport { format, startOfDay, endOfDay, subDays, startOfMonth, endOfMonth, subMonths, addMonths } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport 'react-day-picker/dist/style.css';\n\ninterface DateRangeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onApply: (start: Date, end: Date) => void;\n    initialStartDate?: Date | null;\n    initialEndDate?: Date | null;\n}\n\ninterface QuickRange {\n    label: string;\n    description?: string;\n    getRange: () => { from: Date; to: Date };\n}\n\nconst quickRanges: QuickRange[] = [\n    {\n        label: 'Hoy',\n        getRange: () => {\n            const today = new Date();\n            return { from: startOfDay(today), to: endOfDay(today) };\n        }\n    },\n    {\n        label: 'Ayer',\n        getRange: () => {\n            const yesterday = subDays(new Date(), 1);\n            return { from: startOfDay(yesterday), to: endOfDay(yesterday) };\n        }\n    },\n    {\n        label: 'Últimos 7 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 6)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Últimos 30 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 29)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Este mes',\n        getRange: () => ({\n            from: startOfMonth(new Date()),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Mes pasado',\n        getRange: () => {\n            const reference = subMonths(new Date(), 1);\n            return {\n                from: startOfMonth(reference),\n                to: endOfMonth(reference)\n            };\n        }\n    },\n    {\n        label: 'Últimos 3 meses',\n        getRange: () => ({\n            from: startOfMonth(subMonths(new Date(), 2)),\n            to: endOfDay(new Date())\n        })\n    }\n];\n\nconst monthNames = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];\n\nexport const DateRangeModal: React.FC<DateRangeModalProps> = ({ isOpen, onClose, onApply, initialStartDate, initialEndDate }) => {\n    const [range, setRange] = useState<DateRange | undefined>({\n        from: initialStartDate || undefined,\n        to: initialEndDate || undefined\n    });\n    const [activePreset, setActivePreset] = useState<string | null>(null);\n    const [leftMonth, setLeftMonth] = useState<Date>(() => startOfMonth(initialStartDate || new Date()));\n    const [rightMonth, setRightMonth] = useState<Date>(() => addMonths(startOfMonth(initialStartDate || new Date()), 1));\n    const [isMounted, setIsMounted] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n\n    const syncCalendarMonths = (fromDate?: Date | null, toDate?: Date | null) => {\n        const baseLeft = startOfMonth(fromDate || new Date());\n        let baseRight = toDate ? startOfMonth(toDate) : addMonths(baseLeft, 1);\n        if (baseRight <= baseLeft) {\n            baseRight = addMonths(baseLeft, 1);\n        }\n        setLeftMonth(baseLeft);\n        setRightMonth(baseRight);\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setRange({\n                from: initialStartDate || undefined,\n                to: initialEndDate || undefined\n            });\n            setActivePreset(null);\n            syncCalendarMonths(initialStartDate || undefined, initialEndDate || undefined);\n        }\n    }, [isOpen, initialStartDate, initialEndDate]);\n\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'Escape') {\n                onClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, onClose]);\n\n    useLayoutEffect(() => {\n        if (isOpen) {\n            setIsMounted(true);\n            const raf = requestAnimationFrame(() => setIsVisible(true));\n            return () => cancelAnimationFrame(raf);\n        }\n\n        if (isMounted) {\n            setIsVisible(false);\n            const timeout = setTimeout(() => setIsMounted(false), 300);\n            return () => clearTimeout(timeout);\n        }\n    }, [isOpen, isMounted]);\n\n    const years = useMemo(() => {\n        const current = new Date().getFullYear();\n        return Array.from({ length: 11 }, (_, idx) => current - 5 + idx);\n    }, []);\n\n    const handleRangeSelect = (selected: DateRange | undefined) => {\n        if (!selected?.from) {\n            setRange(undefined);\n            return;\n        }\n\n        if (!selected.to) {\n            setRange({ from: selected.from, to: undefined });\n            syncCalendarMonths(selected.from, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        const start = startOfDay(selected.from);\n        const end = endOfDay(selected.to);\n\n        if (end < start) {\n            setRange({ from: end, to: undefined });\n            syncCalendarMonths(end, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        setRange({ from: start, to: end });\n        syncCalendarMonths(start, end);\n        setActivePreset(null);\n    };\n\n    const handlePresetClick = (preset: QuickRange) => {\n        const presetRange = preset.getRange();\n        setRange(presetRange);\n        setActivePreset(preset.label);\n        syncCalendarMonths(presetRange.from, presetRange.to);\n    };\n\n    const handleApply = () => {\n        if (range?.from && range?.to) {\n            onApply(range.from, range.to);\n            onClose();\n        }\n    };\n\n    const formattedRange = useMemo(() => {\n        if (!range?.from || !range?.to) return 'Selecciona un rango';\n        return `${format(range.from, \"d MMM, yyyy\", { locale: es })} - ${format(range.to, \"d MMM, yyyy\", { locale: es })}`;\n    }, [range]);\n\n    if (!isMounted) return null;\n\n    const handleLeftMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        setLeftMonth(normalized);\n        if (rightMonth <= normalized) {\n            setRightMonth(addMonths(normalized, 1));\n        }\n    };\n\n    const handleRightMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        if (normalized <= leftMonth) {\n            setRightMonth(addMonths(leftMonth, 1));\n            return;\n        }\n        setRightMonth(normalized);\n    };\n\n    const MonthControls = ({\n        month,\n        onChange,\n        disablePrev,\n        disableNext\n    }: {\n        month: Date;\n        onChange: (date: Date) => void;\n        disablePrev?: boolean;\n        disableNext?: boolean;\n    }) => (\n        <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n                <select\n                    value={month.getMonth()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setMonth(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {monthNames.map((name, idx) => (\n                        <option key={name} value={idx}>\n                            {name.charAt(0).toUpperCase() + name.slice(1)}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    value={month.getFullYear()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setFullYear(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {years.map((year) => (\n                        <option key={year} value={year}>\n                            {year}\n                        </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"flex items-center gap-1 text-primary\">\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, -1))}\n                    disabled={disablePrev}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_left</span>\n                </button>\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, 1))}\n                    disabled={disableNext}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_right</span>\n                </button>\n            </div>\n        </div>\n    );\n\n    return (\n        <div\n            className={`fixed inset-0 z-[120] flex transition-opacity duration-400 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100' : 'opacity-0'}`}\n            onClick={onClose}\n        >\n            <div\n                className=\"hidden lg:block h-full\"\n                style={{ width: 'var(--sidebar-width, 280px)' }}\n            />\n            <div\n                className={`flex-1 w-full relative flex items-center justify-center bg-slate-900/35 p-3 sm:p-4 transition-[opacity,backdrop-filter] duration-300 ease-out ${isVisible ? 'opacity-100 backdrop-blur-md' : 'opacity-0 backdrop-blur-none'}`}\n            >\n                <div\n                    className={`date-range-modal w-full max-w-5xl bg-white dark:bg-[#101828] rounded-[28px] shadow-2xl border border-slate-200/80 dark:border-white/10 p-4 sm:p-5 transition-all duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-8'}`}\n                    onClick={(e) => e.stopPropagation()}\n                >\n                    <div className=\"flex items-start justify-between gap-3 mb-4\">\n                        <h3 className=\"text-base font-black text-slate-900 dark:text-white\">Seleccionar Rango</h3>\n                        <button\n                            onClick={onClose}\n                            className=\"size-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:text-primary hover:bg-primary/10 transition-colors dark:bg-white/10 dark:text-white\"\n                        >\n                            <span className=\"material-symbols-outlined text-lg\">close</span>\n                        </button>\n                    </div>\n\n                    <div className=\"flex flex-col lg:flex-row gap-4\">\n                        <aside className=\"flex flex-col gap-2 w-full lg:w-56\">\n                            <p className=\"text-[9px] font-semibold text-slate-500 uppercase tracking-wide\">Rangos rápidos</p>\n                            <div className=\"grid grid-cols-2 lg:grid-cols-1 gap-2\">\n                                {quickRanges.map((preset) => {\n                                    const isActive = activePreset === preset.label;\n                                    return (\n                                        <button\n                                            key={preset.label}\n                                            onClick={() => handlePresetClick(preset)}\n                                            className={`text-left px-3 py-1.5 rounded-2xl border text-[11px] font-semibold transition-all ${\n                                                isActive\n                                                    ? 'bg-primary/10 border-primary/40 text-primary'\n                                                    : 'border-slate-200 text-slate-600 hover:border-primary/30 hover:text-primary'\n                                            }`}\n                                        >\n                                            {preset.label}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                        </aside>\n\n                        <div className=\"flex-1 overflow-hidden px-2 md:px-4\">\n                            <style>{`\n                                .date-range-modal .rdp {\n                                    --rdp-cell-size: 30px;\n                                    --rdp-accent-color: #2563eb;\n                                    --rdp-background-color: rgba(37, 99, 235, 0.12);\n                                    --rdp-range_border-radius: 999px;\n                                    margin: 0;\n                                    color: #0f172a;\n                                }\n                                .dark .date-range-modal .rdp {\n                                    color: #f8fafc;\n                                }\n                                .date-range-modal .rdp-head_cell {\n                                    color: #94a3b8;\n                                    font-weight: 600;\n                                    font-size: 0.7rem;\n                                    text-transform: uppercase;\n                                }\n                                .dark .date-range-modal .rdp-head_cell {\n                                    color: rgba(255,255,255,0.7);\n                                }\n                                .date-range-modal .rdp-day {\n                                    font-weight: 500;\n                                    font-size: 0.85rem;\n                                }\n                                .date-range-modal .rdp-day_selected:not([disabled]) {\n                                    background-color: #2563eb;\n                                    color: #fff;\n                                }\n                                .date-range-modal .rdp-day_range_middle {\n                                    background-color: rgba(37,99,235,0.12);\n                                    color: inherit;\n                                    border-radius: 999px !important;\n                                }\n                                .date-range-modal .rdp-root,\n                                .date-range-modal .rdp-months,\n                                .date-range-modal .rdp-month {\n                                    width: 100%;\n                                }\n                                .date-range-modal .rdp-caption,\n                                .date-range-modal .rdp-nav {\n                                    display: none;\n                                }\n                            `}</style>\n                            <div className=\"w-full flex flex-col md:flex-row gap-3 md:gap-6 justify-between\">\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={leftMonth}\n                                        onChange={handleLeftMonthChange}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={leftMonth}\n                                        onMonthChange={handleLeftMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={rightMonth}\n                                        onChange={handleRightMonthChange}\n                                        disablePrev={rightMonth <= addMonths(leftMonth, 1)}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={rightMonth}\n                                        onMonthChange={handleRightMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-5 border-t border-slate-100 dark:border-white/10 pt-3 flex flex-col gap-3\">\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 flex-1\">\n                                <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                                    <input\n                                        readOnly\n                                        value={range?.from ? format(range.from, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Inicio\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                    <span className=\"text-slate-400 text-xs\">-</span>\n                                    <input\n                                        readOnly\n                                        value={range?.to ? format(range.to, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Fin\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                </div>\n                                <p className=\"text-[11px] text-slate-400 dark:text-white/60\">{formattedRange}</p>\n                            </div>\n                            <div className=\"flex flex-col sm:flex-row items-center gap-2 justify-end w-full sm:w-auto\">\n                                <button onClick={onClose} className=\"px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-[11px] font-semibold hover:border-slate-300 dark:border-white/10 dark:text-white\">\n                                    Cancelar\n                                </button>\n                                <button\n                                    onClick={handleApply}\n                                    disabled={!range?.from || !range?.to}\n                                    className=\"px-6 py-2 rounded-xl bg-primary text-white text-[11px] font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\"\n                                >\n                                    Aplicar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 785, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/TransactionDetailsModal.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from 'react';\r\nimport { Transaction } from '@/types';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { format } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\nimport { CategoryIcon } from './CategoryIcon';\r\n\r\nconst COLOR_MAP: Record<string, { bg: string, text: string, ring: string, border: string }> = {\r\n    red: { bg: 'bg-red-100 dark:bg-red-900/30', text: 'text-red-600 dark:text-red-400', ring: 'ring-red-500/10', border: 'border-red-200' },\r\n    orange: { bg: 'bg-orange-100 dark:bg-orange-900/30', text: 'text-orange-600 dark:text-orange-400', ring: 'ring-orange-500/10', border: 'border-orange-200' },\r\n    amber: { bg: 'bg-amber-100 dark:bg-amber-900/30', text: 'text-amber-600 dark:text-amber-400', ring: 'ring-amber-500/10', border: 'border-amber-200' },\r\n    yellow: { bg: 'bg-yellow-100 dark:bg-yellow-900/30', text: 'text-yellow-600 dark:text-yellow-400', ring: 'ring-yellow-500/10', border: 'border-yellow-200' },\r\n    lime: { bg: 'bg-lime-100 dark:bg-lime-900/30', text: 'text-lime-600 dark:text-lime-400', ring: 'ring-lime-500/10', border: 'border-lime-200' },\r\n    green: { bg: 'bg-green-100 dark:bg-green-900/30', text: 'text-green-600 dark:text-green-400', ring: 'ring-green-500/10', border: 'border-green-200' },\r\n    emerald: { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-600 dark:text-emerald-400', ring: 'ring-emerald-500/10', border: 'border-emerald-200' },\r\n    teal: { bg: 'bg-teal-100 dark:bg-teal-900/30', text: 'text-teal-600 dark:text-teal-400', ring: 'ring-teal-500/10', border: 'border-teal-200' },\r\n    cyan: { bg: 'bg-cyan-100 dark:bg-cyan-900/30', text: 'text-cyan-600 dark:text-cyan-400', ring: 'ring-cyan-500/10', border: 'border-cyan-200' },\r\n    sky: { bg: 'bg-sky-100 dark:bg-sky-900/30', text: 'text-sky-600 dark:text-sky-400', ring: 'ring-sky-500/10', border: 'border-sky-200' },\r\n    blue: { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-600 dark:text-blue-400', ring: 'ring-blue-500/10', border: 'border-blue-200' },\r\n    indigo: { bg: 'bg-indigo-100 dark:bg-indigo-900/30', text: 'text-indigo-600 dark:text-indigo-400', ring: 'ring-indigo-500/10', border: 'border-indigo-200' },\r\n    violet: { bg: 'bg-violet-100 dark:bg-violet-900/30', text: 'text-violet-600 dark:text-violet-400', ring: 'ring-violet-500/10', border: 'border-violet-200' },\r\n    purple: { bg: 'bg-purple-100 dark:bg-purple-900/30', text: 'text-purple-600 dark:text-purple-400', ring: 'ring-purple-500/10', border: 'border-purple-200' },\r\n    fuchsia: { bg: 'bg-fuchsia-100 dark:bg-fuchsia-900/30', text: 'text-fuchsia-600 dark:text-fuchsia-400', ring: 'ring-fuchsia-500/10', border: 'border-fuchsia-200' },\r\n    pink: { bg: 'bg-pink-100 dark:bg-pink-900/30', text: 'text-pink-600 dark:text-pink-400', ring: 'ring-pink-500/10', border: 'border-pink-200' },\r\n    rose: { bg: 'bg-rose-100 dark:bg-rose-900/30', text: 'text-rose-600 dark:text-rose-400', ring: 'ring-rose-500/10', border: 'border-rose-200' },\r\n    slate: { bg: 'bg-slate-100 dark:bg-slate-800', text: 'text-slate-600 dark:text-slate-400', ring: 'ring-slate-500/10', border: 'border-slate-200' },\r\n};\r\n\r\ninterface TransactionDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    transaction: Transaction | null;\r\n    onEdit: (t: Transaction) => void;\r\n}\r\n\r\nimport { DeleteConfirmModal } from './DeleteConfirmModal';\r\n\r\nexport const TransactionDetailsModal = ({ isOpen, onClose, transaction, onEdit }: TransactionDetailsModalProps) => {\r\n    const { formatAmount, deleteTransaction, duplicateTransaction, ledgers, activeBookId, categories } = useFinance();\r\n    const [showDeleteConfirm, setShowDeleteConfirm] = React.useState(false);\r\n\r\n    // Close on Escape key\r\n    React.useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape' && isOpen) {\r\n                onClose();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [isOpen, onClose]);\r\n\r\n    if (!isOpen || !transaction) return null;\r\n\r\n    const handleDelete = async () => {\r\n        if (confirm('¿Estás seguro de eliminar esta transacción? Esta acción no se puede deshacer.')) {\r\n            await deleteTransaction(transaction.id);\r\n            onClose();\r\n        }\r\n    };\r\n\r\n    const handleDuplicate = async () => {\r\n        await duplicateTransaction(transaction.id);\r\n        onClose();\r\n    };\r\n\r\n    const activeLedger = ledgers.find(l => l.id === activeBookId);\r\n    const currency = activeLedger?.currency === 'PEN' ? 'S/' : activeLedger?.currency || '$';\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"bg-white dark:bg-[#1e2530] w-full max-w-2xl rounded-3xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n\r\n                {/* Header */}\r\n                <div className=\"flex justify-between items-center p-6 border-b border-gray-100 dark:border-white/5\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-gray-800 dark:text-white\">Detalle de Transacción</h2>\r\n                        <p className=\"text-xs text-gray-400 mt-1 uppercase tracking-wider\">ID: #{transaction.id.slice(0, 8)}</p>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-gray-100 dark:hover:bg-white/5 rounded-full transition-colors\">\r\n                        <span className=\"material-symbols-outlined text-gray-500\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Body */}\r\n                <div className=\"p-8 overflow-y-auto custom-scrollbar flex-1\">\r\n\r\n                    {/* Big Amount */}\r\n                    <div className=\"text-center mb-10\">\r\n                        <div className={`text-5xl font-black mb-2 ${transaction.type === 'INCOME' ? 'text-success' : 'text-gray-900 dark:text-white'}`}>\r\n                            {transaction.type === 'EXPENSE' ? '-' : '+'}{currency} {transaction.amount.toLocaleString('es-PE', { minimumFractionDigits: 2 })}\r\n                        </div>\r\n                        <div className=\"flex flex-wrap justify-center gap-3\">\r\n                            {/* 1. Account */}\r\n                            <span className=\"inline-flex items-center px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-700\">\r\n                                <span className=\"material-symbols-outlined text-[16px] mr-2\">account_balance</span>\r\n                                {transaction.account}\r\n                            </span>\r\n\r\n                            {/* 2. Type */}\r\n                            <span className={`inline-flex items-center px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider border ${transaction.type === 'INCOME'\r\n                                ? 'bg-emerald-50 dark:bg-emerald-900/20 text-emerald-600 dark:text-emerald-400 border-emerald-200 dark:border-emerald-800'\r\n                                : 'bg-rose-50 dark:bg-rose-900/20 text-rose-600 dark:text-rose-400 border-rose-200 dark:border-rose-800'\r\n                                }`}>\r\n                                <span className=\"material-symbols-outlined text-[16px] mr-2\">\r\n                                    {transaction.type === 'INCOME' ? 'trending_up' : 'trending_down'}\r\n                                </span>\r\n                                {transaction.type === 'INCOME' ? 'Ingreso' : 'Gasto'}\r\n                            </span>\r\n\r\n                            {/* 3. Category */}\r\n                            {(() => {\r\n                                const cat = categories.find(c => c.name === transaction.category);\r\n                                const colorKey = cat?.color || 'slate';\r\n                                const colors = COLOR_MAP[colorKey] || COLOR_MAP.slate;\r\n\r\n                                return (\r\n                                    <span className={`inline-flex items-center px-4 py-1.5 rounded-full text-xs font-bold uppercase tracking-wider border ${colors.bg} ${colors.text} ${colors.border}`}>\r\n                                        <CategoryIcon icon={cat?.icon || 'category'} className=\"text-[16px] mr-2\" />\r\n                                        {transaction.category}\r\n                                    </span>\r\n                                );\r\n                            })()}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Meta Grid */}\r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\r\n                        {/* Date/Time */}\r\n                        <div className=\"flex items-start gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-[#252b36]\">\r\n                            <div className=\"size-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400\">\r\n                                <span className=\"material-symbols-outlined\">calendar_today</span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1\">FECHA Y HORA</p>\r\n                                <p className=\"font-bold text-gray-800 dark:text-white text-lg capitalize\">\r\n                                    {format(new Date(transaction.date), \"dd MMM, yyyy\", { locale: es })}\r\n                                </p>\r\n                                <p className=\"text-sm text-gray-500\">\r\n                                    {format(new Date(transaction.date), \"h:mm a\")}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Beneficiary/Description */}\r\n                        <div className=\"flex items-start gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-[#252b36]\">\r\n                            <div className=\"size-10 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center text-purple-600 dark:text-purple-400\">\r\n                                <span className=\"material-symbols-outlined\">storefront</span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1\">BENEFICIARIO / DESCRIPCIÓN</p>\r\n                                <p className=\"font-bold text-gray-800 dark:text-white text-lg\">\r\n                                    {transaction.beneficiary || transaction.description}\r\n                                </p>\r\n                                {transaction.beneficiary && transaction.description && transaction.description !== transaction.beneficiary && (\r\n                                    <p className=\"text-sm text-gray-500\">{transaction.description}</p>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Location */}\r\n                        <div className=\"flex items-start gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-[#252b36]\">\r\n                            <div className=\"size-10 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center text-green-600 dark:text-green-400\">\r\n                                <span className=\"material-symbols-outlined\">location_on</span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1\">UBICACIÓN</p>\r\n                                <p className=\"font-bold text-gray-800 dark:text-white text-lg\">\r\n                                    {transaction.location || 'No registrada'}\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Notes */}\r\n                        <div className=\"flex items-start gap-4 p-4 rounded-2xl bg-gray-50 dark:bg-[#252b36]\">\r\n                            <div className=\"size-10 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center text-yellow-600 dark:text-yellow-400\">\r\n                                <span className=\"material-symbols-outlined\">notes</span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-gray-400 uppercase tracking-widest mb-1\">NOTAS</p>\r\n                                <p className=\"text-sm text-gray-600 dark:text-gray-300 italic\">\r\n                                    \"{transaction.notes || 'Sin notas adicionales'}\"\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Footer Timestamps */}\r\n                    <div className=\"text-xs text-gray-400 text-center mb-0\">\r\n                        {transaction.updated_at && (\r\n                            <p>Última edición: {format(new Date(transaction.updated_at), \"dd MMM yyyy 'a las' HH:mm\", { locale: es })}</p>\r\n                        )}\r\n                        {!transaction.updated_at && transaction.created_at && (\r\n                            <p>Creado: {format(new Date(transaction.created_at), \"dd MMM yyyy 'a las' HH:mm\", { locale: es })}</p>\r\n                        )}\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Footer Actions */}\r\n                <div className=\"p-6 border-t border-gray-100 dark:border-white/5 bg-gray-50 dark:bg-[#252b36]/50 flex justify-end gap-3\">\r\n                    <button\r\n                        onClick={handleDelete}\r\n                        className=\"px-5 py-2.5 rounded-xl border border-gray-200 dark:border-white/10 text-danger hover:bg-danger/10 font-bold transition-all flex items-center gap-2\"\r\n                    >\r\n                        <span className=\"material-symbols-outlined text-[18px]\">delete</span>\r\n                        Eliminar\r\n                    </button>\r\n                    <button\r\n                        onClick={handleDuplicate}\r\n                        className=\"px-5 py-2.5 rounded-xl border border-gray-200 dark:border-white/10 text-gray-700 dark:text-gray-300 hover:bg-white dark:hover:bg-white/5 font-bold transition-all flex items-center gap-2\"\r\n                    >\r\n                        <span className=\"material-symbols-outlined text-[18px]\">content_copy</span>\r\n                        Duplicar\r\n                    </button>\r\n                    <button\r\n                        onClick={() => onEdit(transaction)}\r\n                        className=\"px-5 py-2.5 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2\"\r\n                    >\r\n                        <span className=\"material-symbols-outlined text-[18px]\">edit</span>\r\n                        Editar\r\n                    </button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1458, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/transactions/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo, useTransition } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { Transaction } from '@/types';\r\nimport { resetAndSeedTransactions } from '@/app/actions/transaction-actions';\r\n\r\n\r\nimport { CategoryIcon } from '@/components/CategoryIcon';\r\nimport { DateRangeModal } from '@/components/DateRangeModal';\r\nimport { TransactionDetailsModal } from '@/components/TransactionDetailsModal';\r\nimport { TransactionModal } from '@/components/TransactionModal';\r\nimport { startOfMonth, endOfMonth, format, startOfDay, endOfDay } from 'date-fns';\r\nimport { es } from 'date-fns/locale';\r\n\r\nconst COLOR_MAP: Record<string, { bg: string, text: string, ring: string, border: string, solid: string }> = {\r\n    red: { bg: 'bg-red-100 dark:bg-red-900/30', text: 'text-red-600 dark:text-red-400', ring: 'ring-red-500/10', border: 'border-red-200', solid: 'bg-red-500' },\r\n    orange: { bg: 'bg-orange-100 dark:bg-orange-900/30', text: 'text-orange-600 dark:text-orange-400', ring: 'ring-orange-500/10', border: 'border-orange-200', solid: 'bg-orange-500' },\r\n    amber: { bg: 'bg-amber-100 dark:bg-amber-900/30', text: 'text-amber-600 dark:text-amber-400', ring: 'ring-amber-500/10', border: 'border-amber-200', solid: 'bg-amber-500' },\r\n    yellow: { bg: 'bg-yellow-100 dark:bg-yellow-900/30', text: 'text-yellow-600 dark:text-yellow-400', ring: 'ring-yellow-500/10', border: 'border-yellow-200', solid: 'bg-yellow-500' },\r\n    lime: { bg: 'bg-lime-100 dark:bg-lime-900/30', text: 'text-lime-600 dark:text-lime-400', ring: 'ring-lime-500/10', border: 'border-lime-200', solid: 'bg-lime-500' },\r\n    green: { bg: 'bg-green-100 dark:bg-green-900/30', text: 'text-green-600 dark:text-green-400', ring: 'ring-green-500/10', border: 'border-green-200', solid: 'bg-green-500' },\r\n    emerald: { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-600 dark:text-emerald-400', ring: 'ring-emerald-500/10', border: 'border-emerald-200', solid: 'bg-emerald-500' },\r\n    teal: { bg: 'bg-teal-100 dark:bg-teal-900/30', text: 'text-teal-600 dark:text-teal-400', ring: 'ring-teal-500/10', border: 'border-teal-200', solid: 'bg-teal-500' },\r\n    cyan: { bg: 'bg-cyan-100 dark:bg-cyan-900/30', text: 'text-cyan-600 dark:text-cyan-400', ring: 'ring-cyan-500/10', border: 'border-cyan-200', solid: 'bg-cyan-500' },\r\n    sky: { bg: 'bg-sky-100 dark:bg-sky-900/30', text: 'text-sky-600 dark:text-sky-400', ring: 'ring-sky-500/10', border: 'border-sky-200', solid: 'bg-sky-500' },\r\n    blue: { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-600 dark:text-blue-400', ring: 'ring-blue-500/10', border: 'border-blue-200', solid: 'bg-blue-500' },\r\n    indigo: { bg: 'bg-indigo-100 dark:bg-indigo-900/30', text: 'text-indigo-600 dark:text-indigo-400', ring: 'ring-indigo-500/10', border: 'border-indigo-200', solid: 'bg-indigo-500' },\r\n    violet: { bg: 'bg-violet-100 dark:bg-violet-900/30', text: 'text-violet-600 dark:text-violet-400', ring: 'ring-violet-500/10', border: 'border-violet-200', solid: 'bg-violet-500' },\r\n    purple: { bg: 'bg-purple-100 dark:bg-purple-900/30', text: 'text-purple-600 dark:text-purple-400', ring: 'ring-purple-500/10', border: 'border-purple-200', solid: 'bg-purple-500' },\r\n    fuchsia: { bg: 'bg-fuchsia-100 dark:bg-fuchsia-900/30', text: 'text-fuchsia-600 dark:text-fuchsia-400', ring: 'ring-fuchsia-500/10', border: 'border-fuchsia-200', solid: 'bg-fuchsia-500' },\r\n    pink: { bg: 'bg-pink-100 dark:bg-pink-900/30', text: 'text-pink-600 dark:text-pink-400', ring: 'ring-pink-500/10', border: 'border-pink-200', solid: 'bg-pink-500' },\r\n    rose: { bg: 'bg-rose-100 dark:bg-rose-900/30', text: 'text-rose-600 dark:text-rose-400', ring: 'ring-rose-500/10', border: 'border-rose-200', solid: 'bg-rose-500' },\r\n    slate: { bg: 'bg-slate-100 dark:bg-slate-800', text: 'text-slate-600 dark:text-slate-400', ring: 'ring-slate-500/10', border: 'border-slate-200', solid: 'bg-slate-500' },\r\n};\r\n\r\n\r\nexport default function Transactions() {\r\n    const router = useRouter();\r\n    const {\r\n        transactions,\r\n        categories: allCategories,\r\n        budgets,\r\n        recurringRules,\r\n        formatAmount,\r\n        openTransactionModal,\r\n        totalBalance,\r\n        activeBookId,\r\n        refreshBooks,\r\n        ledgers\r\n    } = useFinance();\r\n    const [search, setSearch] = useState('');\r\n    const [activeType, setActiveType] = useState<'ALL' | 'INCOME' | 'EXPENSE'>('ALL');\r\n    const [selectedCategories, setSelectedCategories] = useState<string[]>([]);\r\n    const [isPending, startTransition] = useTransition();\r\n    const [dateRange, setDateRange] = useState<{ start: Date | null, end: Date | null }>({\r\n        start: startOfMonth(new Date()),\r\n        end: endOfMonth(new Date())\r\n    });\r\n    const [isDateModalOpen, setIsDateModalOpen] = useState(false);\r\n    const [visibleCount, setVisibleCount] = useState(20);\r\n\r\n    // Modal States for Details/Edit\r\n    const [selectedTransaction, setSelectedTransaction] = useState<Transaction | null>(null);\r\n    const [editingTransaction, setEditingTransaction] = useState<Transaction | null>(null);\r\n\r\n    const handleDateRangeApply = (start: Date, end: Date) => {\r\n        setDateRange({ start, end });\r\n    };\r\n\r\n    // Categorías disponibles (ahora todas)\r\n    const categories = useMemo(() => {\r\n        return allCategories.map(cat => ({\r\n            name: cat.name,\r\n            icon: cat.icon || 'category',\r\n            color: cat.color // Include color\r\n        }));\r\n    }, [allCategories]);\r\n\r\n    // Lógica de filtrado\r\n    // 1. Filtrado por Fecha (Base para estadísticas y lista)\r\n    const periodTransactions = useMemo(() => {\r\n        return transactions.filter(t => {\r\n            const tDate = new Date(t.date);\r\n            return (!dateRange.start || tDate >= dateRange.start) &&\r\n                (!dateRange.end || tDate <= dateRange.end);\r\n        });\r\n    }, [transactions, dateRange]);\r\n\r\n    // 2. Filtrado para la Lista (Búsqueda, Tipo, Categorías)\r\n    const filtered = useMemo(() => {\r\n        return periodTransactions.filter(t => {\r\n            const tCategoryName = t.category || 'Uncategorized';\r\n\r\n            const matchesSearch = t.description.toLowerCase().includes(search.toLowerCase()) ||\r\n                tCategoryName.toLowerCase().includes(search.toLowerCase());\r\n            const matchesType = activeType === 'ALL' || t.type === activeType;\r\n            const matchesCategory = selectedCategories.length === 0 || selectedCategories.includes(tCategoryName);\r\n\r\n            return matchesSearch && matchesType && matchesCategory;\r\n        });\r\n    }, [periodTransactions, search, activeType, selectedCategories]);\r\n\r\n    // Agrupación por fechas\r\n    const groupedTransactions = useMemo(() => {\r\n        const groups: { [key: string]: { date: string, items: Transaction[], total: number } } = {};\r\n\r\n        filtered.slice(0, visibleCount).forEach(t => {\r\n            const dateKey = new Date(t.date).toLocaleDateString('es-ES', {\r\n                weekday: 'long',\r\n                day: 'numeric',\r\n                month: 'long'\r\n            });\r\n\r\n            if (!groups[dateKey]) {\r\n                groups[dateKey] = { date: dateKey, items: [], total: 0 };\r\n            }\r\n\r\n            groups[dateKey].items.push(t);\r\n            groups[dateKey].total += t.type === 'INCOME' ? t.amount : -t.amount;\r\n        });\r\n\r\n        return Object.values(groups);\r\n    }, [filtered, visibleCount]);\r\n\r\n    const toggleCategory = (cat: string) => {\r\n        setSelectedCategories(prev =>\r\n            prev.includes(cat) ? prev.filter(c => c !== cat) : [...prev, cat]\r\n        );\r\n    };\r\n\r\n    const handleRegenerateData = () => {\r\n        if (!activeBookId) return;\r\n        if (!confirm('¿Estás seguro? Esto eliminará TODAS las transacciones actuales y creará 10 nuevas.')) return;\r\n\r\n        startTransition(async () => {\r\n            await resetAndSeedTransactions(activeBookId);\r\n            await refreshBooks();\r\n        });\r\n    };\r\n\r\n    // Calculate totals and projections\r\n    // Calculate totals and projections based on PERIOD only (ignoring visual filters)\r\n    const stats = useMemo(() => {\r\n        // 1. Calculate Period Totals (for Available Budget - Independent of visual filters)\r\n        const periodStats = periodTransactions.reduce((acc, t) => {\r\n            if (t.type === 'EXPENSE') acc.expense += t.amount;\r\n            return acc;\r\n        }, { expense: 0 });\r\n\r\n        // 2. Calculate Visible Totals (for Cards - Affected by all filters)\r\n        const viewStats = filtered.reduce((acc, t) => {\r\n            if (t.type === 'INCOME') acc.income += t.amount;\r\n            else acc.expense += t.amount;\r\n            return acc;\r\n        }, { income: 0, expense: 0 });\r\n\r\n        // Calculate Expense Budget (Projected)\r\n        // If categories selected, sum budgets for those categories. Else sum all.\r\n        const relevantBudgets = selectedCategories.length > 0\r\n            ? budgets.filter(b => selectedCategories.includes(b.category))\r\n            : budgets;\r\n\r\n        // If no specific budget found, maybe use the general \"monthly limit\" logic or sum of all limits\r\n        const expenseProjected = relevantBudgets.length > 0\r\n            ? relevantBudgets.reduce((sum, b) => sum + b.limit, 0)\r\n            : 0;\r\n\r\n        // Calculate Income Projected\r\n        const incomeProjected = recurringRules\r\n            .filter(r => r.type === 'INCOME' && r.active)\r\n            .reduce((sum, r) => sum + r.amount, 0);\r\n\r\n        // Calculate Total Budget Limit (sum of all budget limits - Independent of visual filters for Available)\r\n        const totalBudgetLimit = budgets.reduce((sum, b) => sum + b.limit, 0);\r\n\r\n        // Calculate Available (Global Budget - Global Expenses in Period)\r\n        const availableBudget = totalBudgetLimit - periodStats.expense;\r\n\r\n        return {\r\n            income: viewStats.income,\r\n            expense: viewStats.expense,\r\n            expenseProjected,\r\n            incomeProjected,\r\n            totalBudgetLimit,\r\n            availableBudget\r\n        };\r\n    }, [periodTransactions, filtered, budgets, recurringRules, selectedCategories]);\r\n\r\n    // Helper to display currency with smaller symbol\r\n    const CurrencyDisplay = ({ amount, className = \"\" }: { amount: number, className?: string }) => {\r\n        const activeLedger = ledgers.find(l => l.id === activeBookId);\r\n        const currency = activeLedger?.currency || 'USD';\r\n        const symbol = currency === 'PEN' ? 'S/' : (currency === 'EUR' ? '€' : '$');\r\n\r\n        return (\r\n            <span className={`inline-flex items-baseline ${className}`}>\r\n                <span className=\"text-[0.6em] mr-1\">{symbol}</span>\r\n                <span>{amount.toLocaleString('en-US', { minimumFractionDigits: 2 })}</span>\r\n            </span>\r\n        );\r\n    };\r\n\r\n    const getProgress = (current: number, target: number) => {\r\n        if (target === 0) return 0;\r\n        return Math.min((current / target) * 100, 100);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-1 flex flex-col h-full overflow-hidden relative\">\r\n            {/* Background decoration */}\r\n            <div className=\"fixed inset-0 -z-10 overflow-hidden pointer-events-none\">\r\n                <div className=\"absolute -top-[10%] -right-[5%] w-[800px] h-[800px] rounded-full bg-blue-100/50 dark:bg-blue-900/10 blur-[100px] mix-blend-multiply dark:mix-blend-screen\"></div>\r\n                <div className=\"absolute top-[20%] -left-[10%] w-[600px] h-[600px] rounded-full bg-purple-100/50 dark:bg-purple-900/10 blur-[100px] mix-blend-multiply dark:mix-blend-screen\"></div>\r\n            </div>\r\n\r\n            <main className=\"flex-1 max-w-7xl mx-auto w-full p-4 lg:p-8 flex gap-8 overflow-hidden\">\r\n                {/* Internal Filter Sidebar */}\r\n                <aside className=\"hidden lg:flex flex-col w-72 shrink-0 gap-6 h-full overflow-y-auto pr-2 scrollbar-hide\">\r\n                    <div className=\"glass-card p-6 rounded-2xl border border-white/40 dark:border-slate-800\">\r\n                        <p className=\"text-sm font-medium text-slate-500 dark:text-slate-400 mb-2\">Total Disponible</p>\r\n                        <h2 className=\"text-4xl font-black text-slate-800 dark:text-white tracking-tight\">\r\n                            <CurrencyDisplay amount={stats.availableBudget} />\r\n                        </h2>\r\n\r\n                        <div className=\"mt-6 flex flex-col gap-4\">\r\n                            {/* Income Card */}\r\n                            <div className=\"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 border border-emerald-100 dark:border-emerald-500/10\">\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <div className=\"size-6 rounded-full bg-emerald-100 dark:bg-emerald-800/30 flex items-center justify-center\">\r\n                                        <span className=\"material-symbols-outlined text-emerald-600 dark:text-emerald-400 text-[14px]\">arrow_downward</span>\r\n                                    </div>\r\n                                    <span className=\"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider\">Ingresos</span>\r\n                                </div>\r\n                                <div className=\"text-xl font-black text-slate-800 dark:text-white mb-2\"><CurrencyDisplay amount={stats.income} /></div>\r\n\r\n                                <div className=\"space-y-1\">\r\n                                    <div className=\"flex justify-between text-[10px] font-medium text-slate-400\">\r\n                                        <span>Proyectado</span>\r\n                                        <span>{formatAmount(stats.incomeProjected)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-1.5 w-full bg-emerald-100 dark:bg-emerald-950 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-emerald-500 rounded-full transition-all duration-1000\"\r\n                                            style={{ width: `${getProgress(stats.income, stats.incomeProjected)}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Expense Card */}\r\n                            <div className=\"bg-orange-50 dark:bg-orange-900/20 rounded-xl p-4 border border-orange-100 dark:border-orange-500/10\">\r\n                                <div className=\"flex items-center gap-2 mb-2\">\r\n                                    <div className=\"size-6 rounded-full bg-orange-100 dark:bg-orange-800/30 flex items-center justify-center\">\r\n                                        <span className=\"material-symbols-outlined text-orange-600 dark:text-orange-400 text-[14px]\">arrow_upward</span>\r\n                                    </div>\r\n                                    <span className=\"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider\">Gastos</span>\r\n                                </div>\r\n                                <div className=\"text-xl font-black text-slate-800 dark:text-white mb-2\"><CurrencyDisplay amount={stats.expense} /></div>\r\n\r\n                                <div className=\"space-y-1\">\r\n                                    <div className=\"flex justify-between text-[10px] font-medium text-slate-400\">\r\n                                        <span>Presupuesto</span>\r\n                                        <span>{formatAmount(stats.expenseProjected)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-1.5 w-full bg-orange-100 dark:bg-orange-950 rounded-full overflow-hidden\">\r\n                                        <div\r\n                                            className=\"h-full bg-orange-500 rounded-full transition-all duration-1000\"\r\n                                            style={{ width: `${getProgress(stats.expense, stats.expenseProjected)}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <h3 className=\"font-bold text-slate-700 dark:text-slate-200\">Filtros</h3>\r\n                            <button\r\n                                onClick={() => {\r\n                                    setSearch('');\r\n                                    setActiveType('ALL');\r\n                                    setSelectedCategories([]);\r\n                                    setVisibleCount(20);\r\n                                    setDateRange({\r\n                                        start: startOfMonth(new Date()),\r\n                                        end: endOfMonth(new Date())\r\n                                    });\r\n                                }}\r\n                                className=\"text-xs text-primary hover:underline font-medium\"\r\n                            >\r\n                                Resetear\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-4 rounded-xl space-y-3 border border-white/40 dark:border-slate-800\">\r\n                            <label className=\"text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider\">Período</label>\r\n                            <div className=\"relative\">\r\n                                <button\r\n                                    onClick={() => setIsDateModalOpen(true)}\r\n                                    className=\"w-full bg-white/50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-lg py-2.5 pl-3 pr-10 text-sm font-medium text-slate-700 dark:text-slate-200 focus:ring-2 focus:ring-primary focus:bg-white text-left transition-all hover:bg-white dark:hover:bg-slate-800\"\r\n                                >\r\n                                    {dateRange.start && dateRange.end\r\n                                        ? `${format(dateRange.start, 'dd MMM', { locale: es })} - ${format(dateRange.end, 'dd MMM', { locale: es })}`\r\n                                        : 'Seleccionar rango'}\r\n                                </button>\r\n                                <span className=\"material-symbols-outlined absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none text-lg\">calendar_month</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"glass-card p-4 rounded-xl space-y-4 border border-white/40 dark:border-slate-800\">\r\n                            <label className=\"text-xs font-semibold text-slate-400 dark:text-slate-500 uppercase tracking-wider\">Categorías</label>\r\n                            <div className=\"space-y-1\">\r\n                                <label className=\"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors group\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        checked={selectedCategories.length === 0}\r\n                                        onChange={() => setSelectedCategories([])}\r\n                                        className=\"rounded border-slate-300 text-primary focus:ring-primary bg-transparent\"\r\n                                    />\r\n                                    <span className=\"text-sm text-slate-600 dark:text-slate-300 font-medium group-hover:text-primary\">Todas</span>\r\n                                </label>\r\n                                {categories.map(cat => {\r\n                                    const colors = COLOR_MAP[cat.color || 'slate'] || COLOR_MAP.slate;\r\n                                    return (\r\n                                        <label key={cat.name} className=\"flex items-center gap-3 p-2 rounded-lg hover:bg-slate-50 dark:hover:bg-slate-700/50 cursor-pointer transition-colors group\">\r\n                                            <input\r\n                                                type=\"checkbox\"\r\n                                                checked={selectedCategories.includes(cat.name)}\r\n                                                onChange={() => toggleCategory(cat.name)}\r\n                                                className=\"rounded border-slate-300 text-primary focus:ring-primary bg-transparent\"\r\n                                            />\r\n                                            <div\r\n                                                className={`size-8 rounded-full flex items-center justify-center ${colors.bg} ${colors.text} ring-1 ring-inset ${colors.ring}`}\r\n                                            >\r\n                                                <CategoryIcon icon={cat.icon} className=\"text-[14px]\" />\r\n                                            </div>\r\n                                            <span className=\"text-sm text-slate-600 dark:text-slate-300 group-hover:text-slate-900 dark:group-hover:text-white\">{cat.name}</span>\r\n                                        </label>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </aside>\r\n\r\n                {/* Main Transactions List */}\r\n                <div className=\"flex-1 flex flex-col h-full overflow-hidden\">\r\n                    <div className=\"mb-8 shrink-0 animate-fade-in\">\r\n                        <div className=\"flex flex-wrap items-end justify-between gap-4 mb-6\">\r\n                            <div>\r\n                                <h1 className=\"text-2xl font-bold text-slate-800 dark:text-white\">Transacciones</h1>\r\n                                <p className=\"text-slate-500 dark:text-slate-400 text-sm mt-1\">Gestiona tus movimientos con claridad.</p>\r\n                            </div>\r\n                            <div className=\"flex gap-2\">\r\n\r\n                                <button\r\n                                    onClick={openTransactionModal}\r\n                                    className=\"bg-primary hover:bg-blue-600 text-white px-4 py-2.5 rounded-xl font-bold text-sm flex items-center gap-2 shadow-lg shadow-blue-500/20 transition-all hover:-translate-y-0.5\"\r\n                                >\r\n                                    <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                                    Nueva\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                            <div className=\"relative flex-1\">\r\n                                <span className=\"material-symbols-outlined absolute left-4 top-1/2 -translate-y-1/2 text-slate-400\">search</span>\r\n                                <input\r\n                                    value={search}\r\n                                    onChange={(e) => setSearch(e.target.value)}\r\n                                    className=\"w-full glass-card pl-11 pr-4 py-3 rounded-xl border-transparent focus:border-primary focus:ring-0 text-sm font-medium placeholder:text-slate-400 text-slate-700 dark:text-white transition-all\"\r\n                                    placeholder=\"Buscar transacción...\"\r\n                                    type=\"text\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"flex gap-2 overflow-x-auto no-scrollbar pb-1\">\r\n                                <button\r\n                                    onClick={() => setActiveType('ALL')}\r\n                                    className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${activeType === 'ALL' ? 'bg-slate-800 dark:bg-slate-700 text-white shadow-md' : 'glass-card text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800'}`}\r\n                                >\r\n                                    Todo\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveType('INCOME')}\r\n                                    className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${activeType === 'INCOME' ? 'bg-slate-800 dark:bg-slate-700 text-white shadow-md' : 'glass-card text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800'}`}\r\n                                >\r\n                                    Ingresos\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setActiveType('EXPENSE')}\r\n                                    className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${activeType === 'EXPENSE' ? 'bg-slate-800 dark:bg-slate-700 text-white shadow-md' : 'glass-card text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800'}`}\r\n                                >\r\n                                    Gastos\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex-1 overflow-y-auto pr-2 pb-20 space-y-8 scrollbar-hide animate-fade-in\" style={{ animationDelay: '0.1s' }}>\r\n                        {groupedTransactions.map((group, gIdx) => {\r\n                            // Currency handled by CurrencyDisplay\r\n                            return (\r\n                                <div key={group.date}>\r\n                                    <div className=\"sticky top-0 z-10 py-3 bg-[#f2f6fa]/95 dark:bg-[#020617]/95 backdrop-blur-md flex justify-between items-center border-b border-slate-200/50 dark:border-slate-800/50 mb-3\">\r\n                                        <h3 className=\"text-xs font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest capitalize\">{group.date}</h3>\r\n                                        <div className={`text-xs font-semibold px-2 py-1 rounded flex items-center gap-1 ${group.total >= 0 ? 'bg-emerald-100/50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-400' : 'bg-rose-100/50 text-rose-700 dark:bg-rose-900/30 dark:text-rose-400'}`}>\r\n                                            {group.total < 0 && <span>-</span>}\r\n                                            {group.total >= 0 && <span>+</span>}\r\n                                            <CurrencyDisplay amount={Math.abs(group.total)} />\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"flex flex-col gap-3\">\r\n                                        {group.items.map((t) => {\r\n                                            const category = allCategories.find(c => c.name === t.category);\r\n                                            const colorKey = category?.color || 'slate';\r\n                                            const colors = COLOR_MAP[colorKey] || COLOR_MAP.slate;\r\n\r\n                                            return (\r\n                                                <div\r\n                                                    key={t.id}\r\n                                                    onClick={() => setSelectedTransaction(t)}\r\n                                                    className=\"group glass-card rounded-2xl p-4 flex items-center gap-4 cursor-pointer hover:bg-white/90 dark:hover:bg-slate-800/80 hover:-translate-y-0.5 transition-all duration-200 border border-white/40 dark:border-slate-800\"\r\n                                                >\r\n                                                    <div className={`size-12 rounded-2xl flex items-center justify-center shrink-0 border transition-colors ${colors.bg} ${colors.text} ${colors.border}`}>\r\n                                                        <CategoryIcon icon={t.icon || 'attach_money'} className=\"text-[24px]\" />\r\n                                                    </div>\r\n                                                    <div className=\"flex-1 min-w-0 grid grid-cols-[1fr_auto] gap-x-4 gap-y-1\">\r\n                                                        <p className=\"text-sm font-bold text-slate-800 dark:text-slate-100 truncate\" title={t.description}>\r\n                                                            {t.description.split(' ').slice(0, 5).join(' ')}{t.description.split(' ').length > 5 ? '...' : ''}\r\n                                                        </p>\r\n                                                        <div className={`text-sm font-bold text-right flex justify-end items-center gap-0.5 ${t.type === 'INCOME' ? 'text-emerald-500' : 'text-rose-500'}`}>\r\n                                                            {t.type === 'EXPENSE' ? '-' : '+'}\r\n                                                            <CurrencyDisplay amount={t.amount} />\r\n                                                        </div>\r\n                                                        <div className=\"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400 truncate\">\r\n                                                            <span>{t.account}</span>\r\n                                                            <span className=\"size-1 rounded-full bg-slate-300 dark:bg-slate-700\"></span>\r\n                                                            <span>{t.category}</span>\r\n                                                        </div>\r\n                                                        <p className=\"text-xs font-medium text-slate-400 text-right\">\r\n                                                            {new Date(t.date).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' })}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            );\r\n                                        })}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n\r\n                        {groupedTransactions.length === 0 && (\r\n                            <div className=\"flex flex-col items-center justify-center py-20 opacity-50\">\r\n                                <span className=\"material-symbols-outlined text-6xl mb-4\">history_toggle_off</span>\r\n                                <p className=\"text-sm text-slate-400\">No se encontraron transacciones en este período.</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        {filtered.length > visibleCount ? (\r\n                            <div className=\"py-8 text-center\">\r\n                                <button\r\n                                    onClick={() => setVisibleCount(prev => prev + 20)}\r\n                                    className=\"text-sm font-bold text-primary hover:text-primary-hover hover:underline transition-all\"\r\n                                >\r\n                                    Ver más transacciones\r\n                                </button>\r\n                            </div>\r\n                        ) : (\r\n                            groupedTransactions.length > 0 && (\r\n                                <div className=\"py-8 text-center\">\r\n                                    <p className=\"text-sm text-slate-400 dark:text-slate-600\">No hay más transacciones</p>\r\n                                </div>\r\n                            )\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </main>\r\n            <DateRangeModal\r\n                isOpen={isDateModalOpen}\r\n                onClose={() => setIsDateModalOpen(false)}\r\n                onApply={handleDateRangeApply}\r\n                initialStartDate={dateRange.start}\r\n                initialEndDate={dateRange.end}\r\n            />\r\n\r\n            {/* Transaction Details Modal */}\r\n            <TransactionDetailsModal\r\n                isOpen={!!selectedTransaction}\r\n                onClose={() => setSelectedTransaction(null)}\r\n                transaction={selectedTransaction}\r\n                onEdit={(t) => {\r\n                    setSelectedTransaction(null);\r\n                    setEditingTransaction(t);\r\n                }}\r\n            />\r\n\r\n            {/* Edit Transaction Modal */}\r\n            <TransactionModal\r\n                isOpen={!!editingTransaction}\r\n                onClose={() => setEditingTransaction(null)}\r\n                transactionToEdit={editingTransaction}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;;;AAdA;;;;;;;;;;;AAgBA,MAAM,YAAuG;IACzG,KAAK;QAAE,IAAI;QAAiC,MAAM;QAAkC,MAAM;QAAmB,QAAQ;QAAkB,OAAO;IAAa;IAC3J,QAAQ;QAAE,IAAI;QAAuC,MAAM;QAAwC,MAAM;QAAsB,QAAQ;QAAqB,OAAO;IAAgB;IACnL,OAAO;QAAE,IAAI;QAAqC,MAAM;QAAsC,MAAM;QAAqB,QAAQ;QAAoB,OAAO;IAAe;IAC3K,QAAQ;QAAE,IAAI;QAAuC,MAAM;QAAwC,MAAM;QAAsB,QAAQ;QAAqB,OAAO;IAAgB;IACnL,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,OAAO;QAAE,IAAI;QAAqC,MAAM;QAAsC,MAAM;QAAqB,QAAQ;QAAoB,OAAO;IAAe;IAC3K,SAAS;QAAE,IAAI;QAAyC,MAAM;QAA0C,MAAM;QAAuB,QAAQ;QAAsB,OAAO;IAAiB;IAC3L,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,KAAK;QAAE,IAAI;QAAiC,MAAM;QAAkC,MAAM;QAAmB,QAAQ;QAAkB,OAAO;IAAa;IAC3J,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,QAAQ;QAAE,IAAI;QAAuC,MAAM;QAAwC,MAAM;QAAsB,QAAQ;QAAqB,OAAO;IAAgB;IACnL,QAAQ;QAAE,IAAI;QAAuC,MAAM;QAAwC,MAAM;QAAsB,QAAQ;QAAqB,OAAO;IAAgB;IACnL,QAAQ;QAAE,IAAI;QAAuC,MAAM;QAAwC,MAAM;QAAsB,QAAQ;QAAqB,OAAO;IAAgB;IACnL,SAAS;QAAE,IAAI;QAAyC,MAAM;QAA0C,MAAM;QAAuB,QAAQ;QAAsB,OAAO;IAAiB;IAC3L,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,MAAM;QAAE,IAAI;QAAmC,MAAM;QAAoC,MAAM;QAAoB,QAAQ;QAAmB,OAAO;IAAc;IACnK,OAAO;QAAE,IAAI;QAAkC,MAAM;QAAsC,MAAM;QAAqB,QAAQ;QAAoB,OAAO;IAAe;AAC5K;AAGe,SAAS;;IACpB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,EACF,YAAY,EACZ,YAAY,aAAa,EACzB,OAAO,EACP,cAAc,EACd,YAAY,EACZ,oBAAoB,EACpB,YAAY,EACZ,YAAY,EACZ,YAAY,EACZ,OAAO,EACV,GAAG,IAAA,2IAAU;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAA+B;IAC3E,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAW,EAAE;IACzE,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8KAAa;IAClD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAA2C;QACjF,OAAO,IAAA,8JAAY,EAAC,IAAI;QACxB,KAAK,IAAA,0JAAU,EAAC,IAAI;IACxB;IACA,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IAEjD,gCAAgC;IAChC,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAqB;IACnF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAqB;IAEjF,MAAM,uBAAuB,CAAC,OAAa;QACvC,aAAa;YAAE;YAAO;QAAI;IAC9B;IAEA,uCAAuC;IACvC,MAAM,aAAa,IAAA,wKAAO;4CAAC;YACvB,OAAO,cAAc,GAAG;oDAAC,CAAA,MAAO,CAAC;wBAC7B,MAAM,IAAI,IAAI;wBACd,MAAM,IAAI,IAAI,IAAI;wBAClB,OAAO,IAAI,KAAK,CAAC,gBAAgB;oBACrC,CAAC;;QACL;2CAAG;QAAC;KAAc;IAElB,qBAAqB;IACrB,yDAAyD;IACzD,MAAM,qBAAqB,IAAA,wKAAO;oDAAC;YAC/B,OAAO,aAAa,MAAM;4DAAC,CAAA;oBACvB,MAAM,QAAQ,IAAI,KAAK,EAAE,IAAI;oBAC7B,OAAO,CAAC,CAAC,UAAU,KAAK,IAAI,SAAS,UAAU,KAAK,KAChD,CAAC,CAAC,UAAU,GAAG,IAAI,SAAS,UAAU,GAAG;gBACjD;;QACJ;mDAAG;QAAC;QAAc;KAAU;IAE5B,yDAAyD;IACzD,MAAM,WAAW,IAAA,wKAAO;0CAAC;YACrB,OAAO,mBAAmB,MAAM;kDAAC,CAAA;oBAC7B,MAAM,gBAAgB,EAAE,QAAQ,IAAI;oBAEpC,MAAM,gBAAgB,EAAE,WAAW,CAAC,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW,OACzE,cAAc,WAAW,GAAG,QAAQ,CAAC,OAAO,WAAW;oBAC3D,MAAM,cAAc,eAAe,SAAS,EAAE,IAAI,KAAK;oBACvD,MAAM,kBAAkB,mBAAmB,MAAM,KAAK,KAAK,mBAAmB,QAAQ,CAAC;oBAEvF,OAAO,iBAAiB,eAAe;gBAC3C;;QACJ;yCAAG;QAAC;QAAoB;QAAQ;QAAY;KAAmB;IAE/D,wBAAwB;IACxB,MAAM,sBAAsB,IAAA,wKAAO;qDAAC;YAChC,MAAM,SAAmF,CAAC;YAE1F,SAAS,KAAK,CAAC,GAAG,cAAc,OAAO;6DAAC,CAAA;oBACpC,MAAM,UAAU,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB,CAAC,SAAS;wBACzD,SAAS;wBACT,KAAK;wBACL,OAAO;oBACX;oBAEA,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;wBAClB,MAAM,CAAC,QAAQ,GAAG;4BAAE,MAAM;4BAAS,OAAO,EAAE;4BAAE,OAAO;wBAAE;oBAC3D;oBAEA,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC;oBAC3B,MAAM,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE,IAAI,KAAK,WAAW,EAAE,MAAM,GAAG,CAAC,EAAE,MAAM;gBACvE;;YAEA,OAAO,OAAO,MAAM,CAAC;QACzB;oDAAG;QAAC;QAAU;KAAa;IAE3B,MAAM,iBAAiB,CAAC;QACpB,sBAAsB,CAAA,OAClB,KAAK,QAAQ,CAAC,OAAO,KAAK,MAAM,CAAC,CAAA,IAAK,MAAM,OAAO;mBAAI;gBAAM;aAAI;IAEzE;IAEA,MAAM,uBAAuB;QACzB,IAAI,CAAC,cAAc;QACnB,IAAI,CAAC,QAAQ,uFAAuF;QAEpG,gBAAgB;YACZ,MAAM,IAAA,qLAAwB,EAAC;YAC/B,MAAM;QACV;IACJ;IAEA,mCAAmC;IACnC,kFAAkF;IAClF,MAAM,QAAQ,IAAA,wKAAO;uCAAC;YAClB,oFAAoF;YACpF,MAAM,cAAc,mBAAmB,MAAM;2DAAC,CAAC,KAAK;oBAChD,IAAI,EAAE,IAAI,KAAK,WAAW,IAAI,OAAO,IAAI,EAAE,MAAM;oBACjD,OAAO;gBACX;0DAAG;gBAAE,SAAS;YAAE;YAEhB,oEAAoE;YACpE,MAAM,YAAY,SAAS,MAAM;yDAAC,CAAC,KAAK;oBACpC,IAAI,EAAE,IAAI,KAAK,UAAU,IAAI,MAAM,IAAI,EAAE,MAAM;yBAC1C,IAAI,OAAO,IAAI,EAAE,MAAM;oBAC5B,OAAO;gBACX;wDAAG;gBAAE,QAAQ;gBAAG,SAAS;YAAE;YAE3B,uCAAuC;YACvC,0EAA0E;YAC1E,MAAM,kBAAkB,mBAAmB,MAAM,GAAG,IAC9C,QAAQ,MAAM;+CAAC,CAAA,IAAK,mBAAmB,QAAQ,CAAC,EAAE,QAAQ;gDAC1D;YAEN,gGAAgG;YAChG,MAAM,mBAAmB,gBAAgB,MAAM,GAAG,IAC5C,gBAAgB,MAAM;+CAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK;8CAAE,KAClD;YAEN,6BAA6B;YAC7B,MAAM,kBAAkB,eACnB,MAAM;+DAAC,CAAA,IAAK,EAAE,IAAI,KAAK,YAAY,EAAE,MAAM;8DAC3C,MAAM;+DAAC,CAAC,KAAK,IAAM,MAAM,EAAE,MAAM;8DAAE;YAExC,wGAAwG;YACxG,MAAM,mBAAmB,QAAQ,MAAM;gEAAC,CAAC,KAAK,IAAM,MAAM,EAAE,KAAK;+DAAE;YAEnE,kEAAkE;YAClE,MAAM,kBAAkB,mBAAmB,YAAY,OAAO;YAE9D,OAAO;gBACH,QAAQ,UAAU,MAAM;gBACxB,SAAS,UAAU,OAAO;gBAC1B;gBACA;gBACA;gBACA;YACJ;QACJ;sCAAG;QAAC;QAAoB;QAAU;QAAS;QAAgB;KAAmB;IAE9E,iDAAiD;IACjD,MAAM,kBAAkB,CAAC,EAAE,MAAM,EAAE,YAAY,EAAE,EAA0C;QACvF,MAAM,eAAe,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;QAChD,MAAM,WAAW,cAAc,YAAY;QAC3C,MAAM,SAAS,aAAa,QAAQ,OAAQ,aAAa,QAAQ,MAAM;QAEvE,qBACI,6LAAC;YAAK,WAAW,CAAC,2BAA2B,EAAE,WAAW;;8BACtD,6LAAC;oBAAK,WAAU;8BAAqB;;;;;;8BACrC,6LAAC;8BAAM,OAAO,cAAc,CAAC,SAAS;wBAAE,uBAAuB;oBAAE;;;;;;;;;;;;IAG7E;IAEA,MAAM,cAAc,CAAC,SAAiB;QAClC,IAAI,WAAW,GAAG,OAAO;QACzB,OAAO,KAAK,GAAG,CAAC,AAAC,UAAU,SAAU,KAAK;IAC9C;IAEA,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGnB,6LAAC;gBAAK,WAAU;;kCAEZ,6LAAC;wBAAM,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAE,WAAU;kDAA8D;;;;;;kDAC3E,6LAAC;wCAAG,WAAU;kDACV,cAAA,6LAAC;4CAAgB,QAAQ,MAAM,eAAe;;;;;;;;;;;kDAGlD,6LAAC;wCAAI,WAAU;;0DAEX,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;0EACX,cAAA,6LAAC;oEAAK,WAAU;8EAA+E;;;;;;;;;;;0EAEnG,6LAAC;gEAAK,WAAU;0EAAgF;;;;;;;;;;;;kEAEpG,6LAAC;wDAAI,WAAU;kEAAyD,cAAA,6LAAC;4DAAgB,QAAQ,MAAM,MAAM;;;;;;;;;;;kEAE7G,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;;kFACX,6LAAC;kFAAK;;;;;;kFACN,6LAAC;kFAAM,aAAa,MAAM,eAAe;;;;;;;;;;;;0EAE7C,6LAAC;gEAAI,WAAU;0EACX,cAAA,6LAAC;oEACG,WAAU;oEACV,OAAO;wEAAE,OAAO,GAAG,YAAY,MAAM,MAAM,EAAE,MAAM,eAAe,EAAE,CAAC,CAAC;oEAAC;;;;;;;;;;;;;;;;;;;;;;;0DAOvF,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;0EACX,cAAA,6LAAC;oEAAK,WAAU;8EAA6E;;;;;;;;;;;0EAEjG,6LAAC;gEAAK,WAAU;0EAAgF;;;;;;;;;;;;kEAEpG,6LAAC;wDAAI,WAAU;kEAAyD,cAAA,6LAAC;4DAAgB,QAAQ,MAAM,OAAO;;;;;;;;;;;kEAE9G,6LAAC;wDAAI,WAAU;;0EACX,6LAAC;gEAAI,WAAU;;kFACX,6LAAC;kFAAK;;;;;;kFACN,6LAAC;kFAAM,aAAa,MAAM,gBAAgB;;;;;;;;;;;;0EAE9C,6LAAC;gEAAI,WAAU;0EACX,cAAA,6LAAC;oEACG,WAAU;oEACV,OAAO;wEAAE,OAAO,GAAG,YAAY,MAAM,OAAO,EAAE,MAAM,gBAAgB,EAAE,CAAC,CAAC;oEAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0CAQjG,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAG,WAAU;0DAA+C;;;;;;0DAC7D,6LAAC;gDACG,SAAS;oDACL,UAAU;oDACV,cAAc;oDACd,sBAAsB,EAAE;oDACxB,gBAAgB;oDAChB,aAAa;wDACT,OAAO,IAAA,8JAAY,EAAC,IAAI;wDACxB,KAAK,IAAA,0JAAU,EAAC,IAAI;oDACxB;gDACJ;gDACA,WAAU;0DACb;;;;;;;;;;;;kDAKL,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAAoF;;;;;;0DACrG,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDACG,SAAS,IAAM,mBAAmB;wDAClC,WAAU;kEAET,UAAU,KAAK,IAAI,UAAU,GAAG,GAC3B,GAAG,IAAA,kKAAM,EAAC,UAAU,KAAK,EAAE,UAAU;4DAAE,QAAQ,oJAAE;wDAAC,GAAG,GAAG,EAAE,IAAA,kKAAM,EAAC,UAAU,GAAG,EAAE,UAAU;4DAAE,QAAQ,oJAAE;wDAAC,IAAI,GAC3G;;;;;;kEAEV,6LAAC;wDAAK,WAAU;kEAAiH;;;;;;;;;;;;;;;;;;kDAIzI,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAM,WAAU;0DAAoF;;;;;;0DACrG,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAM,WAAU;;0EACb,6LAAC;gEACG,MAAK;gEACL,SAAS,mBAAmB,MAAM,KAAK;gEACvC,UAAU,IAAM,sBAAsB,EAAE;gEACxC,WAAU;;;;;;0EAEd,6LAAC;gEAAK,WAAU;0EAAkF;;;;;;;;;;;;oDAErG,WAAW,GAAG,CAAC,CAAA;wDACZ,MAAM,SAAS,SAAS,CAAC,IAAI,KAAK,IAAI,QAAQ,IAAI,UAAU,KAAK;wDACjE,qBACI,6LAAC;4DAAqB,WAAU;;8EAC5B,6LAAC;oEACG,MAAK;oEACL,SAAS,mBAAmB,QAAQ,CAAC,IAAI,IAAI;oEAC7C,UAAU,IAAM,eAAe,IAAI,IAAI;oEACvC,WAAU;;;;;;8EAEd,6LAAC;oEACG,WAAW,CAAC,qDAAqD,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,mBAAmB,EAAE,OAAO,IAAI,EAAE;8EAE9H,cAAA,6LAAC,8IAAY;wEAAC,MAAM,IAAI,IAAI;wEAAE,WAAU;;;;;;;;;;;8EAE5C,6LAAC;oEAAK,WAAU;8EAAqG,IAAI,IAAI;;;;;;;2DAZrH,IAAI,IAAI;;;;;oDAe5B;;;;;;;;;;;;;;;;;;;;;;;;;kCAOhB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;;kEACG,6LAAC;wDAAG,WAAU;kEAAoD;;;;;;kEAClE,6LAAC;wDAAE,WAAU;kEAAkD;;;;;;;;;;;;0DAEnE,6LAAC;gDAAI,WAAU;0DAEX,cAAA,6LAAC;oDACG,SAAS;oDACT,WAAU;;sEAEV,6LAAC;4DAAK,WAAU;sEAAwC;;;;;;wDAAU;;;;;;;;;;;;;;;;;;kDAM9E,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDAAK,WAAU;kEAAoF;;;;;;kEACpG,6LAAC;wDACG,OAAO;wDACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wDACzC,WAAU;wDACV,aAAY;wDACZ,MAAK;;;;;;;;;;;;0DAGb,6LAAC;gDAAI,WAAU;;kEACX,6LAAC;wDACG,SAAS,IAAM,cAAc;wDAC7B,WAAW,CAAC,wDAAwD,EAAE,eAAe,QAAQ,wDAAwD,wFAAwF;kEAChP;;;;;;kEAGD,6LAAC;wDACG,SAAS,IAAM,cAAc;wDAC7B,WAAW,CAAC,wDAAwD,EAAE,eAAe,WAAW,wDAAwD,wFAAwF;kEACnP;;;;;;kEAGD,6LAAC;wDACG,SAAS,IAAM,cAAc;wDAC7B,WAAW,CAAC,wDAAwD,EAAE,eAAe,YAAY,wDAAwD,wFAAwF;kEACpP;;;;;;;;;;;;;;;;;;;;;;;;0CAOb,6LAAC;gCAAI,WAAU;gCAA6E,OAAO;oCAAE,gBAAgB;gCAAO;;oCACvH,oBAAoB,GAAG,CAAC,CAAC,OAAO;wCAC7B,sCAAsC;wCACtC,qBACI,6LAAC;;8DACG,6LAAC;oDAAI,WAAU;;sEACX,6LAAC;4DAAG,WAAU;sEAA6F,MAAM,IAAI;;;;;;sEACrH,6LAAC;4DAAI,WAAW,CAAC,gEAAgE,EAAE,MAAM,KAAK,IAAI,IAAI,oFAAoF,uEAAuE;;gEAC5P,MAAM,KAAK,GAAG,mBAAK,6LAAC;8EAAK;;;;;;gEACzB,MAAM,KAAK,IAAI,mBAAK,6LAAC;8EAAK;;;;;;8EAC3B,6LAAC;oEAAgB,QAAQ,KAAK,GAAG,CAAC,MAAM,KAAK;;;;;;;;;;;;;;;;;;8DAGrD,6LAAC;oDAAI,WAAU;8DACV,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC;wDACd,MAAM,WAAW,cAAc,IAAI,CAAC,CAAA,IAAK,EAAE,IAAI,KAAK,EAAE,QAAQ;wDAC9D,MAAM,WAAW,UAAU,SAAS;wDACpC,MAAM,SAAS,SAAS,CAAC,SAAS,IAAI,UAAU,KAAK;wDAErD,qBACI,6LAAC;4DAEG,SAAS,IAAM,uBAAuB;4DACtC,WAAU;;8EAEV,6LAAC;oEAAI,WAAW,CAAC,uFAAuF,EAAE,OAAO,EAAE,CAAC,CAAC,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,MAAM,EAAE;8EACjJ,cAAA,6LAAC,8IAAY;wEAAC,MAAM,EAAE,IAAI,IAAI;wEAAgB,WAAU;;;;;;;;;;;8EAE5D,6LAAC;oEAAI,WAAU;;sFACX,6LAAC;4EAAE,WAAU;4EAAgE,OAAO,EAAE,WAAW;;gFAC5F,EAAE,WAAW,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;gFAAM,EAAE,WAAW,CAAC,KAAK,CAAC,KAAK,MAAM,GAAG,IAAI,QAAQ;;;;;;;sFAEnG,6LAAC;4EAAI,WAAW,CAAC,mEAAmE,EAAE,EAAE,IAAI,KAAK,WAAW,qBAAqB,iBAAiB;;gFAC7I,EAAE,IAAI,KAAK,YAAY,MAAM;8FAC9B,6LAAC;oFAAgB,QAAQ,EAAE,MAAM;;;;;;;;;;;;sFAErC,6LAAC;4EAAI,WAAU;;8FACX,6LAAC;8FAAM,EAAE,OAAO;;;;;;8FAChB,6LAAC;oFAAK,WAAU;;;;;;8FAChB,6LAAC;8FAAM,EAAE,QAAQ;;;;;;;;;;;;sFAErB,6LAAC;4EAAE,WAAU;sFACR,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB,CAAC,SAAS;gFAAE,MAAM;gFAAW,QAAQ;4EAAU;;;;;;;;;;;;;2DArBtF,EAAE,EAAE;;;;;oDA0BrB;;;;;;;2CA3CE,MAAM,IAAI;;;;;oCA+C5B;oCAEC,oBAAoB,MAAM,KAAK,mBAC5B,6LAAC;wCAAI,WAAU;;0DACX,6LAAC;gDAAK,WAAU;0DAA0C;;;;;;0DAC1D,6LAAC;gDAAE,WAAU;0DAAyB;;;;;;;;;;;;oCAI7C,SAAS,MAAM,GAAG,6BACf,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CACG,SAAS,IAAM,gBAAgB,CAAA,OAAQ,OAAO;4CAC9C,WAAU;sDACb;;;;;;;;;;+CAKL,oBAAoB,MAAM,GAAG,mBACzB,6LAAC;wCAAI,WAAU;kDACX,cAAA,6LAAC;4CAAE,WAAU;sDAA6C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAOlF,6LAAC,kJAAc;gBACX,QAAQ;gBACR,SAAS,IAAM,mBAAmB;gBAClC,SAAS;gBACT,kBAAkB,UAAU,KAAK;gBACjC,gBAAgB,UAAU,GAAG;;;;;;0BAIjC,6LAAC,oKAAuB;gBACpB,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,uBAAuB;gBACtC,aAAa;gBACb,QAAQ,CAAC;oBACL,uBAAuB;oBACvB,sBAAsB;gBAC1B;;;;;;0BAIJ,6LAAC,sJAAgB;gBACb,QAAQ,CAAC,CAAC;gBACV,SAAS,IAAM,sBAAsB;gBACrC,mBAAmB;;;;;;;;;;;;AAInC;GAtdwB;;QACL,kJAAS;QAYpB,2IAAU;QAIuB,8KAAa;;;KAjB9B"}}]
}