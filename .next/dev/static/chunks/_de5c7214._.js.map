{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/books/ColorPicker.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { Check } from \"lucide-react\"\r\n\r\nexport const BOOK_COLORS = {\r\n    Classic: [\r\n        { name: 'Red', value: 'red', hex: '#ef4444' },\r\n        { name: 'Orange', value: 'orange', hex: '#f97316' },\r\n        { name: 'Amber', value: 'amber', hex: '#f59e0b' },\r\n        { name: 'Yellow', value: 'yellow', hex: '#eab308' },\r\n        { name: 'Lime', value: 'lime', hex: '#84cc16' },\r\n        { name: 'Green', value: 'green', hex: '#22c55e' },\r\n        { name: 'Emerald', value: 'emerald', hex: '#10b981' },\r\n        { name: 'Teal', value: 'teal', hex: '#14b8a6' },\r\n        { name: 'Cyan', value: 'cyan', hex: '#06b6d4' },\r\n        { name: 'Sky', value: 'sky', hex: '#0ea5e9' },\r\n        { name: 'Blue', value: 'blue', hex: '#3b82f6' },\r\n        { name: 'Indigo', value: 'indigo', hex: '#6366f1' },\r\n        { name: 'Violet', value: 'violet', hex: '#8b5cf6' },\r\n        { name: 'Purple', value: 'purple', hex: '#a855f7' },\r\n        { name: 'Fuchsia', value: 'fuchsia', hex: '#d946ef' },\r\n        { name: 'Pink', value: 'pink', hex: '#ec4899' },\r\n        { name: 'Rose', value: 'rose', hex: '#f43f5e' },\r\n        { name: 'Slate', value: 'slate', hex: '#64748b' },\r\n    ]\r\n}\r\n\r\nexport function ColorPicker({ value, onChange }: { value: string, onChange: (color: string) => void }) {\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            <label className=\"text-sm font-medium text-text-main\">Color</label>\r\n            <div className=\"flex flex-wrap gap-3\">\r\n                {BOOK_COLORS.Classic.map((color) => {\r\n                    const isSelected = value === color.value\r\n                    return (\r\n                        <button\r\n                            key={color.value}\r\n                            type=\"button\"\r\n                            onClick={() => onChange(color.value)}\r\n                            className={`\r\n                                w-10 h-10 rounded-full flex items-center justify-center transition-all\r\n                                ${isSelected ? 'ring-2 ring-offset-2 ring-primary dark:ring-offset-gray-900 scale-110' : 'hover:scale-105'}\r\n                            `}\r\n                            style={{ backgroundColor: color.hex }}\r\n                            title={color.name}\r\n                        >\r\n                            {isSelected && <Check size={18} className=\"text-white drop-shadow-md\" />}\r\n                        </button>\r\n                    )\r\n                })}\r\n            </div>\r\n            <input type=\"hidden\" name=\"color\" value={value} />\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAFA;;;AAIO,MAAM,cAAc;IACvB,SAAS;QACL;YAAE,MAAM;YAAO,OAAO;YAAO,KAAK;QAAU;QAC5C;YAAE,MAAM;YAAU,OAAO;YAAU,KAAK;QAAU;QAClD;YAAE,MAAM;YAAS,OAAO;YAAS,KAAK;QAAU;QAChD;YAAE,MAAM;YAAU,OAAO;YAAU,KAAK;QAAU;QAClD;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAS,OAAO;YAAS,KAAK;QAAU;QAChD;YAAE,MAAM;YAAW,OAAO;YAAW,KAAK;QAAU;QACpD;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAO,OAAO;YAAO,KAAK;QAAU;QAC5C;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAU,OAAO;YAAU,KAAK;QAAU;QAClD;YAAE,MAAM;YAAU,OAAO;YAAU,KAAK;QAAU;QAClD;YAAE,MAAM;YAAU,OAAO;YAAU,KAAK;QAAU;QAClD;YAAE,MAAM;YAAW,OAAO;YAAW,KAAK;QAAU;QACpD;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAQ,OAAO;YAAQ,KAAK;QAAU;QAC9C;YAAE,MAAM;YAAS,OAAO;YAAS,KAAK;QAAU;KACnD;AACL;AAEO,SAAS,YAAY,EAAE,KAAK,EAAE,QAAQ,EAAwD;IACjG,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BACtD,6LAAC;gBAAI,WAAU;0BACV,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC;oBACtB,MAAM,aAAa,UAAU,MAAM,KAAK;oBACxC,qBACI,6LAAC;wBAEG,MAAK;wBACL,SAAS,IAAM,SAAS,MAAM,KAAK;wBACnC,WAAW,CAAC;;gCAER,EAAE,aAAa,0EAA0E,kBAAkB;4BAC/G,CAAC;wBACD,OAAO;4BAAE,iBAAiB,MAAM,GAAG;wBAAC;wBACpC,OAAO,MAAM,IAAI;kCAEhB,4BAAc,6LAAC,gNAAK;4BAAC,MAAM;4BAAI,WAAU;;;;;;uBAVrC,MAAM,KAAK;;;;;gBAa5B;;;;;;0BAEJ,6LAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAQ,OAAO;;;;;;;;;;;;AAGrD;KA3BgB"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/books/IconPicker.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState } from \"react\"\r\nimport * as Icons from \"lucide-react\"\r\n\r\n// Define a subset of icons for books\r\nconst ICON_CATEGORIES = {\r\n    General: ['Wallet', 'CreditCard', 'Banknote', 'Coins', 'PiggyBank', 'Landmark', 'CircleDollarSign', 'Briefcase', 'Receipt'],\r\n    Hogar: ['Home', 'ShoppingCart', 'ShoppingBag', 'Utensils', 'Coffee', 'Zap', 'Wifi', 'Droplets', 'Hammer'],\r\n    Movilidad: ['Car', 'Bus', 'Train', 'Plane', 'Bike', 'Fuel'],\r\n    Ocio: ['Gamepad2', 'Music', 'Clapperboard', 'Ticket', 'PartyPopper', 'Gift', 'Dumbbell', 'Tent'],\r\n    Educación: ['GraduationCap', 'Book', 'BookOpen', 'Library', 'School'],\r\n    Tecnología: ['Smartphone', 'Laptop', 'Monitor', 'Mouse', 'Printer', 'Server']\r\n}\r\n\r\nexport function IconPicker({ value, onChange }: { value: string, onChange: (icon: string) => void }) {\r\n    const [selectedCategory, setSelectedCategory] = useState<keyof typeof ICON_CATEGORIES>('General')\r\n    const [searchTerm, setSearchTerm] = useState('')\r\n\r\n    // Resolve icon component dynamically\r\n    const SelectedIcon = (Icons as any)[value] || Icons.HelpCircle\r\n\r\n    return (\r\n        <div className=\"space-y-3\">\r\n            <label className=\"text-sm font-medium text-text-main\">Icono</label>\r\n\r\n            {/* Preview & Search */}\r\n            <div className=\"flex gap-4\">\r\n                <div className=\"size-12 rounded-xl bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-white/10 flex items-center justify-center shrink-0\">\r\n                    <SelectedIcon size={24} className=\"text-primary\" />\r\n                </div>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder=\"Buscar icono...\"\r\n                    value={searchTerm}\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    className=\"flex-1 px-4 py-2 rounded-xl border border-gray-200 dark:border-white/10 bg-transparent text-text-main focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all outline-none\"\r\n                />\r\n            </div>\r\n\r\n            {/* Categories */}\r\n            <div className=\"flex gap-2 overflow-x-auto pb-2 scrollbar-hide\">\r\n                {Object.keys(ICON_CATEGORIES).map((cat) => (\r\n                    <button\r\n                        key={cat}\r\n                        type=\"button\"\r\n                        onClick={() => setSelectedCategory(cat as any)}\r\n                        className={`\r\n                            px-3 py-1.5 rounded-lg text-xs font-medium whitespace-nowrap transition-colors\r\n                            ${selectedCategory === cat\r\n                                ? 'bg-primary text-white'\r\n                                : 'bg-gray-100 dark:bg-white/5 text-text-muted hover:bg-gray-200 dark:hover:bg-white/10'}\r\n                        `}\r\n                    >\r\n                        {cat}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n\r\n            {/* Icons Grid */}\r\n            <div className=\"grid grid-cols-6 sm:grid-cols-8 gap-2 max-h-48 overflow-y-auto pr-2\">\r\n                {ICON_CATEGORIES[selectedCategory]\r\n                    .filter(iconName => iconName.toLowerCase().includes(searchTerm.toLowerCase()))\r\n                    .map((iconName) => {\r\n                        const Icon = (Icons as any)[iconName]\r\n                        if (!Icon) return null\r\n\r\n                        const isSelected = value === iconName\r\n                        return (\r\n                            <button\r\n                                key={iconName}\r\n                                type=\"button\"\r\n                                onClick={() => onChange(iconName)}\r\n                                className={`\r\n                                    aspect-square rounded-xl flex items-center justify-center transition-all\r\n                                    ${isSelected\r\n                                        ? 'bg-primary/20 text-primary ring-2 ring-primary'\r\n                                        : 'bg-gray-50 dark:bg-white/5 text-text-muted hover:bg-gray-100 dark:hover:bg-white/10 hover:text-text-main'}\r\n                                `}\r\n                                title={iconName}\r\n                            >\r\n                                <Icon size={20} />\r\n                            </button>\r\n                        )\r\n                    })}\r\n            </div>\r\n            <input type=\"hidden\" name=\"icon\" value={value} />\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKA,qCAAqC;AACrC,MAAM,kBAAkB;IACpB,SAAS;QAAC;QAAU;QAAc;QAAY;QAAS;QAAa;QAAY;QAAoB;QAAa;KAAU;IAC3H,OAAO;QAAC;QAAQ;QAAgB;QAAe;QAAY;QAAU;QAAO;QAAQ;QAAY;KAAS;IACzG,WAAW;QAAC;QAAO;QAAO;QAAS;QAAS;QAAQ;KAAO;IAC3D,MAAM;QAAC;QAAY;QAAS;QAAgB;QAAU;QAAe;QAAQ;QAAY;KAAO;IAChG,WAAW;QAAC;QAAiB;QAAQ;QAAY;QAAW;KAAS;IACrE,YAAY;QAAC;QAAc;QAAU;QAAW;QAAS;QAAW;KAAS;AACjF;AAEO,SAAS,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAuD;;IAC/F,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAA+B;IACvF,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,qCAAqC;IACrC,MAAM,eAAe,AAAC,oKAAa,CAAC,MAAM,IAAI,qKAAM,UAAU;IAE9D,qBACI,6LAAC;QAAI,WAAU;;0BACX,6LAAC;gBAAM,WAAU;0BAAqC;;;;;;0BAGtD,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BAAa,MAAM;4BAAI,WAAU;;;;;;;;;;;kCAEtC,6LAAC;wBACG,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;wBAC7C,WAAU;;;;;;;;;;;;0BAKlB,6LAAC;gBAAI,WAAU;0BACV,OAAO,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC,oBAC/B,6LAAC;wBAEG,MAAK;wBACL,SAAS,IAAM,oBAAoB;wBACnC,WAAW,CAAC;;4BAER,EAAE,qBAAqB,MACjB,0BACA,uFAAuF;wBACjG,CAAC;kCAEA;uBAVI;;;;;;;;;;0BAgBjB,6LAAC;gBAAI,WAAU;0BACV,eAAe,CAAC,iBAAiB,CAC7B,MAAM,CAAC,CAAA,WAAY,SAAS,WAAW,GAAG,QAAQ,CAAC,WAAW,WAAW,KACzE,GAAG,CAAC,CAAC;oBACF,MAAM,OAAO,AAAC,oKAAa,CAAC,SAAS;oBACrC,IAAI,CAAC,MAAM,OAAO;oBAElB,MAAM,aAAa,UAAU;oBAC7B,qBACI,6LAAC;wBAEG,MAAK;wBACL,SAAS,IAAM,SAAS;wBACxB,WAAW,CAAC;;oCAER,EAAE,aACI,mDACA,2GAA2G;gCACrH,CAAC;wBACD,OAAO;kCAEP,cAAA,6LAAC;4BAAK,MAAM;;;;;;uBAXP;;;;;gBAcjB;;;;;;0BAER,6LAAC;gBAAM,MAAK;gBAAS,MAAK;gBAAO,OAAO;;;;;;;;;;;;AAGpD;GA1EgB;KAAA"}},
    {"offset": {"line": 382, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function createCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').insert({\r\n        name,\r\n        book_id: bookId,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function createFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').insert({\r\n        name,\r\n        book_id: bookId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\r\n    const supabase = await createClient()\r\n\r\n    const { error } = await supabase.from('categories')\r\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\r\n        .eq('id', categoryId)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.from('categories').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function deleteFolder(id: string) {\r\n    const supabase = await createClient()\r\n    // Optional logic: delete items or move to ungrouped? \r\n    // Usually cascade or restricted. For now simple delete.\r\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function updateCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').update({\r\n        name,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function updateFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').update({\r\n        name,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAKsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function createCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').insert({\r\n        name,\r\n        book_id: bookId,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function createFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').insert({\r\n        name,\r\n        book_id: bookId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\r\n    const supabase = await createClient()\r\n\r\n    const { error } = await supabase.from('categories')\r\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\r\n        .eq('id', categoryId)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.from('categories').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function deleteFolder(id: string) {\r\n    const supabase = await createClient()\r\n    // Optional logic: delete items or move to ungrouped? \r\n    // Usually cascade or restricted. For now simple delete.\r\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function updateCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').update({\r\n        name,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function updateFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').update({\r\n        name,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAuFsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,kDAAA"}},
    {"offset": {"line": 416, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/categories/CategoryModal.tsx"],"sourcesContent":["import { useState, useTransition, useEffect } from \"react\"\r\nimport { ColorPicker } from \"../books/ColorPicker\"\r\nimport { IconPicker } from \"../books/IconPicker\"\r\nimport { createCategory, updateCategory } from \"@/app/actions/category-actions\"\r\nimport { Category, CategoryFolder } from \"@/types\"\r\n\r\ninterface CategoryModalProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n    folders: CategoryFolder[]\r\n    activeBookId: string | null\r\n    defaultFolderId?: string\r\n    initialData?: Category | null\r\n    onSuccess?: () => void\r\n}\r\n\r\nexport function CategoryModal({ isOpen, onClose, folders, activeBookId, defaultFolderId, initialData, onSuccess }: CategoryModalProps) {\r\n    const [isPending, startTransition] = useTransition()\r\n    const [name, setName] = useState('')\r\n    const [folderId, setFolderId] = useState(defaultFolderId || 'ungrouped')\r\n    const [color, setColor] = useState('blue')\r\n    const [icon, setIcon] = useState('category')\r\n\r\n    // Reset or Populate when opening\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (initialData) {\r\n                setName(initialData.name)\r\n                setFolderId(initialData.folder_id || 'ungrouped')\r\n                setColor(initialData.color || 'blue')\r\n                setIcon(initialData.icon || 'category')\r\n            } else {\r\n                setFolderId(defaultFolderId || 'ungrouped')\r\n                setName('')\r\n                setColor('blue')\r\n                setIcon('category')\r\n            }\r\n        }\r\n    }, [isOpen, defaultFolderId, initialData])\r\n\r\n    if (!isOpen) return null\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!activeBookId) return\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('folderId', folderId)\r\n        formData.append('color', color)\r\n        formData.append('icon', icon)\r\n        formData.append('bookId', activeBookId)\r\n\r\n        startTransition(async () => {\r\n            if (initialData) {\r\n                formData.append('id', initialData.id)\r\n                await updateCategory(formData)\r\n            } else {\r\n                await createCategory(formData)\r\n            }\r\n            if (onSuccess) onSuccess()\r\n            onClose()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-8 bg-slate-900/40 backdrop-blur-sm animate-fade-in\">\r\n            <div className=\"glass-card w-full max-w-2xl rounded-2xl shadow-premium overflow-hidden flex flex-col animate-slide-up border border-white/80 dark:border-slate-800 max-h-[90vh] overflow-y-auto scrollbar-hide\">\r\n                <div className=\"flex items-center justify-between px-8 py-6 border-b border-gray-100 dark:border-gray-800 flex-shrink-0\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-black tracking-tight text-gray-900 dark:text-white uppercase tracking-widest\">\r\n                            {initialData ? 'Editar Categoría' : 'Nueva Categoría'}\r\n                        </h1>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 transition-colors\">\r\n                        <span className=\"material-symbols-outlined text-2xl\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"p-8 space-y-6\">\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Nombre</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                placeholder=\"Ej. Restaurantes\"\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all font-medium\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Carpeta (Grupo)</label>\r\n                            <select\r\n                                value={folderId}\r\n                                onChange={(e) => setFolderId(e.target.value)}\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all font-medium appearance-none\"\r\n                            >\r\n                                <option value=\"ungrouped\">General / Sin Carpeta</option>\r\n                                {folders.map(f => (\r\n                                    <option key={f.id} value={f.id}>{f.name}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6 pt-4 border-t border-gray-100 dark:border-white/5\">\r\n                        <ColorPicker value={color} onChange={setColor} />\r\n                        <IconPicker value={icon} onChange={setIcon} />\r\n                    </div>\r\n\r\n                    <div className=\"pt-6 flex justify-end gap-3 sticky bottom-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md p-4 -mx-8 -mb-8 border-t border-gray-100 dark:border-white/5\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"px-6 h-12 rounded-xl text-slate-600 dark:text-slate-400 font-bold hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isPending}\r\n                            className=\"px-6 h-12 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2\"\r\n                        >\r\n                            {isPending && <div className=\"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />}\r\n                            Guardar\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 708, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function createCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').insert({\r\n        name,\r\n        book_id: bookId,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function createFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').insert({\r\n        name,\r\n        book_id: bookId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\r\n    const supabase = await createClient()\r\n\r\n    const { error } = await supabase.from('categories')\r\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\r\n        .eq('id', categoryId)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.from('categories').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function deleteFolder(id: string) {\r\n    const supabase = await createClient()\r\n    // Optional logic: delete items or move to ungrouped? \r\n    // Usually cascade or restricted. For now simple delete.\r\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function updateCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').update({\r\n        name,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function updateFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').update({\r\n        name,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAiCsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 725, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function createCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').insert({\r\n        name,\r\n        book_id: bookId,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function createFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').insert({\r\n        name,\r\n        book_id: bookId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\r\n    const supabase = await createClient()\r\n\r\n    const { error } = await supabase.from('categories')\r\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\r\n        .eq('id', categoryId)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.from('categories').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function deleteFolder(id: string) {\r\n    const supabase = await createClient()\r\n    // Optional logic: delete items or move to ungrouped? \r\n    // Usually cascade or restricted. For now simple delete.\r\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function updateCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').update({\r\n        name,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function updateFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').update({\r\n        name,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MAiHsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 742, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/categories/FolderModal.tsx"],"sourcesContent":["import { useState, useTransition, useEffect } from \"react\"\r\nimport { ColorPicker } from \"../books/ColorPicker\"\r\nimport { IconPicker } from \"../books/IconPicker\"\r\nimport { createFolder, updateFolder } from \"@/app/actions/category-actions\"\r\nimport { CategoryFolder } from \"@/types\"\r\n\r\ninterface FolderModalProps {\r\n    isOpen: boolean\r\n    onClose: () => void\r\n    activeBookId: string | null\r\n    initialData?: CategoryFolder | null\r\n    onSuccess?: () => void\r\n}\r\n\r\nexport function FolderModal({ isOpen, onClose, activeBookId, initialData, onSuccess }: FolderModalProps) {\r\n    const [isPending, startTransition] = useTransition()\r\n    const [name, setName] = useState('')\r\n    const [color, setColor] = useState('indigo')\r\n    const [icon, setIcon] = useState('folder')\r\n\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            if (initialData) {\r\n                setName(initialData.name)\r\n                setColor(initialData.color || 'indigo')\r\n                setIcon(initialData.icon || 'folder')\r\n            } else {\r\n                setName('')\r\n                setColor('indigo')\r\n                setIcon('folder')\r\n            }\r\n        }\r\n    }, [isOpen, initialData])\r\n\r\n    if (!isOpen) return null\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        if (!activeBookId) return\r\n\r\n        const formData = new FormData()\r\n        formData.append('name', name)\r\n        formData.append('color', color)\r\n        formData.append('icon', icon)\r\n        formData.append('bookId', activeBookId)\r\n\r\n        startTransition(async () => {\r\n            if (initialData) {\r\n                formData.append('id', initialData.id)\r\n                await updateFolder(formData)\r\n            } else {\r\n                await createFolder(formData)\r\n            }\r\n            if (onSuccess) onSuccess()\r\n            onClose()\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-8 bg-slate-900/40 backdrop-blur-sm animate-fade-in\">\r\n            <div className=\"glass-card w-full max-w-2xl rounded-2xl shadow-premium overflow-hidden flex flex-col animate-slide-up border border-white/80 dark:border-slate-800 max-h-[90vh] overflow-y-auto scrollbar-hide\">\r\n                <div className=\"flex items-center justify-between px-8 py-6 border-b border-gray-100 dark:border-gray-800 flex-shrink-0\">\r\n                    <div>\r\n                        <h1 className=\"text-2xl font-black tracking-tight text-gray-900 dark:text-white uppercase tracking-widest\">\r\n                            {initialData ? 'Editar Carpeta' : 'Nueva Carpeta'}\r\n                        </h1>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600 transition-colors\">\r\n                        <span className=\"material-symbols-outlined text-2xl\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <form onSubmit={handleSubmit} className=\"p-8 space-y-6\">\r\n                    <div className=\"space-y-4\">\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-700 dark:text-slate-300\">Nombre de la Carpeta</label>\r\n                            <input\r\n                                type=\"text\"\r\n                                value={name}\r\n                                onChange={(e) => setName(e.target.value)}\r\n                                placeholder=\"Ej. Gastos del Hogar\"\r\n                                className=\"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-white/10 bg-white/50 dark:bg-slate-900/50 focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none transition-all font-medium\"\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-6 pt-4 border-t border-gray-100 dark:border-white/5\">\r\n                        <ColorPicker value={color} onChange={setColor} />\r\n                        <IconPicker value={icon} onChange={setIcon} />\r\n                    </div>\r\n\r\n                    <div className=\"pt-6 flex justify-end gap-3 sticky bottom-0 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md p-4 -mx-8 -mb-8 border-t border-gray-100 dark:border-white/5\">\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={onClose}\r\n                            className=\"px-6 h-12 rounded-xl text-slate-600 dark:text-slate-400 font-bold hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\"\r\n                        >\r\n                            Cancelar\r\n                        </button>\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isPending}\r\n                            className=\"px-6 h-12 rounded-xl bg-primary hover:bg-primary-hover text-white font-bold shadow-lg shadow-primary/20 transition-all flex items-center gap-2\"\r\n                        >\r\n                            {isPending && <div className=\"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin\" />}\r\n                            Guardar\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;;;;;;;AAWO,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAE,YAAY,EAAE,WAAW,EAAE,SAAS,EAAoB;;IACnG,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8KAAa;IAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IAEjC,IAAA,0KAAS;iCAAC;YACN,IAAI,QAAQ;gBACR,IAAI,aAAa;oBACb,QAAQ,YAAY,IAAI;oBACxB,SAAS,YAAY,KAAK,IAAI;oBAC9B,QAAQ,YAAY,IAAI,IAAI;gBAChC,OAAO;oBACH,QAAQ;oBACR,SAAS;oBACT,QAAQ;gBACZ;YACJ;QACJ;gCAAG;QAAC;QAAQ;KAAY;IAExB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,IAAI,CAAC,cAAc;QAEnB,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,SAAS;QACzB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,UAAU;QAE1B,gBAAgB;YACZ,IAAI,aAAa;gBACb,SAAS,MAAM,CAAC,MAAM,YAAY,EAAE;gBACpC,MAAM,IAAA,yKAAY,EAAC;YACvB,OAAO;gBACH,MAAM,IAAA,yKAAY,EAAC;YACvB;YACA,IAAI,WAAW;YACf;QACJ;IACJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;sCACG,cAAA,6LAAC;gCAAG,WAAU;0CACT,cAAc,mBAAmB;;;;;;;;;;;sCAG1C,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAChC,cAAA,6LAAC;gCAAK,WAAU;0CAAqC;;;;;;;;;;;;;;;;;8BAI7D,6LAAC;oBAAK,UAAU;oBAAc,WAAU;;sCACpC,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAM,WAAU;kDAAuD;;;;;;kDACxE,6LAAC;wCACG,MAAK;wCACL,OAAO;wCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;wCACvC,aAAY;wCACZ,WAAU;wCACV,QAAQ;;;;;;;;;;;;;;;;;sCAKpB,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,qJAAW;oCAAC,OAAO;oCAAO,UAAU;;;;;;8CACrC,6LAAC,mJAAU;oCAAC,OAAO;oCAAM,UAAU;;;;;;;;;;;;sCAGvC,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCACG,MAAK;oCACL,SAAS;oCACT,WAAU;8CACb;;;;;;8CAGD,6LAAC;oCACG,MAAK;oCACL,UAAU;oCACV,WAAU;;wCAET,2BAAa,6LAAC;4CAAI,WAAU;;;;;;wCAA8E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQvI;GAnGgB;;QACyB,8KAAa;;;KADtC"}},
    {"offset": {"line": 982, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\r\n\r\nimport { createClient } from \"@/utils/supabase/server\"\r\nimport { revalidatePath } from \"next/cache\"\r\n\r\nexport async function createCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').insert({\r\n        name,\r\n        book_id: bookId,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function createFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n    const bookId = formData.get('bookId') as string\r\n\r\n    if (!bookId) return { error: 'Book ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').insert({\r\n        name,\r\n        book_id: bookId,\r\n        color,\r\n        icon,\r\n        user_id: user.id\r\n    })\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\r\n    const supabase = await createClient()\r\n\r\n    const { error } = await supabase.from('categories')\r\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\r\n        .eq('id', categoryId)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    const supabase = await createClient()\r\n    const { error } = await supabase.from('categories').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function deleteFolder(id: string) {\r\n    const supabase = await createClient()\r\n    // Optional logic: delete items or move to ungrouped? \r\n    // Usually cascade or restricted. For now simple delete.\r\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n}\r\n\r\nexport async function updateCategory(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const folderId = formData.get('folderId') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('categories').update({\r\n        name,\r\n        folder_id: folderId === 'ungrouped' ? null : folderId,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n\r\nexport async function updateFolder(formData: FormData) {\r\n    const supabase = await createClient()\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    if (!user) return { error: 'Unauthorized' }\r\n\r\n    const id = formData.get('id') as string\r\n    const name = formData.get('name') as string\r\n    const color = formData.get('color') as string\r\n    const icon = formData.get('icon') as string\r\n\r\n    if (!id) return { error: 'ID is required' }\r\n\r\n    const { error } = await supabase.from('category_folders').update({\r\n        name,\r\n        color,\r\n        icon\r\n    }).eq('id', id)\r\n\r\n    if (error) return { error: error.message }\r\n    revalidatePath('/categories')\r\n    return { success: true }\r\n}\r\n"],"names":[],"mappings":";;;;;;;MA2DsB,wBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA,gDAAA"}},
    {"offset": {"line": 999, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/categories/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { Category, CategoryFolder } from '@/types';\r\nimport { CategoryModal } from '@/components/categories/CategoryModal';\r\nimport { FolderModal } from '@/components/categories/FolderModal';\r\nimport { moveCategory } from '@/app/actions/category-actions';\r\n\r\n// Reuse the COLOR_MAP logic or helper\r\nconst COLOR_MAP: Record<string, { bg: string, text: string, ring: string, border: string, solid: string }> = {\r\n    red: { bg: 'bg-red-100 dark:bg-red-900/30', text: 'text-red-600 dark:text-red-400', ring: 'ring-red-500/10', border: 'border-red-200', solid: 'bg-red-500' },\r\n    orange: { bg: 'bg-orange-100 dark:bg-orange-900/30', text: 'text-orange-600 dark:text-orange-400', ring: 'ring-orange-500/10', border: 'border-orange-200', solid: 'bg-orange-500' },\r\n    amber: { bg: 'bg-amber-100 dark:bg-amber-900/30', text: 'text-amber-600 dark:text-amber-400', ring: 'ring-amber-500/10', border: 'border-amber-200', solid: 'bg-amber-500' },\r\n    yellow: { bg: 'bg-yellow-100 dark:bg-yellow-900/30', text: 'text-yellow-600 dark:text-yellow-400', ring: 'ring-yellow-500/10', border: 'border-yellow-200', solid: 'bg-yellow-500' },\r\n    lime: { bg: 'bg-lime-100 dark:bg-lime-900/30', text: 'text-lime-600 dark:text-lime-400', ring: 'ring-lime-500/10', border: 'border-lime-200', solid: 'bg-lime-500' },\r\n    green: { bg: 'bg-green-100 dark:bg-green-900/30', text: 'text-green-600 dark:text-green-400', ring: 'ring-green-500/10', border: 'border-green-200', solid: 'bg-green-500' },\r\n    emerald: { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-600 dark:text-emerald-400', ring: 'ring-emerald-500/10', border: 'border-emerald-200', solid: 'bg-emerald-500' },\r\n    teal: { bg: 'bg-teal-100 dark:bg-teal-900/30', text: 'text-teal-600 dark:text-teal-400', ring: 'ring-teal-500/10', border: 'border-teal-200', solid: 'bg-teal-500' },\r\n    cyan: { bg: 'bg-cyan-100 dark:bg-cyan-900/30', text: 'text-cyan-600 dark:text-cyan-400', ring: 'ring-cyan-500/10', border: 'border-cyan-200', solid: 'bg-cyan-500' },\r\n    sky: { bg: 'bg-sky-100 dark:bg-sky-900/30', text: 'text-sky-600 dark:text-sky-400', ring: 'ring-sky-500/10', border: 'border-sky-200', solid: 'bg-sky-500' },\r\n    blue: { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-600 dark:text-blue-400', ring: 'ring-blue-500/10', border: 'border-blue-200', solid: 'bg-blue-500' },\r\n    indigo: { bg: 'bg-indigo-100 dark:bg-indigo-900/30', text: 'text-indigo-600 dark:text-indigo-400', ring: 'ring-indigo-500/10', border: 'border-indigo-200', solid: 'bg-indigo-500' },\r\n    violet: { bg: 'bg-violet-100 dark:bg-violet-900/30', text: 'text-violet-600 dark:text-violet-400', ring: 'ring-violet-500/10', border: 'border-violet-200', solid: 'bg-violet-500' },\r\n    purple: { bg: 'bg-purple-100 dark:bg-purple-900/30', text: 'text-purple-600 dark:text-purple-400', ring: 'ring-purple-500/10', border: 'border-purple-200', solid: 'bg-purple-500' },\r\n    fuchsia: { bg: 'bg-fuchsia-100 dark:bg-fuchsia-900/30', text: 'text-fuchsia-600 dark:text-fuchsia-400', ring: 'ring-fuchsia-500/10', border: 'border-fuchsia-200', solid: 'bg-fuchsia-500' },\r\n    pink: { bg: 'bg-pink-100 dark:bg-pink-900/30', text: 'text-pink-600 dark:text-pink-400', ring: 'ring-pink-500/10', border: 'border-pink-200', solid: 'bg-pink-500' },\r\n    rose: { bg: 'bg-rose-100 dark:bg-rose-900/30', text: 'text-rose-600 dark:text-rose-400', ring: 'ring-rose-500/10', border: 'border-rose-200', solid: 'bg-rose-500' },\r\n    slate: { bg: 'bg-slate-100 dark:bg-slate-800', text: 'text-slate-600 dark:text-slate-400', ring: 'ring-slate-500/10', border: 'border-slate-200', solid: 'bg-slate-500' },\r\n}\r\n\r\nimport * as Icons from \"lucide-react\"\r\nfunction CategoryIcon({ icon, className }: { icon: string, className?: string }) {\r\n    const LucideIcon = (Icons as any)[icon]\r\n    if (LucideIcon) return <LucideIcon className={className} />\r\n    return <span className={`material-symbols-outlined ${className} !text-[inherit]`}>{icon}</span>\r\n}\r\n\r\nexport default function Categories() {\r\n    const { categories, categoryFolders, activeBookId, refreshBooks } = useFinance();\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    // Modal States\r\n    const [isCatModalOpen, setIsCatModalOpen] = useState(false);\r\n    const [isFolderModalOpen, setIsFolderModalOpen] = useState(false);\r\n    const [preselectedFolderId, setPreselectedFolderId] = useState<string | undefined>(undefined);\r\n    const [editingCategory, setEditingCategory] = useState<Category | null>(null);\r\n    const [editingFolder, setEditingFolder] = useState<CategoryFolder | null>(null);\r\n    const [dragOverFolderId, setDragOverFolderId] = useState<string | null>(null);\r\n\r\n    // Group Categories\r\n    const foldersUI = useMemo(() => {\r\n        const folderMap = new Map<string, { folder: CategoryFolder | null, items: Category[] }>();\r\n        const searchTermLower = searchTerm.toLowerCase();\r\n\r\n        categoryFolders.forEach(f => {\r\n            folderMap.set(f.id, { folder: f, items: [] });\r\n        });\r\n\r\n        const UNGROUPED_ID = 'ungrouped';\r\n        if (!folderMap.has(UNGROUPED_ID)) {\r\n            folderMap.set(UNGROUPED_ID, { folder: null, items: [] });\r\n        }\r\n\r\n        categories.forEach(cat => {\r\n            if (searchTerm && !cat.name.toLowerCase().includes(searchTermLower)) return;\r\n            const fId = cat.folder_id || UNGROUPED_ID;\r\n            if (folderMap.has(fId)) {\r\n                folderMap.get(fId)!.items.push(cat);\r\n            } else {\r\n                folderMap.get(UNGROUPED_ID)!.items.push(cat);\r\n            }\r\n        });\r\n\r\n        const result = [];\r\n        for (const [key, value] of folderMap.entries()) {\r\n            if (value.folder) {\r\n                result.push({\r\n                    id: value.folder.id,\r\n                    name: value.folder.name,\r\n                    icon: value.folder.icon || 'folder',\r\n                    color: value.folder.color || 'blue',\r\n                    count: value.items.length,\r\n                    items: value.items,\r\n                    original: value.folder\r\n                });\r\n            } else if (value.items.length > 0 || (key === UNGROUPED_ID && categoryFolders.length === 0)) {\r\n                // Show ungrouped if items exist OR if no folders exist at all (initial state)\r\n                result.push({\r\n                    id: 'ungrouped',\r\n                    name: 'General / Sin Carpeta',\r\n                    icon: 'category',\r\n                    color: 'slate',\r\n                    count: value.items.length,\r\n                    items: value.items,\r\n                    original: null\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    }, [categories, categoryFolders, searchTerm]);\r\n\r\n    // Drag and Drop Handlers\r\n    const handleDragStart = (e: React.DragEvent, catId: string) => {\r\n        e.dataTransfer.setData('categoryId', catId);\r\n        e.dataTransfer.effectAllowed = 'move';\r\n    };\r\n\r\n    const handleDragOver = (e: React.DragEvent, folderId: string) => {\r\n        e.preventDefault();\r\n        e.dataTransfer.dropEffect = 'move';\r\n        setDragOverFolderId(folderId);\r\n    };\r\n\r\n    const handleDragLeave = (e: React.DragEvent) => {\r\n        e.preventDefault();\r\n        setDragOverFolderId(null);\r\n    };\r\n\r\n    const handleDrop = async (e: React.DragEvent, targetFolderId: string) => {\r\n        e.preventDefault();\r\n        setDragOverFolderId(null);\r\n        const categoryId = e.dataTransfer.getData('categoryId');\r\n        if (categoryId) {\r\n            // Optimistic update could go here, but we'll rely on server revalidation for now\r\n            await moveCategory(categoryId, targetFolderId);\r\n            refreshBooks(); // Force refresh context\r\n        }\r\n    };\r\n\r\n    const handleAddCategory = (folderId?: string) => {\r\n        setEditingCategory(null);\r\n        setPreselectedFolderId(folderId);\r\n        setIsCatModalOpen(true);\r\n    };\r\n\r\n    const handleAddFolder = () => {\r\n        setEditingFolder(null);\r\n        setIsFolderModalOpen(true);\r\n    };\r\n\r\n    const handleEditCategory = (cat: Category) => {\r\n        setEditingCategory(cat);\r\n        setPreselectedFolderId(undefined);\r\n        setIsCatModalOpen(true);\r\n    };\r\n\r\n    const handleEditFolder = (folder: CategoryFolder) => {\r\n        setEditingFolder(folder);\r\n        setIsFolderModalOpen(true);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex h-full w-full overflow-hidden relative\">\r\n            {/* Background blobs */}\r\n            <div className=\"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-blue-400/15 rounded-full blur-[100px] pointer-events-none\"></div>\r\n            <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-400/10 rounded-full blur-[100px] pointer-events-none\"></div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 flex flex-col h-full overflow-hidden z-10\">\r\n                <header className=\"px-8 py-6 flex items-center justify-between border-b border-white/40\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <div className=\"flex items-center gap-2 text-xs font-semibold text-slate-500 mb-1\">\r\n                            <span>Configuración</span>\r\n                            <span className=\"material-symbols-outlined text-[14px]\">chevron_right</span>\r\n                            <span className=\"text-primary\">Categorías</span>\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-black text-slate-900 tracking-tight dark:text-white uppercase tracking-widest\">Gestión de Categorías</h2>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-3\">\r\n                        <button\r\n                            onClick={handleAddFolder}\r\n                            className=\"bg-white hover:bg-gray-50 text-slate-700 px-5 py-2.5 rounded-xl flex items-center gap-2 font-bold text-sm border border-slate-200 shadow-sm transition-all\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-[20px]\">create_new_folder</span>\r\n                            <span>Nueva Carpeta</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => handleAddCategory()}\r\n                            className=\"bg-primary hover:bg-primary-hover text-white px-5 py-2.5 rounded-xl flex items-center gap-2 shadow-lg shadow-blue-500/20 font-bold text-sm transition-all\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                            <span>Nueva Categoría</span>\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-8 scrollbar-hide pb-32\">\r\n                    <div className=\"max-w-6xl mx-auto space-y-8\">\r\n                        {/* Search Bar - Optional but good for UX */}\r\n                        <div className=\"relative group max-w-md\">\r\n                            <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors material-symbols-outlined\">search</span>\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Buscar categorías...\"\r\n                                value={searchTerm}\r\n                                onChange={(e) => setSearchTerm(e.target.value)}\r\n                                className=\"w-full h-12 pl-12 pr-6 rounded-xl border border-white/60 dark:border-slate-800 bg-white/50 dark:bg-slate-900/50 backdrop-blur-xl focus:outline-none focus:ring-4 focus:ring-primary/10 transition-all font-bold text-slate-900 dark:text-white placeholder:text-slate-400 shadow-sm text-sm\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-2 gap-6\">\r\n                            {foldersUI.map(folder => {\r\n                                const colors = COLOR_MAP[folder.color] || COLOR_MAP.slate;\r\n                                const isDragOver = dragOverFolderId === folder.id;\r\n\r\n                                return (\r\n                                    <div\r\n                                        key={folder.id}\r\n                                        className={`glass-card rounded-[2rem] p-6 shadow-soft group/folder flex flex-col h-full ring-2 transition-all ${isDragOver\r\n                                                ? 'ring-primary border-primary/50 bg-primary/5 dark:bg-primary/10 scale-[1.02]'\r\n                                                : 'ring-transparent'\r\n                                            }`}\r\n                                        onDragOver={(e) => handleDragOver(e, folder.id)}\r\n                                        onDragLeave={handleDragLeave}\r\n                                        onDrop={(e) => handleDrop(e, folder.id)}\r\n                                    >\r\n                                        <div className=\"flex items-center justify-between mb-4 pb-4 border-b border-slate-100 dark:border-slate-800\">\r\n                                            <div className=\"flex items-center gap-4\">\r\n                                                <div\r\n                                                    className={`size-12 rounded-2xl flex items-center justify-center ${colors.bg} ${colors.text}`}\r\n                                                >\r\n                                                    <CategoryIcon icon={folder.icon} className=\"text-2xl\" />\r\n                                                </div>\r\n                                                <div>\r\n                                                    <h4 className=\"font-black text-slate-900 dark:text-white text-lg leading-tight\">{folder.name}</h4>\r\n                                                    <p className=\"text-xs font-bold text-slate-400 mt-0.5\">{folder.count} categorías</p>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div className=\"flex items-center gap-2\">\r\n                                                {folder.id !== 'ungrouped' && (\r\n                                                    <button\r\n                                                        onClick={() => handleEditFolder(folder.original!)}\r\n                                                        className=\"size-8 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 flex items-center justify-center text-slate-400 hover:text-primary transition-colors\"\r\n                                                        title=\"Editar carpeta\"\r\n                                                    >\r\n                                                        <span className=\"material-symbols-outlined text-[18px]\">edit</span>\r\n                                                    </button>\r\n                                                )}\r\n                                                <button\r\n                                                    onClick={() => handleAddCategory(folder.id)}\r\n                                                    className=\"size-8 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 flex items-center justify-center text-slate-400 hover:text-primary transition-colors\"\r\n                                                    title=\"Agregar categoría aquí\"\r\n                                                >\r\n                                                    <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        <div className=\"flex-1 space-y-2 min-h-[50px]\">\r\n                                            {folder.items.length > 0 ? (\r\n                                                folder.items.map(item => {\r\n                                                    const itemColors = COLOR_MAP[item.color || 'slate'] || COLOR_MAP.slate;\r\n                                                    return (\r\n                                                        <div\r\n                                                            key={item.id}\r\n                                                            draggable\r\n                                                            onDragStart={(e) => handleDragStart(e, item.id)}\r\n                                                            className=\"flex items-center justify-between p-3 rounded-xl transition-all border border-transparent bg-white/0 hover:bg-white/60 dark:hover:bg-slate-800 hover:border-slate-100 dark:hover:border-slate-700 hover:shadow-sm cursor-grab active:cursor-grabbing group/row\"\r\n                                                        >\r\n                                                            <div className=\"flex items-center gap-3 flex-1\">\r\n                                                                <span className=\"material-symbols-outlined text-slate-300 text-[18px] opacity-0 group-hover/row:opacity-100 transition-opacity\">drag_indicator</span>\r\n                                                                <div\r\n                                                                    className={`size-9 rounded-full flex items-center justify-center border ${itemColors.bg} ${itemColors.text} ${itemColors.border}`}\r\n                                                                >\r\n                                                                    <CategoryIcon icon={item.icon || 'category'} className=\"text-[16px]\" />\r\n                                                                </div>\r\n                                                                <span className=\"text-sm font-bold text-slate-600 dark:text-slate-300\">{item.name}</span>\r\n                                                            </div>\r\n                                                            <button\r\n                                                                onClick={() => handleEditCategory(item)}\r\n                                                                className=\"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-400 transition-opacity opacity-0 group-hover/row:opacity-100\"\r\n                                                                title=\"Editar categoría\"\r\n                                                            >\r\n                                                                <span className=\"material-symbols-outlined text-[16px]\">edit</span>\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    )\r\n                                                })\r\n                                            ) : (\r\n                                                <div className=\"h-full flex flex-col items-center justify-center py-8 border-2 border-dashed border-slate-100 dark:border-slate-800 rounded-xl text-slate-300\">\r\n                                                    <p className=\"text-xs font-bold\">Arrastra categorías aquí</p>\r\n                                                </div>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <CategoryModal\r\n                isOpen={isCatModalOpen}\r\n                onClose={() => setIsCatModalOpen(false)}\r\n                folders={categoryFolders}\r\n                activeBookId={activeBookId}\r\n                defaultFolderId={preselectedFolderId}\r\n                initialData={editingCategory}\r\n                onSuccess={refreshBooks}\r\n            />\r\n\r\n            <FolderModal\r\n                isOpen={isFolderModalOpen}\r\n                onClose={() => setIsFolderModalOpen(false)}\r\n                activeBookId={activeBookId}\r\n                initialData={editingFolder}\r\n                onSuccess={refreshBooks}\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":[],"mappings":"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"}}]
}