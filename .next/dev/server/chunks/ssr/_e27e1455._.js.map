{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/utils/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\nexport async function createClient() {\n    const cookieStore = await cookies()\n\n    return createServerClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n        {\n            cookies: {\n                getAll() {\n                    return cookieStore.getAll()\n                },\n                setAll(cookiesToSet) {\n                    try {\n                        cookiesToSet.forEach(({ name, value, options }) =>\n                            cookieStore.set(name, value, options)\n                        )\n                    } catch {\n                        // The `setAll` method was called from a Server Component.\n                        // This can be ignored if you have middleware refreshing\n                        // user sessions.\n                    }\n                },\n            },\n        }\n    )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,OAAO,IAAA,+LAAkB,sUAGrB;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACrB;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/app/actions/book-actions.ts"],"sourcesContent":["'use server'\n\nimport { createClient } from \"@/utils/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\nimport { redirect } from \"next/navigation\"\n\nexport type BookFormState = {\n    message?: string\n    errors?: {\n        [key: string]: string[]\n    }\n}\n\nexport async function createBook(prevState: BookFormState, formData: FormData) {\n    const supabase = await createClient()\n\n    const { data: { user }, error: authError } = await supabase.auth.getUser()\n\n    if (authError || !user) {\n        return { message: 'Error: No autorizado. Por favor inicia sesi√≥n.' }\n    }\n\n    const name = formData.get('name') as string\n    const description = formData.get('description') as string\n    const currency = formData.get('currency') as string\n    const periodStart = formData.get('periodStart') as string\n    const fiscalClose = formData.get('fiscalClose') as string\n\n    // Appearance\n    const color = formData.get('color') as string || 'blue'\n    const icon = formData.get('icon') as string || 'Wallet'\n\n    // Visualization settings\n    const hideCents = formData.get('hideCents') === 'on'\n    const groupSmall = formData.get('groupSmall') === 'on'\n    const autoDark = formData.get('autoDark') === 'on'\n\n    // Notification settings\n    const weeklySummary = formData.get('weeklySummary') === 'on'\n    const budgetAlerts = formData.get('budgetAlerts') === 'on'\n    const paymentReminders = formData.get('paymentReminders') === 'on'\n\n    const { data, error } = await supabase.from('books').insert({\n        user_id: user.id,\n        name,\n        short_description: description,\n        currency,\n        color,\n        icon,\n        period_start: periodStart || null,\n        fiscal_close_month: fiscalClose,\n        visualization_settings: {\n            hide_cents: hideCents,\n            group_small_categories: groupSmall,\n            auto_dark_mode: autoDark\n        },\n        notification_settings: {\n            weekly_summary: weeklySummary,\n            budget_alerts: budgetAlerts,\n            payment_reminders: paymentReminders\n        }\n    }).select().single()\n\n    if (error) {\n        return { message: 'Error creating book: ' + error.message }\n    }\n\n    if (data) {\n        revalidatePath('/dashboard')\n        return { message: 'Libro creado correctamente', data: data }\n    }\n\n    return { message: 'Error desconocido al crear el libro' }\n}\n\nexport async function updateBook(id: string, prevState: BookFormState, formData: FormData) {\n    const supabase = await createClient()\n\n    const name = formData.get('name') as string\n    const description = formData.get('description') as string\n    const currency = formData.get('currency') as string\n    const periodStart = formData.get('periodStart') as string\n    const fiscalClose = formData.get('fiscalClose') as string\n\n    // Appearance\n    const color = formData.get('color') as string || 'blue'\n    const icon = formData.get('icon') as string || 'Wallet'\n\n    // Visualization settings\n    const hideCents = formData.get('hideCents') === 'on'\n    const groupSmall = formData.get('groupSmall') === 'on'\n    const autoDark = formData.get('autoDark') === 'on'\n\n    // Notification settings\n    const weeklySummary = formData.get('weeklySummary') === 'on'\n    const budgetAlerts = formData.get('budgetAlerts') === 'on'\n    const paymentReminders = formData.get('paymentReminders') === 'on'\n\n    const { error } = await supabase.from('books').update({\n        name,\n        short_description: description,\n        currency,\n        color,\n        icon,\n        period_start: periodStart || null,\n        fiscal_close_month: fiscalClose,\n        visualization_settings: {\n            hide_cents: hideCents,\n            group_small_categories: groupSmall,\n            auto_dark_mode: autoDark\n        },\n        notification_settings: {\n            weekly_summary: weeklySummary,\n            budget_alerts: budgetAlerts,\n            payment_reminders: paymentReminders\n        }\n    }).eq('id', id)\n\n    if (error) {\n        return { message: 'Error updating book: ' + error.message }\n    }\n\n    revalidatePath(`/books/${id}/settings`)\n    return { message: 'Libro actualizado correctamente' }\n}\n\nexport async function deleteBook(id: string) {\n    const supabase = await createClient()\n    const { error } = await supabase.from('books').delete().eq('id', id)\n\n    if (error) {\n        throw new Error(error.message)\n    }\n\n    revalidatePath('/dashboard')\n    redirect('/dashboard')\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/.next-internal/server/app/%28dashboard%29/books/create/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {createBook as '6095f0c14631a054e1fcd79cfd112a6245dfe25f6d'} from 'ACTIONS_MODULE0'\nexport {updateBook as '70063ef086deaa73ce98203c3b48b46dddf6c2ed0b'} from 'ACTIONS_MODULE0'\nexport {deleteBook as '40e45e70d015f84a65d26dca3e235a6efb164dd243'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}