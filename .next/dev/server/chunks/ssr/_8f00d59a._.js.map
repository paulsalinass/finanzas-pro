{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/utils/supabase/server.ts"],"sourcesContent":["import { createServerClient } from '@supabase/ssr'\nimport { cookies } from 'next/headers'\n\nexport async function createClient() {\n    const cookieStore = await cookies()\n\n    return createServerClient(\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n        {\n            cookies: {\n                getAll() {\n                    return cookieStore.getAll()\n                },\n                setAll(cookiesToSet) {\n                    try {\n                        cookiesToSet.forEach(({ name, value, options }) =>\n                            cookieStore.set(name, value, options)\n                        )\n                    } catch {\n                        // The `setAll` method was called from a Server Component.\n                        // This can be ignored if you have middleware refreshing\n                        // user sessions.\n                    }\n                },\n            },\n        }\n    )\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,0IAAO;IAEjC,OAAO,IAAA,+LAAkB,sUAGrB;QACI,SAAS;YACL;gBACI,OAAO,YAAY,MAAM;YAC7B;YACA,QAAO,YAAY;gBACf,IAAI;oBACA,aAAa,OAAO,CAAC,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,GAC1C,YAAY,GAAG,CAAC,MAAM,OAAO;gBAErC,EAAE,OAAM;gBACJ,0DAA0D;gBAC1D,wDAAwD;gBACxD,iBAAiB;gBACrB;YACJ;QACJ;IACJ;AAER"}},
    {"offset": {"line": 36, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/app/actions/category-actions.ts"],"sourcesContent":["'use server'\n\nimport { createClient } from \"@/utils/supabase/server\"\nimport { revalidatePath } from \"next/cache\"\n\nexport async function createCategory(formData: FormData) {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) return { error: 'Unauthorized' }\n\n    const name = formData.get('name') as string\n    const folderId = formData.get('folderId') as string\n    const color = formData.get('color') as string\n    const icon = formData.get('icon') as string\n    const bookId = formData.get('bookId') as string\n\n    if (!bookId) return { error: 'Book ID is required' }\n\n    const { error } = await supabase.from('categories').insert({\n        name,\n        book_id: bookId,\n        folder_id: folderId === 'ungrouped' ? null : folderId,\n        color,\n        icon,\n        user_id: user.id\n    })\n\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n    return { success: true }\n}\n\nexport async function createFolder(formData: FormData) {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) return { error: 'Unauthorized' }\n\n    const name = formData.get('name') as string\n    const color = formData.get('color') as string\n    const icon = formData.get('icon') as string\n    const bookId = formData.get('bookId') as string\n\n    if (!bookId) return { error: 'Book ID is required' }\n\n    const { error } = await supabase.from('category_folders').insert({\n        name,\n        book_id: bookId,\n        color,\n        icon,\n        user_id: user.id\n    })\n\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n    return { success: true }\n}\n\nexport async function moveCategory(categoryId: string, targetFolderId: string) {\n    const supabase = await createClient()\n\n    const { error } = await supabase.from('categories')\n        .update({ folder_id: targetFolderId === 'ungrouped' ? null : targetFolderId })\n        .eq('id', categoryId)\n\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n    return { success: true }\n}\n\nexport async function deleteCategory(id: string) {\n    const supabase = await createClient()\n    const { error } = await supabase.from('categories').delete().eq('id', id)\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n}\n\nexport async function deleteFolder(id: string) {\n    const supabase = await createClient()\n    // Optional logic: delete items or move to ungrouped? \n    // Usually cascade or restricted. For now simple delete.\n    const { error } = await supabase.from('category_folders').delete().eq('id', id)\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n}\n\nexport async function updateCategory(formData: FormData) {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) return { error: 'Unauthorized' }\n\n    const id = formData.get('id') as string\n    const name = formData.get('name') as string\n    const folderId = formData.get('folderId') as string\n    const color = formData.get('color') as string\n    const icon = formData.get('icon') as string\n\n    if (!id) return { error: 'ID is required' }\n\n    const { error } = await supabase.from('categories').update({\n        name,\n        folder_id: folderId === 'ungrouped' ? null : folderId,\n        color,\n        icon\n    }).eq('id', id)\n\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n    return { success: true }\n}\n\nexport async function updateFolder(formData: FormData) {\n    const supabase = await createClient()\n    const { data: { user } } = await supabase.auth.getUser()\n\n    if (!user) return { error: 'Unauthorized' }\n\n    const id = formData.get('id') as string\n    const name = formData.get('name') as string\n    const color = formData.get('color') as string\n    const icon = formData.get('icon') as string\n\n    if (!id) return { error: 'ID is required' }\n\n    const { error } = await supabase.from('category_folders').update({\n        name,\n        color,\n        icon\n    }).eq('id', id)\n\n    if (error) return { error: error.message }\n    revalidatePath('/categories')\n    return { success: true }\n}\n\nexport async function reorderCategories(items: { id: string; order: number }[]) {\n    const supabase = await createClient()\n\n    const { data: { user } } = await supabase.auth.getUser()\n    if (!user) return { error: 'Unauthorized' }\n\n    try {\n        // Execute sequentially to avoid overwhelming the connection or hitting rate limits\n        // causing \"snap back\" on larger lists.\n        for (const item of items) {\n            const { error } = await supabase.from('categories')\n                .update({ order: item.order })\n                .eq('id', item.id);\n\n            if (error) {\n                console.error(`Failed to update order for category ${item.id}:`, error);\n                // Choose to continue or throw? \n                // If we throw, we stop. Partial updates might occur.\n                // Let's log and continue to try to save as much as possible.\n            }\n        }\n\n        revalidatePath('/categories');\n        return { success: true };\n    } catch (error: any) {\n        return { error: error.message };\n    }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/PD%20-%20255%20SSD/Cio/Proyectos/Internos/Apps/finanzas-pro/.next-internal/server/app/%28dashboard%29/categories/page/actions.js%20%28server%20actions%20loader%29"],"sourcesContent":["export {reorderCategories as '4059f211e7669debcee239463e8901699a7f2b7d5d'} from 'ACTIONS_MODULE0'\nexport {createCategory as '40ef68b1e954541f24d8a4aaa3cade72ef55cd2e67'} from 'ACTIONS_MODULE0'\nexport {updateCategory as '40a680bceef55496edf0f120787b0ff31a2336938a'} from 'ACTIONS_MODULE0'\nexport {createFolder as '409da29aca1f799ee873ce4b3e42a5dbc85a55b1d1'} from 'ACTIONS_MODULE0'\nexport {updateFolder as '405a0688f2ad623ba4c7dd22759fc48431f55c7cd7'} from 'ACTIONS_MODULE0'\n"],"names":[],"mappings":";AAAA"}}]
}