{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/edit-transaction/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { TransactionType } from '@/types';\r\n\r\nexport default function EditTransaction() {\r\n    const router = useRouter();\r\n    const { addTransaction, accounts, categories } = useFinance();\r\n\r\n    const [amount, setAmount] = useState('0.00');\r\n    const [description, setDescription] = useState('');\r\n    const [categoryId, setCategoryId] = useState('');\r\n    const [account, setAccount] = useState('');\r\n\r\n    // Set default categories\r\n    React.useEffect(() => {\r\n        if (categories.length > 0 && !categoryId) {\r\n            setCategoryId(categories[0].id);\r\n        }\r\n    }, [categories, categoryId]);\r\n\r\n    // Set default or ensure valid account\r\n    React.useEffect(() => {\r\n        if (accounts.length > 0) {\r\n            // If current account is empty OR not found in the new accounts list\r\n            const exists = accounts.find(a => a.name === account);\r\n            if (!account || !exists) {\r\n                setAccount(accounts[0].name);\r\n            }\r\n        }\r\n    }, [accounts, account]);\r\n    const [type, setType] = useState<TransactionType>('EXPENSE');\r\n    const [date, setDate] = useState(new Date().toISOString().split('T')[0]);\r\n\r\n    const handleSave = () => {\r\n        const numAmount = parseFloat(amount);\r\n        if (isNaN(numAmount) || numAmount <= 0) return alert('Por favor ingresa un monto v√°lido');\r\n        if (!description.trim()) return alert('Por favor ingresa una descripci√≥n');\r\n\r\n        addTransaction({\r\n            amount: numAmount,\r\n            type,\r\n            description,\r\n            date: new Date(date).toISOString(),\r\n            category: '',\r\n            category_id: categoryId,\r\n            account: account, // Pass account name so context can find ID\r\n            icon: 'attach_money'\r\n        });\r\n\r\n        router.push('/transactions');\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-1 overflow-y-auto p-4 md:p-8 scrollbar-hide flex flex-col items-center\">\r\n            <div className=\"glass-card w-full max-w-[900px] rounded-[3rem] shadow-glass flex flex-col relative transition-all duration-500 mb-20 animate-fade-in lg:mt-10\">\r\n                <div className=\"flex items-center justify-between px-8 py-6 border-b border-gray-100/50 dark:border-slate-800/50\">\r\n                    <h2 className=\"text-xl font-black tracking-tight text-text-main dark:text-white flex items-center gap-2 uppercase text-[14px] tracking-widest\">Nuevo Movimiento</h2>\r\n                    <button onClick={() => router.back()} className=\"p-2.5 rounded-2xl hover:bg-gray-100 dark:hover:bg-slate-800 text-text-muted transition-all\">\r\n                        <span className=\"material-symbols-outlined\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                <div className=\"flex flex-col md:flex-row h-full\">\r\n                    <div className=\"w-full md:w-[40%] p-8 md:p-12 border-b md:border-b-0 md:border-r border-gray-100/50 dark:border-slate-800/50 flex flex-col gap-10 bg-white/30 dark:bg-slate-900/30\">\r\n                        <div className=\"flex-1 flex flex-col justify-center items-center py-6\">\r\n                            <label className=\"text-[10px] font-black text-primary bg-primary/10 px-3 py-1.5 rounded-full uppercase tracking-widest mb-4\">Monto Final</label>\r\n                            <div className=\"relative flex items-center justify-center w-full group\">\r\n                                <span className=\"text-5xl font-black text-text-light/50 dark:text-slate-700 absolute left-4 top-1/2 -translate-y-1/2\">$</span>\r\n                                <input\r\n                                    autoFocus\r\n                                    value={amount}\r\n                                    onChange={(e) => setAmount(e.target.value)}\r\n                                    className=\"w-full bg-transparent border-none text-center text-7xl font-black text-text-main dark:text-white placeholder-gray-200 focus:ring-0 p-0 leading-none h-24 tracking-tighter\"\r\n                                    placeholder=\"0.00\"\r\n                                    type=\"text\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center justify-center gap-2\">\r\n                            <button\r\n                                onClick={() => setType('EXPENSE')}\r\n                                className={`flex-1 py-3 px-4 rounded-xl font-black text-[10px] uppercase tracking-widest shadow-lg transition-all ${type === 'EXPENSE' ? 'bg-primary text-white shadow-blue-500/20' : 'bg-white/50 dark:bg-slate-800/50 text-text-muted border border-gray-100 dark:border-slate-700'}`}\r\n                            >\r\n                                Gasto\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setType('INCOME')}\r\n                                className={`flex-1 py-3 px-4 rounded-xl font-black text-[10px] uppercase tracking-widest transition-all ${type === 'INCOME' ? 'bg-success text-white' : 'bg-white/50 dark:bg-slate-800/50 text-text-muted border border-gray-100 dark:border-slate-700'}`}\r\n                            >\r\n                                Ingreso\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"w-full md:w-[60%] p-8 md:p-12 flex flex-col justify-between gap-8\">\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                            <div className=\"col-span-1 md:col-span-2 space-y-3\">\r\n                                <label className=\"text-[10px] font-black text-text-muted dark:text-slate-500 uppercase tracking-widest ml-2\">Descripci√≥n del comercio</label>\r\n                                <input\r\n                                    value={description}\r\n                                    onChange={(e) => setDescription(e.target.value)}\r\n                                    className=\"block w-full px-6 py-4 border-none ring-1 ring-gray-200 dark:ring-slate-700 rounded-[1.5rem] focus:ring-2 focus:ring-primary text-text-main dark:text-white placeholder-gray-400 bg-white/50 dark:bg-slate-900/50 font-bold transition-all\"\r\n                                    placeholder=\"Ej. Mercadona, Amazon...\"\r\n                                    type=\"text\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                <label className=\"text-[10px] font-black text-text-muted dark:text-slate-500 uppercase tracking-widest ml-2\">Categor√≠a</label>\r\n                                <select\r\n                                    value={categoryId}\r\n                                    onChange={(e) => setCategoryId(e.target.value)}\r\n                                    className=\"block w-full px-6 py-4 border-none ring-1 ring-gray-200 dark:ring-slate-700 rounded-[1.5rem] focus:ring-2 focus:ring-primary text-text-main dark:text-white bg-white/50 dark:bg-slate-900/50 font-bold appearance-none cursor-pointer\"\r\n                                >\r\n                                    {categories.map(cat => (\r\n                                        <option key={cat.id} value={cat.id}>{cat.icon || 'üè∑Ô∏è'} {cat.name}</option>\r\n                                    ))}\r\n                                    {categories.length === 0 && <option value=\"\">Cargando...</option>}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"space-y-3\">\r\n                                <label className=\"text-[10px] font-black text-text-muted dark:text-slate-500 uppercase tracking-widest ml-2\">Cuenta Origen</label>\r\n                                <select\r\n                                    value={account}\r\n                                    onChange={(e) => setAccount(e.target.value)}\r\n                                    className=\"block w-full px-6 py-4 border-none ring-1 ring-gray-200 dark:ring-slate-700 rounded-[1.5rem] focus:ring-2 focus:ring-primary text-text-main dark:text-white bg-white/50 dark:bg-slate-900/50 font-bold appearance-none cursor-pointer\"\r\n                                >\r\n                                    {accounts.map(acc => (\r\n                                        <option key={acc.id} value={acc.name}>{acc.name}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                            <div className=\"col-span-1 md:col-span-2 space-y-3\">\r\n                                <label className=\"text-[10px] font-black text-text-muted dark:text-slate-500 uppercase tracking-widest ml-2\">Fecha del movimiento</label>\r\n                                <input\r\n                                    value={date}\r\n                                    onChange={(e) => setDate(e.target.value)}\r\n                                    className=\"block w-full px-6 py-4 border-none ring-1 ring-gray-200 dark:ring-slate-700 rounded-[1.5rem] focus:ring-2 focus:ring-primary text-text-main dark:text-white placeholder-gray-400 bg-white/50 dark:bg-slate-900/50 font-bold transition-all\"\r\n                                    type=\"date\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-4 pt-6\">\r\n                            <button onClick={() => router.back()} className=\"flex-1 py-4 px-6 rounded-2xl border border-gray-200 dark:border-slate-800 text-text-muted dark:text-slate-400 font-black text-[10px] uppercase tracking-widest hover:bg-gray-50 dark:hover:bg-slate-800 transition-all\">Cancelar</button>\r\n                            <button onClick={handleSave} className=\"flex-[2] py-4 px-6 rounded-2xl bg-primary hover:bg-primary-hover text-white font-black text-[10px] uppercase tracking-widest shadow-xl shadow-blue-500/30 transition-all flex justify-center items-center gap-2\">Guardar Registro</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}