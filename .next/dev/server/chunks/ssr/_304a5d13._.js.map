{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/CreateBudgetModal.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useFinance } from '@/context/FinanceContext';\r\n\r\ninterface CreateBudgetModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport default function CreateBudgetModal({ isOpen, onClose }: CreateBudgetModalProps) {\r\n    const { categories, addBudget, ledgers, activeBookId } = useFinance();\r\n    const [amount, setAmount] = useState('');\r\n    const [categoryId, setCategoryId] = useState('');\r\n    const [isRecurring, setIsRecurring] = useState(false);\r\n    const [recurrenceOption, setRecurrenceOption] = useState('MONTHLY');\r\n    const [endDate, setEndDate] = useState('');\r\n    const [isSubmitting, setIsSubmitting] = useState(false);\r\n\r\n    // Reset form when opening\r\n    // Close on Escape key\r\n    useEffect(() => {\r\n        const handleKeyDown = (e: KeyboardEvent) => {\r\n            if (e.key === 'Escape' && isOpen) {\r\n                onClose();\r\n            }\r\n        };\r\n        window.addEventListener('keydown', handleKeyDown);\r\n        return () => window.removeEventListener('keydown', handleKeyDown);\r\n    }, [isOpen, onClose]);\r\n\r\n    if (!isOpen) return null;\r\n\r\n    const currencySymbol = ledgers.find(l => l.id === activeBookId)?.currency || '$';\r\n\r\n    const recurrenceOptions = [\r\n        { label: 'Diariamente', value: 'DAILY_1' },\r\n        { label: 'Semanalmente', value: 'WEEKLY_1' },\r\n        { label: 'Cada 2 semanas', value: 'WEEKLY_2' },\r\n        { label: 'Cada 3 semanas', value: 'WEEKLY_3' },\r\n        { label: 'Cada 4 semanas', value: 'WEEKLY_4' },\r\n        { label: 'Mensual', value: 'MONTHLY_1' },\r\n        { label: 'Cada 2 meses', value: 'MONTHLY_2' },\r\n        { label: 'Trimestral', value: 'MONTHLY_3' },\r\n        { label: 'Semestral', value: 'MONTHLY_6' },\r\n        { label: 'Anual', value: 'YEARLY_1' },\r\n    ];\r\n\r\n    const handleSubmit = async () => {\r\n        if (!amount || !categoryId) return;\r\n        setIsSubmitting(true);\r\n\r\n        try {\r\n            let recurrenceType = 'MONTHLY';\r\n            let recurrenceInterval = 1;\r\n\r\n            if (isRecurring) {\r\n                const [type, interval] = recurrenceOption.split('_');\r\n                recurrenceType = type;\r\n                recurrenceInterval = parseInt(interval);\r\n            }\r\n\r\n            await addBudget({\r\n                amount: parseFloat(amount),\r\n                categoryId,\r\n                recurrenceType: isRecurring ? recurrenceType : undefined,\r\n                recurrenceInterval: isRecurring ? recurrenceInterval : undefined,\r\n                startDate: new Date().toISOString(), // Starts now\r\n                endDate: isRecurring && endDate ? endDate : undefined\r\n            });\r\n\r\n            onClose();\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setIsSubmitting(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div\r\n            className=\"fixed top-0 bottom-0 right-0 left-0 lg:left-[var(--sidebar-width)] z-[100] flex items-center justify-center p-4 bg-slate-900/40 backdrop-blur-sm animate-fade-in transition-[left] duration-300\"\r\n            onClick={onClose}\r\n        >\r\n            <div\r\n                className=\"w-full max-w-lg bg-white dark:bg-[#1e293b] rounded-[2rem] shadow-2xl flex flex-col max-h-[90vh] overflow-hidden animate-scale-in border border-slate-200 dark:border-slate-700\"\r\n                onClick={(e) => e.stopPropagation()}\r\n            >\r\n\r\n                {/* Header */}\r\n                <header className=\"flex-none px-8 py-6 flex justify-between items-start border-b border-slate-100 dark:border-slate-800\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Nuevo Presupuesto</h2>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 text-sm\">Define un límite de gasto para una categoría.</p>\r\n                    </div>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors bg-slate-50 dark:bg-slate-800 p-2 rounded-full\"\r\n                    >\r\n                        <span className=\"material-symbols-outlined text-xl\">close</span>\r\n                    </button>\r\n                </header>\r\n\r\n                {/* Body */}\r\n                <div className=\"flex-1 overflow-y-auto px-8 py-6 flex flex-col gap-6 scrollbar-thin scrollbar-thumb-slate-200 dark:scrollbar-thumb-slate-700\">\r\n\r\n                    {/* Amount */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Monto ({currencySymbol})</label>\r\n                        <div className=\"flex items-center rounded-xl border border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800 px-4 h-14 focus-within:ring-2 focus-within:ring-primary/20 focus-within:border-primary transition-all\">\r\n                            <span className=\"text-slate-900 dark:text-white font-bold text-lg mr-2\">{currencySymbol}</span>\r\n                            <input\r\n                                value={amount}\r\n                                onChange={(e) => setAmount(e.target.value)}\r\n                                className=\"w-full bg-transparent border-none outline-none text-slate-900 dark:text-white text-2xl font-bold placeholder:text-slate-300\"\r\n                                placeholder=\"0.00\"\r\n                                type=\"number\"\r\n                                autoFocus\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Category */}\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Categoría</label>\r\n                        <select\r\n                            value={categoryId}\r\n                            onChange={(e) => setCategoryId(e.target.value)}\r\n                            className=\"w-full h-12 px-4 rounded-xl bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-900 dark:text-white text-sm font-semibold appearance-none cursor-pointer focus:ring-2 focus:ring-primary/20 focus:border-primary outline-none\"\r\n                        >\r\n                            <option value=\"\">Seleccionar categoría</option>\r\n                            {categories.map(cat => (\r\n                                <option key={cat.id} value={cat.id}>{cat.name}</option>\r\n                            ))}\r\n                        </select>\r\n                    </div>\r\n\r\n                    {/* Recurrence Toggle */}\r\n                    <div className=\"flex items-center justify-between p-4 rounded-xl bg-slate-50 dark:bg-slate-800/50 border border-slate-100 dark:border-slate-800\">\r\n                        <div className=\"flex items-center gap-3\">\r\n                            <div className={`p-2 rounded-lg ${isRecurring ? 'bg-primary/10 text-primary' : 'bg-slate-200 dark:bg-slate-700 text-slate-500'}`}>\r\n                                <span className=\"material-symbols-outlined\">update</span>\r\n                            </div>\r\n                            <div className=\"flex flex-col\">\r\n                                <span className=\"text-sm font-bold text-slate-900 dark:text-white\">Repetir Presupuesto</span>\r\n                                <span className=\"text-xs text-slate-500\">Renovar automáticamente</span>\r\n                            </div>\r\n                        </div>\r\n                        <div\r\n                            onClick={() => setIsRecurring(!isRecurring)}\r\n                            className={`w-11 h-6 rounded-full p-1 cursor-pointer transition-colors ${isRecurring ? 'bg-primary' : 'bg-slate-300 dark:bg-slate-600'}`}\r\n                        >\r\n                            <div className={`size-4 bg-white rounded-full shadow-sm transition-transform ${isRecurring ? 'translate-x-5' : ''}`} />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Recurrence Options */}\r\n                    {isRecurring && (\r\n                        <div className=\"space-y-4 animate-slide-down pl-2 border-l-2 border-primary/20 ml-4 py-2\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Frecuencia</label>\r\n                                <select\r\n                                    value={recurrenceOption}\r\n                                    onChange={(e) => setRecurrenceOption(e.target.value)}\r\n                                    className=\"w-full h-10 px-3 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-medium focus:ring-2 focus:ring-primary/20 outline-none\"\r\n                                >\r\n                                    {recurrenceOptions.map(opt => (\r\n                                        <option key={opt.value} value={opt.value}>{opt.label}</option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-xs font-bold text-slate-700 dark:text-slate-300 ml-1\">Fecha de Finalización (Opcional)</label>\r\n                                <input\r\n                                    type=\"date\"\r\n                                    value={endDate}\r\n                                    onChange={(e) => setEndDate(e.target.value)}\r\n                                    className=\"w-full h-10 px-3 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-sm font-medium focus:ring-2 focus:ring-primary/20 outline-none text-slate-900 dark:text-white\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <footer className=\"flex-none px-8 py-5 flex justify-end gap-3 border-t border-slate-100 dark:border-slate-800 bg-slate-50/50 dark:bg-slate-900/50\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-5 py-2.5 rounded-xl text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 font-bold text-sm transition-colors\"\r\n                    >\r\n                        Cancelar\r\n                    </button>\r\n                    <button\r\n                        onClick={handleSubmit}\r\n                        disabled={!amount || !categoryId || isSubmitting}\r\n                        className=\"px-6 py-2.5 rounded-xl bg-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold text-sm shadow-md shadow-blue-500/20 transition-all flex items-center gap-2 active:scale-95\"\r\n                    >\r\n                        {isSubmitting ? (\r\n                            <span className=\"size-4 border-2 border-white/30 border-t-white rounded-full animate-spin\"></span>\r\n                        ) : (\r\n                            <span className=\"material-symbols-outlined text-[18px]\">check</span>\r\n                        )}\r\n                        Crear Presupuesto\r\n                    </button>\r\n                </footer>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AASe,SAAS,kBAAkB,EAAE,MAAM,EAAE,OAAO,EAA0B;IACjF,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,OAAO,EAAE,YAAY,EAAE,GAAG,IAAA,wIAAU;IACnE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,0BAA0B;IAC1B,sBAAsB;IACtB,IAAA,kNAAS,EAAC;QACN,MAAM,gBAAgB,CAAC;YACnB,IAAI,EAAE,GAAG,KAAK,YAAY,QAAQ;gBAC9B;YACJ;QACJ;QACA,OAAO,gBAAgB,CAAC,WAAW;QACnC,OAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;IACvD,GAAG;QAAC;QAAQ;KAAQ;IAEpB,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,iBAAiB,QAAQ,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,eAAe,YAAY;IAE7E,MAAM,oBAAoB;QACtB;YAAE,OAAO;YAAe,OAAO;QAAU;QACzC;YAAE,OAAO;YAAgB,OAAO;QAAW;QAC3C;YAAE,OAAO;YAAkB,OAAO;QAAW;QAC7C;YAAE,OAAO;YAAkB,OAAO;QAAW;QAC7C;YAAE,OAAO;YAAkB,OAAO;QAAW;QAC7C;YAAE,OAAO;YAAW,OAAO;QAAY;QACvC;YAAE,OAAO;YAAgB,OAAO;QAAY;QAC5C;YAAE,OAAO;YAAc,OAAO;QAAY;QAC1C;YAAE,OAAO;YAAa,OAAO;QAAY;QACzC;YAAE,OAAO;YAAS,OAAO;QAAW;KACvC;IAED,MAAM,eAAe;QACjB,IAAI,CAAC,UAAU,CAAC,YAAY;QAC5B,gBAAgB;QAEhB,IAAI;YACA,IAAI,iBAAiB;YACrB,IAAI,qBAAqB;YAEzB,IAAI,aAAa;gBACb,MAAM,CAAC,MAAM,SAAS,GAAG,iBAAiB,KAAK,CAAC;gBAChD,iBAAiB;gBACjB,qBAAqB,SAAS;YAClC;YAEA,MAAM,UAAU;gBACZ,QAAQ,WAAW;gBACnB;gBACA,gBAAgB,cAAc,iBAAiB;gBAC/C,oBAAoB,cAAc,qBAAqB;gBACvD,WAAW,IAAI,OAAO,WAAW;gBACjC,SAAS,eAAe,UAAU,UAAU;YAChD;YAEA;QACJ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC;QAClB,SAAU;YACN,gBAAgB;QACpB;IACJ;IAEA,qBACI,8OAAC;QACG,WAAU;QACV,SAAS;kBAET,cAAA,8OAAC;YACG,WAAU;YACV,SAAS,CAAC,IAAM,EAAE,eAAe;;8BAIjC,8OAAC;oBAAO,WAAU;;sCACd,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAG,WAAU;8CAAmD;;;;;;8CACjE,8OAAC;oCAAE,WAAU;8CAA6C;;;;;;;;;;;;sCAE9D,8OAAC;4BACG,SAAS;4BACT,WAAU;sCAEV,cAAA,8OAAC;gCAAK,WAAU;0CAAoC;;;;;;;;;;;;;;;;;8BAK5D,8OAAC;oBAAI,WAAU;;sCAGX,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAM,WAAU;;wCAA4D;wCAAQ;wCAAe;;;;;;;8CACpG,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAK,WAAU;sDAAyD;;;;;;sDACzE,8OAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4CACzC,WAAU;4CACV,aAAY;4CACZ,MAAK;4CACL,SAAS;;;;;;;;;;;;;;;;;;sCAMrB,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAM,WAAU;8CAA4D;;;;;;8CAC7E,8OAAC;oCACG,OAAO;oCACP,UAAU,CAAC,IAAM,cAAc,EAAE,MAAM,CAAC,KAAK;oCAC7C,WAAU;;sDAEV,8OAAC;4CAAO,OAAM;sDAAG;;;;;;wCAChB,WAAW,GAAG,CAAC,CAAA,oBACZ,8OAAC;gDAAoB,OAAO,IAAI,EAAE;0DAAG,IAAI,IAAI;+CAAhC,IAAI,EAAE;;;;;;;;;;;;;;;;;sCAM/B,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAI,WAAW,CAAC,eAAe,EAAE,cAAc,+BAA+B,iDAAiD;sDAC5H,cAAA,8OAAC;gDAAK,WAAU;0DAA4B;;;;;;;;;;;sDAEhD,8OAAC;4CAAI,WAAU;;8DACX,8OAAC;oDAAK,WAAU;8DAAmD;;;;;;8DACnE,8OAAC;oDAAK,WAAU;8DAAyB;;;;;;;;;;;;;;;;;;8CAGjD,8OAAC;oCACG,SAAS,IAAM,eAAe,CAAC;oCAC/B,WAAW,CAAC,2DAA2D,EAAE,cAAc,eAAe,kCAAkC;8CAExI,cAAA,8OAAC;wCAAI,WAAW,CAAC,4DAA4D,EAAE,cAAc,kBAAkB,IAAI;;;;;;;;;;;;;;;;;wBAK1H,6BACG,8OAAC;4BAAI,WAAU;;8CACX,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAA4D;;;;;;sDAC7E,8OAAC;4CACG,OAAO;4CACP,UAAU,CAAC,IAAM,oBAAoB,EAAE,MAAM,CAAC,KAAK;4CACnD,WAAU;sDAET,kBAAkB,GAAG,CAAC,CAAA,oBACnB,8OAAC;oDAAuB,OAAO,IAAI,KAAK;8DAAG,IAAI,KAAK;mDAAvC,IAAI,KAAK;;;;;;;;;;;;;;;;8CAKlC,8OAAC;oCAAI,WAAU;;sDACX,8OAAC;4CAAM,WAAU;sDAA4D;;;;;;sDAC7E,8OAAC;4CACG,MAAK;4CACL,OAAO;4CACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;4CAC1C,WAAU;;;;;;;;;;;;;;;;;;;;;;;;8BAQ9B,8OAAC;oBAAO,WAAU;;sCACd,8OAAC;4BACG,SAAS;4BACT,WAAU;sCACb;;;;;;sCAGD,8OAAC;4BACG,SAAS;4BACT,UAAU,CAAC,UAAU,CAAC,cAAc;4BACpC,WAAU;;gCAET,6BACG,8OAAC;oCAAK,WAAU;;;;;yDAEhB,8OAAC;oCAAK,WAAU;8CAAwC;;;;;;gCAC1D;;;;;;;;;;;;;;;;;;;;;;;;AAO1B"}},
    {"offset": {"line": 470, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/components/DateRangeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport React, { useState, useEffect, useMemo, useLayoutEffect } from 'react';\nimport { DayPicker, DateRange } from 'react-day-picker';\nimport { format, startOfDay, endOfDay, subDays, startOfMonth, endOfMonth, subMonths, addMonths } from 'date-fns';\nimport { es } from 'date-fns/locale';\nimport 'react-day-picker/dist/style.css';\n\ninterface DateRangeModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onApply: (start: Date, end: Date) => void;\n    initialStartDate?: Date | null;\n    initialEndDate?: Date | null;\n}\n\ninterface QuickRange {\n    label: string;\n    description?: string;\n    getRange: () => { from: Date; to: Date };\n}\n\nconst quickRanges: QuickRange[] = [\n    {\n        label: 'Hoy',\n        getRange: () => {\n            const today = new Date();\n            return { from: startOfDay(today), to: endOfDay(today) };\n        }\n    },\n    {\n        label: 'Ayer',\n        getRange: () => {\n            const yesterday = subDays(new Date(), 1);\n            return { from: startOfDay(yesterday), to: endOfDay(yesterday) };\n        }\n    },\n    {\n        label: 'Últimos 7 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 6)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Últimos 30 días',\n        getRange: () => ({\n            from: startOfDay(subDays(new Date(), 29)),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Este mes',\n        getRange: () => ({\n            from: startOfMonth(new Date()),\n            to: endOfDay(new Date())\n        })\n    },\n    {\n        label: 'Mes pasado',\n        getRange: () => {\n            const reference = subMonths(new Date(), 1);\n            return {\n                from: startOfMonth(reference),\n                to: endOfMonth(reference)\n            };\n        }\n    },\n    {\n        label: 'Últimos 3 meses',\n        getRange: () => ({\n            from: startOfMonth(subMonths(new Date(), 2)),\n            to: endOfDay(new Date())\n        })\n    }\n];\n\nconst monthNames = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];\n\nexport const DateRangeModal: React.FC<DateRangeModalProps> = ({ isOpen, onClose, onApply, initialStartDate, initialEndDate }) => {\n    const [range, setRange] = useState<DateRange | undefined>({\n        from: initialStartDate || undefined,\n        to: initialEndDate || undefined\n    });\n    const [activePreset, setActivePreset] = useState<string | null>(null);\n    const [leftMonth, setLeftMonth] = useState<Date>(() => startOfMonth(initialStartDate || new Date()));\n    const [rightMonth, setRightMonth] = useState<Date>(() => addMonths(startOfMonth(initialStartDate || new Date()), 1));\n    const [isMounted, setIsMounted] = useState(false);\n    const [isVisible, setIsVisible] = useState(false);\n\n    const syncCalendarMonths = (fromDate?: Date | null, toDate?: Date | null) => {\n        const baseLeft = startOfMonth(fromDate || new Date());\n        let baseRight = toDate ? startOfMonth(toDate) : addMonths(baseLeft, 1);\n        if (baseRight <= baseLeft) {\n            baseRight = addMonths(baseLeft, 1);\n        }\n        setLeftMonth(baseLeft);\n        setRightMonth(baseRight);\n    };\n\n    useEffect(() => {\n        if (isOpen) {\n            setRange({\n                from: initialStartDate || undefined,\n                to: initialEndDate || undefined\n            });\n            setActivePreset(null);\n            syncCalendarMonths(initialStartDate || undefined, initialEndDate || undefined);\n        }\n    }, [isOpen, initialStartDate, initialEndDate]);\n\n    useEffect(() => {\n        if (!isOpen) return;\n        const handleKeyDown = (event: KeyboardEvent) => {\n            if (event.key === 'Escape') {\n                onClose();\n            }\n        };\n        window.addEventListener('keydown', handleKeyDown);\n        return () => window.removeEventListener('keydown', handleKeyDown);\n    }, [isOpen, onClose]);\n\n    useLayoutEffect(() => {\n        if (isOpen) {\n            setIsMounted(true);\n            const raf = requestAnimationFrame(() => setIsVisible(true));\n            return () => cancelAnimationFrame(raf);\n        }\n\n        if (isMounted) {\n            setIsVisible(false);\n            const timeout = setTimeout(() => setIsMounted(false), 300);\n            return () => clearTimeout(timeout);\n        }\n    }, [isOpen, isMounted]);\n\n    const years = useMemo(() => {\n        const current = new Date().getFullYear();\n        return Array.from({ length: 11 }, (_, idx) => current - 5 + idx);\n    }, []);\n\n    const handleRangeSelect = (selected: DateRange | undefined) => {\n        if (!selected?.from) {\n            setRange(undefined);\n            return;\n        }\n\n        if (!selected.to) {\n            setRange({ from: selected.from, to: undefined });\n            syncCalendarMonths(selected.from, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        const start = startOfDay(selected.from);\n        const end = endOfDay(selected.to);\n\n        if (end < start) {\n            setRange({ from: end, to: undefined });\n            syncCalendarMonths(end, undefined);\n            setActivePreset(null);\n            return;\n        }\n\n        setRange({ from: start, to: end });\n        syncCalendarMonths(start, end);\n        setActivePreset(null);\n    };\n\n    const handlePresetClick = (preset: QuickRange) => {\n        const presetRange = preset.getRange();\n        setRange(presetRange);\n        setActivePreset(preset.label);\n        syncCalendarMonths(presetRange.from, presetRange.to);\n    };\n\n    const handleApply = () => {\n        if (range?.from && range?.to) {\n            onApply(range.from, range.to);\n            onClose();\n        }\n    };\n\n    const formattedRange = useMemo(() => {\n        if (!range?.from || !range?.to) return 'Selecciona un rango';\n        return `${format(range.from, \"d MMM, yyyy\", { locale: es })} - ${format(range.to, \"d MMM, yyyy\", { locale: es })}`;\n    }, [range]);\n\n    if (!isMounted) return null;\n\n    const handleLeftMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        setLeftMonth(normalized);\n        if (rightMonth <= normalized) {\n            setRightMonth(addMonths(normalized, 1));\n        }\n    };\n\n    const handleRightMonthChange = (next: Date) => {\n        const normalized = startOfMonth(next);\n        if (normalized <= leftMonth) {\n            setRightMonth(addMonths(leftMonth, 1));\n            return;\n        }\n        setRightMonth(normalized);\n    };\n\n    const MonthControls = ({\n        month,\n        onChange,\n        disablePrev,\n        disableNext\n    }: {\n        month: Date;\n        onChange: (date: Date) => void;\n        disablePrev?: boolean;\n        disableNext?: boolean;\n    }) => (\n        <div className=\"flex items-center justify-between mb-3\">\n            <div className=\"flex items-center gap-2\">\n                <select\n                    value={month.getMonth()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setMonth(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {monthNames.map((name, idx) => (\n                        <option key={name} value={idx}>\n                            {name.charAt(0).toUpperCase() + name.slice(1)}\n                        </option>\n                    ))}\n                </select>\n                <select\n                    value={month.getFullYear()}\n                    onChange={(event) => {\n                        const updated = new Date(month);\n                        updated.setFullYear(Number(event.target.value));\n                        updated.setDate(1);\n                        onChange(updated);\n                    }}\n                    className=\"px-2 py-1 text-xs font-semibold rounded-lg border border-slate-200 bg-white focus:border-primary focus:outline-none dark:bg-transparent dark:border-white/20 dark:text-white\"\n                >\n                    {years.map((year) => (\n                        <option key={year} value={year}>\n                            {year}\n                        </option>\n                    ))}\n                </select>\n            </div>\n            <div className=\"flex items-center gap-1 text-primary\">\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, -1))}\n                    disabled={disablePrev}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_left</span>\n                </button>\n                <button\n                    type=\"button\"\n                    onClick={() => onChange(addMonths(month, 1))}\n                    disabled={disableNext}\n                    className=\"size-7 flex items-center justify-center rounded-full bg-primary/10 text-primary hover:bg-primary/20 disabled:opacity-40\"\n                >\n                    <span className=\"material-symbols-outlined text-sm\">chevron_right</span>\n                </button>\n            </div>\n        </div>\n    );\n\n    return (\n        <div\n            className={`fixed inset-0 z-[120] flex transition-opacity duration-400 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100' : 'opacity-0'}`}\n            onClick={onClose}\n        >\n            <div\n                className=\"hidden lg:block h-full\"\n                style={{ width: 'var(--sidebar-width, 280px)' }}\n            />\n            <div\n                className={`flex-1 w-full relative flex items-center justify-center bg-slate-900/35 p-3 sm:p-4 transition-[opacity,backdrop-filter] duration-300 ease-out ${isVisible ? 'opacity-100 backdrop-blur-md' : 'opacity-0 backdrop-blur-none'}`}\n            >\n                <div\n                    className={`date-range-modal w-full max-w-5xl bg-white dark:bg-[#101828] rounded-[28px] shadow-2xl border border-slate-200/80 dark:border-white/10 p-4 sm:p-5 transition-all duration-500 ease-[cubic-bezier(0.22,1,0.36,1)] ${isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 -translate-y-8'}`}\n                    onClick={(e) => e.stopPropagation()}\n                >\n                    <div className=\"flex items-start justify-between gap-3 mb-4\">\n                        <h3 className=\"text-base font-black text-slate-900 dark:text-white\">Seleccionar Rango</h3>\n                        <button\n                            onClick={onClose}\n                            className=\"size-8 flex items-center justify-center rounded-full bg-slate-100 text-slate-500 hover:text-primary hover:bg-primary/10 transition-colors dark:bg-white/10 dark:text-white\"\n                        >\n                            <span className=\"material-symbols-outlined text-lg\">close</span>\n                        </button>\n                    </div>\n\n                    <div className=\"flex flex-col lg:flex-row gap-4\">\n                        <aside className=\"flex flex-col gap-2 w-full lg:w-56\">\n                            <p className=\"text-[9px] font-semibold text-slate-500 uppercase tracking-wide\">Rangos rápidos</p>\n                            <div className=\"grid grid-cols-2 lg:grid-cols-1 gap-2\">\n                                {quickRanges.map((preset) => {\n                                    const isActive = activePreset === preset.label;\n                                    return (\n                                        <button\n                                            key={preset.label}\n                                            onClick={() => handlePresetClick(preset)}\n                                            className={`text-left px-3 py-1.5 rounded-2xl border text-[11px] font-semibold transition-all ${\n                                                isActive\n                                                    ? 'bg-primary/10 border-primary/40 text-primary'\n                                                    : 'border-slate-200 text-slate-600 hover:border-primary/30 hover:text-primary'\n                                            }`}\n                                        >\n                                            {preset.label}\n                                        </button>\n                                    );\n                                })}\n                            </div>\n                        </aside>\n\n                        <div className=\"flex-1 overflow-hidden px-2 md:px-4\">\n                            <style>{`\n                                .date-range-modal .rdp {\n                                    --rdp-cell-size: 30px;\n                                    --rdp-accent-color: #2563eb;\n                                    --rdp-background-color: rgba(37, 99, 235, 0.12);\n                                    --rdp-range_border-radius: 999px;\n                                    margin: 0;\n                                    color: #0f172a;\n                                }\n                                .dark .date-range-modal .rdp {\n                                    color: #f8fafc;\n                                }\n                                .date-range-modal .rdp-head_cell {\n                                    color: #94a3b8;\n                                    font-weight: 600;\n                                    font-size: 0.7rem;\n                                    text-transform: uppercase;\n                                }\n                                .dark .date-range-modal .rdp-head_cell {\n                                    color: rgba(255,255,255,0.7);\n                                }\n                                .date-range-modal .rdp-day {\n                                    font-weight: 500;\n                                    font-size: 0.85rem;\n                                }\n                                .date-range-modal .rdp-day_selected:not([disabled]) {\n                                    background-color: #2563eb;\n                                    color: #fff;\n                                }\n                                .date-range-modal .rdp-day_range_middle {\n                                    background-color: rgba(37,99,235,0.12);\n                                    color: inherit;\n                                    border-radius: 999px !important;\n                                }\n                                .date-range-modal .rdp-root,\n                                .date-range-modal .rdp-months,\n                                .date-range-modal .rdp-month {\n                                    width: 100%;\n                                }\n                                .date-range-modal .rdp-caption,\n                                .date-range-modal .rdp-nav {\n                                    display: none;\n                                }\n                            `}</style>\n                            <div className=\"w-full flex flex-col md:flex-row gap-3 md:gap-6 justify-between\">\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={leftMonth}\n                                        onChange={handleLeftMonthChange}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={leftMonth}\n                                        onMonthChange={handleLeftMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                                <div className=\"flex-1 border border-slate-100 rounded-2xl p-2 shadow-sm dark:border-white/10 backdrop-blur-sm\">\n                                    <MonthControls\n                                        month={rightMonth}\n                                        onChange={handleRightMonthChange}\n                                        disablePrev={rightMonth <= addMonths(leftMonth, 1)}\n                                    />\n                                    <DayPicker\n                                        mode=\"range\"\n                                        selected={range}\n                                        onSelect={handleRangeSelect}\n                                        month={rightMonth}\n                                        onMonthChange={handleRightMonthChange}\n                                        numberOfMonths={1}\n                                        locale={es}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n\n                    <div className=\"mt-5 border-t border-slate-100 dark:border-white/10 pt-3 flex flex-col gap-3\">\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\n                            <div className=\"flex flex-col sm:flex-row sm:items-center gap-2 flex-1\">\n                                <div className=\"flex items-center gap-2 w-full sm:w-auto\">\n                                    <input\n                                        readOnly\n                                        value={range?.from ? format(range.from, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Inicio\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                    <span className=\"text-slate-400 text-xs\">-</span>\n                                    <input\n                                        readOnly\n                                        value={range?.to ? format(range.to, 'dd/MM/yyyy') : ''}\n                                        placeholder=\"Fin\"\n                                        className=\"flex-1 sm:w-32 rounded-xl border border-slate-200 bg-slate-50 px-3 py-2 text-[11px] text-slate-700 focus:border-primary focus:outline-none dark:border-white/10 dark:bg-white/5 dark:text-white\"\n                                    />\n                                </div>\n                                <p className=\"text-[11px] text-slate-400 dark:text-white/60\">{formattedRange}</p>\n                            </div>\n                            <div className=\"flex flex-col sm:flex-row items-center gap-2 justify-end w-full sm:w-auto\">\n                                <button onClick={onClose} className=\"px-4 py-2 rounded-xl border border-slate-200 text-slate-600 text-[11px] font-semibold hover:border-slate-300 dark:border-white/10 dark:text-white\">\n                                    Cancelar\n                                </button>\n                                <button\n                                    onClick={handleApply}\n                                    disabled={!range?.from || !range?.to}\n                                    className=\"px-6 py-2 rounded-xl bg-primary text-white text-[11px] font-bold shadow-lg shadow-primary/30 hover:bg-primary-hover transition disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\"\n                                >\n                                    Aplicar\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1158, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/budgets/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useFinance } from '@/context/FinanceContext';\r\nimport { Budget, Transaction } from '@/types';\r\nimport CreateBudgetModal from '@/components/CreateBudgetModal';\r\nimport { DateRangeModal } from '@/components/DateRangeModal';\r\nimport { startOfMonth, endOfMonth, isWithinInterval } from 'date-fns';\r\n\r\nexport default function Budgets() {\r\n    const router = useRouter();\r\n    const { budgets, categories, transactions, formatAmount } = useFinance();\r\n    const [filter, setFilter] = useState<'all' | 'danger' | 'exceeded' | 'healthy'>('all');\r\n    const [sortBy, setSortBy] = useState('amount_desc');\r\n    const [isCreateModalOpen, setIsCreateModalOpen] = useState(false);\r\n\r\n    // Date Range State\r\n    const [isDateModalOpen, setIsDateModalOpen] = useState(false);\r\n    const [dateRange, setDateRange] = useState<{ start: Date; end: Date }>({\r\n        start: startOfMonth(new Date()),\r\n        end: endOfMonth(new Date())\r\n    });\r\n\r\n    // Calculate real spent for each budget based on transactions\r\n    const calculatedBudgets = useMemo(() => {\r\n        return budgets.map(budget => {\r\n            const budgetSpent = transactions\r\n                .filter(t => {\r\n                    if (t.type !== 'EXPENSE') return false;\r\n                    // Filter by category\r\n                    // If budget has category_id, match it. \r\n                    // If not, match by name (legacy support)\r\n                    const matchesCategory = budget.category_id\r\n                        ? t.category_id === budget.category_id\r\n                        : t.category === budget.category; // fallback\r\n\r\n                    if (!matchesCategory) return false;\r\n\r\n                    // Filter by Date Range\r\n                    const txDate = new Date(t.date);\r\n                    return isWithinInterval(txDate, { start: dateRange.start, end: dateRange.end });\r\n                })\r\n                .reduce((sum, t) => sum + t.amount, 0);\r\n\r\n            return {\r\n                ...budget,\r\n                spent: budgetSpent\r\n            };\r\n        });\r\n    }, [budgets, transactions, dateRange]);\r\n\r\n    // Calcular métricas globales usando calculatedBudgets\r\n    const totalPlanned = useMemo(() => calculatedBudgets.reduce((sum, b) => sum + b.limit, 0), [calculatedBudgets]);\r\n    const totalSpent = useMemo(() => calculatedBudgets.reduce((sum, b) => sum + b.spent, 0), [calculatedBudgets]);\r\n    const totalAvailable = totalPlanned - totalSpent;\r\n    const availablePercent = totalPlanned > 0 ? (totalAvailable / totalPlanned) * 100 : 0;\r\n\r\n    // Categorías cerca del límite (alertas)\r\n    const alertsCount = useMemo(() => calculatedBudgets.filter(b => (b.spent / b.limit) >= 0.9 && (b.spent / b.limit) < 1).length, [calculatedBudgets]);\r\n\r\n    // Lógica de filtrado y ordenación\r\n    const filteredBudgets = useMemo(() => {\r\n        let result = calculatedBudgets.filter(b => {\r\n            const ratio = b.limit > 0 ? b.spent / b.limit : 0;\r\n            if (filter === 'danger') return ratio >= 0.9 && ratio < 1;\r\n            if (filter === 'exceeded') return ratio >= 1;\r\n            if (filter === 'healthy') return ratio < 0.9;\r\n            return true;\r\n        });\r\n\r\n        return result.sort((a, b) => {\r\n            if (sortBy === 'amount_desc') return b.limit - a.limit;\r\n            if (sortBy === 'amount_asc') return a.limit - b.limit;\r\n            if (sortBy === 'name') {\r\n                // Client-side lookup for sorting if needed, but 'category' field is present from context mapping (Loading...)\r\n                // We can look up here or just use what we have. \r\n                // Context returns 'Loading...' but Page maps it. \r\n                // Let's rely on the ID match logic inside the render for display, \r\n                // but for sorting we might need the name.\r\n                // Ideally calculatedBudgets should include the resolved name.\r\n                // For now, let's leave as is, sorting might be slightly off until mapped.\r\n                return a.category.localeCompare(b.category);\r\n            }\r\n            return 0;\r\n        });\r\n    }, [calculatedBudgets, filter, sortBy]);\r\n\r\n    const getStatusInfo = (spent: number, limit: number) => {\r\n        const ratio = limit > 0 ? spent / limit : 0;\r\n        if (ratio >= 1) return { label: 'Excedido', colorClass: 'text-danger', bgClass: 'bg-red-50 dark:bg-red-900/20', borderClass: 'border-l-danger', barClass: 'bg-danger' };\r\n        if (ratio >= 0.9) return { label: 'Cuidado', colorClass: 'text-warning', bgClass: 'bg-orange-50 dark:bg-orange-900/20', borderClass: 'border-l-warning', barClass: 'bg-warning' };\r\n        return { label: 'Normal', colorClass: 'text-primary', bgClass: 'bg-blue-50 dark:bg-blue-900/20', borderClass: 'border-l-primary', barClass: 'bg-primary' };\r\n    };\r\n\r\n    const getIcon = (category: string) => {\r\n        const cat = category.toLowerCase();\r\n        if (cat.includes('super')) return 'shopping_cart';\r\n        if (cat.includes('transporte')) return 'directions_bus';\r\n        if (cat.includes('entretenimiento')) return 'local_activity';\r\n        if (cat.includes('ropa')) return 'checkroom';\r\n        if (cat.includes('restaurante')) return 'restaurant';\r\n        if (cat.includes('mascota')) return 'pets';\r\n        return 'payments';\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex-1 flex flex-col h-full overflow-y-auto overflow-x-hidden relative scrollbar-hide pb-24\">\r\n            {/* Background Decor */}\r\n            <div className=\"fixed inset-0 -z-10 pointer-events-none opacity-40 dark:opacity-10\">\r\n                <div className=\"absolute top-0 left-0 w-[500px] h-[500px] bg-blue-100 rounded-full blur-[120px]\"></div>\r\n                <div className=\"absolute bottom-0 right-0 w-[500px] h-[500px] bg-indigo-100 rounded-full blur-[120px]\"></div>\r\n            </div>\r\n\r\n            <div className=\"container mx-auto max-w-[1200px] p-6 lg:p-10 flex flex-col gap-8\">\r\n                {/* Page Header */}\r\n                <header className=\"flex flex-col md:flex-row md:items-end justify-between gap-6 animate-fade-in\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <h1 className=\"text-3xl lg:text-4xl font-black tracking-tight text-[#111418] dark:text-white\">Presupuestos</h1>\r\n                        <p className=\"text-gray-500 dark:text-gray-400 text-lg font-normal capitalize\">\r\n                            Planificación de {dateRange.start.toLocaleDateString('es-ES', { month: 'long', year: 'numeric' })}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"flex flex-col sm:flex-row gap-3 w-full md:w-auto\">\r\n                        <button\r\n                            onClick={() => setIsDateModalOpen(true)}\r\n                            className=\"flex items-center gap-2 px-4 py-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-slate-600 dark:text-slate-300 font-medium text-sm hover:border-primary hover:text-primary transition-colors h-12\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-[20px]\">calendar_month</span>\r\n                            <span>{dateRange.start.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })} - {dateRange.end.toLocaleDateString('es-ES', { day: 'numeric', month: 'short' })}</span>\r\n                        </button>\r\n\r\n                        <button\r\n                            onClick={() => setIsCreateModalOpen(true)}\r\n                            className=\"flex items-center justify-center gap-2 bg-primary hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-xl shadow-lg shadow-blue-500/30 transition-all active:scale-95 h-12\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                            <span className=\"text-sm\">Nuevo Presupuesto</span>\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                {/* Summary Stats */}\r\n                <section className=\"grid grid-cols-1 md:grid-cols-3 gap-5 animate-fade-in\" style={{ animationDelay: '0.1s' }}>\r\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"p-2 bg-blue-50 dark:bg-blue-900/30 rounded-lg text-primary\">\r\n                                <span className=\"material-symbols-outlined\">assignment</span>\r\n                            </div>\r\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Total Planeado</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{formatAmount(totalPlanned)}</h3>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">Suma de todas las categorías</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"p-2 bg-green-50 dark:bg-green-900/30 rounded-lg text-emerald-600\">\r\n                                <span className=\"material-symbols-outlined\">savings</span>\r\n                            </div>\r\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Disponible</span>\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{formatAmount(totalAvailable)}</h3>\r\n                            <p className=\"text-sm text-emerald-600 mt-1 font-medium flex items-center gap-1\">\r\n                                <span className=\"material-symbols-outlined text-sm\">trending_up</span>\r\n                                {availablePercent.toFixed(0)}% Restante del mes\r\n                            </p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"glass-panel rounded-2xl p-6 flex flex-col gap-3 shadow-glass group hover:shadow-lg transition-all duration-300 relative overflow-hidden\">\r\n                        <div className=\"absolute -right-4 -top-4 w-20 h-20 bg-orange-100 dark:bg-orange-900/20 rounded-full blur-2xl\"></div>\r\n                        <div className=\"flex items-center justify-between relative z-10\">\r\n                            <div className=\"p-2 bg-orange-50 dark:bg-orange-900/30 rounded-lg text-orange-500\">\r\n                                <span className=\"material-symbols-outlined\">notifications_active</span>\r\n                            </div>\r\n                            <span className=\"text-xs font-semibold text-gray-400 uppercase tracking-wider\">Alertas</span>\r\n                        </div>\r\n                        <div className=\"relative z-10\">\r\n                            <h3 className=\"text-3xl font-bold text-[#111418] dark:text-white tracking-tight\">{alertsCount}</h3>\r\n                            <p className=\"text-sm text-gray-500 mt-1\">Categorías cerca del límite</p>\r\n                        </div>\r\n                    </div>\r\n                </section>\r\n\r\n                {/* Filters */}\r\n                <div className=\"flex flex-col sm:flex-row items-center justify-between gap-4 py-2 animate-fade-in\" style={{ animationDelay: '0.15s' }}>\r\n                    <div className=\"flex gap-2 overflow-x-auto w-full sm:w-auto pb-2 sm:pb-0 scrollbar-hide\">\r\n                        {[\r\n                            { id: 'all', label: 'Todos' },\r\n                            { id: 'danger', label: 'En Peligro' },\r\n                            { id: 'exceeded', label: 'Excedidos' },\r\n                            { id: 'healthy', label: 'Saludables' }\r\n                        ].map(btn => (\r\n                            <button\r\n                                key={btn.id}\r\n                                onClick={() => setFilter(btn.id as any)}\r\n                                className={`px-4 py-2 rounded-full text-sm font-medium transition-all whitespace-nowrap ${filter === btn.id\r\n                                    ? 'bg-[#111418] text-white shadow-md'\r\n                                    : 'glass-panel text-gray-600 dark:text-gray-300 hover:bg-white hover:text-primary'\r\n                                    }`}\r\n                            >\r\n                                {btn.label}\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                    <div className=\"flex items-center gap-2 w-full sm:w-auto text-gray-500 text-sm\">\r\n                        <span className=\"hidden sm:inline\">Ordenar por:</span>\r\n                        <select\r\n                            value={sortBy}\r\n                            onChange={(e) => setSortBy(e.target.value)}\r\n                            className=\"bg-transparent font-medium text-gray-700 dark:text-gray-300 focus:outline-none cursor-pointer border-none p-0\"\r\n                        >\r\n                            <option value=\"amount_desc\">Mayor monto</option>\r\n                            <option value=\"amount_asc\">Menor monto</option>\r\n                            <option value=\"name\">Nombre</option>\r\n                        </select>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Budgets Grid */}\r\n                <section className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6 animate-fade-in\" style={{ animationDelay: '0.2s' }}>\r\n                    {filteredBudgets.map((budget) => {\r\n                        const percentage = Math.min((budget.spent / budget.limit) * 100, 100);\r\n                        const status = getStatusInfo(budget.spent, budget.limit);\r\n                        const remaining = budget.limit - budget.spent;\r\n\r\n                        // Client-side category lookup\r\n                        const categoryObj = categories.find(c => c.id === budget.category_id);\r\n                        const displayCategory = categoryObj ? categoryObj.name : (budget.category || 'Sin categoría');\r\n                        const displayIcon = categoryObj?.icon || getIcon(displayCategory);\r\n\r\n                        return (\r\n                            <div\r\n                                key={budget.id}\r\n                                onClick={() => router.push(`/budget/${budget.id}`)}\r\n                                className={`glass-panel rounded-2xl p-5 shadow-glass hover:shadow-xl transition-all duration-300 group cursor-pointer border-l-4 border-l-transparent hover:${status.borderClass}`}\r\n                            >\r\n                                <div className=\"flex justify-between items-start mb-4\">\r\n                                    <div className=\"flex items-center gap-3\">\r\n                                        <div className={`size-10 rounded-full flex items-center justify-center ${status.bgClass} ${status.colorClass}`}>\r\n                                            <span className=\"material-symbols-outlined\">{displayIcon}</span>\r\n                                        </div>\r\n                                        <div>\r\n                                            <h4 className=\"font-bold text-gray-900 dark:text-white\">{displayCategory}</h4>\r\n                                            <span className=\"text-xs text-gray-500\">Mensual</span>\r\n                                        </div>\r\n                                    </div>\r\n                                    <span className={`px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-wider ${status.bgClass} ${status.colorClass}`}>\r\n                                        {status.label}\r\n                                    </span>\r\n                                </div>\r\n                                <div className=\"flex flex-col gap-2\">\r\n                                    <div className=\"flex justify-between items-end\">\r\n                                        <span className=\"text-2xl font-bold text-gray-900 dark:text-white\">{formatAmount(budget.spent)}</span>\r\n                                        <span className=\"text-sm font-medium text-gray-500 mb-1\">de {formatAmount(budget.limit)}</span>\r\n                                    </div>\r\n                                    <div className=\"h-3 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden relative\">\r\n                                        {/* Background faint bar for exceeded state */}\r\n                                        {percentage >= 100 && <div className=\"absolute inset-0 bg-red-400 opacity-20\"></div>}\r\n                                        <div\r\n                                            className={`h-full rounded-full transition-all duration-1000 ease-out ${status.barClass}`}\r\n                                            style={{ width: `${percentage}%` }}\r\n                                        ></div>\r\n                                    </div>\r\n                                    <div className=\"flex justify-between text-xs text-gray-400 mt-1\">\r\n                                        <span>{percentage.toFixed(0)}% gastado</span>\r\n                                        <span className={`font-medium ${remaining < 0 ? 'text-danger' : remaining < (budget.limit * 0.1) ? 'text-orange-500' : ''}`}>\r\n                                            {remaining < 0 ? `+${formatAmount(Math.abs(remaining))} sobre límite` : `${formatAmount(remaining)} restante`}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    })}\r\n\r\n                    {/* Add New Placeholder Card */}\r\n                    <div\r\n                        onClick={() => setIsCreateModalOpen(true)}\r\n                        className=\"w-full border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-2xl p-8 flex flex-col items-center justify-center gap-4 text-gray-400 hover:text-primary hover:border-primary hover:bg-white/50 dark:hover:bg-slate-800/20 transition-all cursor-pointer group min-h-[160px]\"\r\n                    >\r\n                        <div className=\"size-14 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center group-hover:bg-primary/10 transition-colors\">\r\n                            <span className=\"material-symbols-outlined text-3xl\">add</span>\r\n                        </div>\r\n                        <p className=\"font-medium\">Crear nuevo presupuesto</p>\r\n                    </div>\r\n                </section>\r\n\r\n                <CreateBudgetModal\r\n                    isOpen={isCreateModalOpen}\r\n                    onClose={() => setIsCreateModalOpen(false)}\r\n                />\r\n\r\n                <DateRangeModal\r\n                    isOpen={isDateModalOpen}\r\n                    onClose={() => setIsDateModalOpen(false)}\r\n                    initialStartDate={dateRange.start}\r\n                    initialEndDate={dateRange.end}\r\n                    onApply={(start, end) => setDateRange({ start, end })}\r\n                />\r\n\r\n                {filteredBudgets.length === 0 && (\r\n                    <div className=\"py-20 text-center opacity-40\">\r\n                        <span className=\"material-symbols-outlined text-6xl mb-4\">search_off</span>\r\n                        <p className=\"font-medium\">No se encontraron presupuestos con este filtro.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}