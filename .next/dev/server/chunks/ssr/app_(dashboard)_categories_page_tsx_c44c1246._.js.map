{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/grupo/OneDrive/Documentos/Apps/finanzas-pro/app/%28dashboard%29/categories/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useMemo } from 'react';\nimport { useFinance } from '@/context/FinanceContext';\nimport { Category, CategoryFolder } from '@/types';\n\nconst withAlpha = (hex: string, alpha: number) => {\n    if (!hex) return `rgba(99, 102, 241, ${alpha})`;\n    let normalized = hex.replace('#', '');\n    if (normalized.length === 3) {\n        normalized = normalized.split('').map(ch => ch + ch).join('');\n    }\n    const int = parseInt(normalized, 16);\n    if (Number.isNaN(int)) return `rgba(99, 102, 241, ${alpha})`;\n    const r = (int >> 16) & 255;\n    const g = (int >> 8) & 255;\n    const b = int & 255;\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\n};\n\nexport default function Categories() {\n    const { categories, categoryFolders } = useFinance();\r\n    const [selectedTab, setSelectedTab] = useState<'Gastos' | 'Ingresos'>('Gastos');\r\n    const [selectedItems, setSelectedItems] = useState<string[]>([]); // Keep state but remove UI for now if requested, or just keep logic unused\r\n\r\n    // Modal State\r\n    const [isModalOpen, setIsModalOpen] = useState(false);\r\n    const [newCatName, setNewCatName] = useState('');\r\n    const [selectedColor, setSelectedColor] = useState('#307de8');\r\n    const [selectedIcon, setSelectedIcon] = useState('shopping_cart');\r\n    const [selectedFolderId, setSelectedFolderId] = useState<string>('none');\r\n\r\n    const colors = ['#307de8', '#ff6b6b', '#4ecdc4', '#ffd93d', '#6c5ce7', '#a8e6cf', '#e17055'];\r\n    const icons = ['shopping_cart', 'restaurant', 'directions_car', 'flight', 'home', 'fitness_center', 'pets', 'school', 'videogame_asset'];\r\n\r\n    // Group Categories by Folder\r\n    const foldersUI = useMemo(() => {\r\n        // 1. Create maps for existing folders\r\n        const folderMap = new Map<string, { folder: CategoryFolder | null, items: Category[] }>();\r\n\r\n        // Initialize with known folders\r\n        categoryFolders.forEach(f => {\r\n            folderMap.set(f.id, { folder: f, items: [] });\r\n        });\r\n\r\n        // Initialize \"Uncategorized\" bucket\r\n        const UNGROUPED_ID = 'ungrouped';\r\n        if (!folderMap.has(UNGROUPED_ID)) {\r\n            folderMap.set(UNGROUPED_ID, { folder: null, items: [] });\r\n        }\r\n\r\n        // 2. Distribute categories\r\n        categories.forEach(cat => {\r\n            const fId = cat.folder_id || UNGROUPED_ID;\r\n            if (folderMap.has(fId)) {\r\n                folderMap.get(fId)!.items.push(cat);\r\n            } else {\r\n                // If folder_id exists but folder missing (orphan), put in ungrouped\r\n                folderMap.get(UNGROUPED_ID)!.items.push(cat);\r\n            }\r\n        });\r\n\r\n        // 3. Convert to array suitable for UI\r\n        const result = [];\r\n        for (const [key, value] of folderMap.entries()) {\r\n            if (value.folder) {\r\n                result.push({\r\n                    id: value.folder.id,\r\n                    name: value.folder.name,\r\n                    icon: value.folder.icon || 'folder',\r\n                    color: value.folder.color || 'blue',\r\n                    count: value.items.length,\r\n                    items: value.items\r\n                });\r\n            } else if (value.items.length > 0) {\r\n                // Only show ungrouped if there are items\r\n                result.push({\r\n                    id: 'ungrouped',\r\n                    name: 'General / Sin Carpeta',\r\n                    icon: 'category',\r\n                    color: 'gray',\r\n                    count: value.items.length,\r\n                    items: value.items\r\n                });\r\n            }\r\n        }\r\n        return result;\r\n    }, [categories, categoryFolders]);\r\n\r\n\r\n    return (\r\n        <div className=\"flex h-full w-full overflow-hidden relative\">\r\n            {/* Background blobs */}\r\n            <div className=\"absolute top-[-20%] right-[-10%] w-[600px] h-[600px] bg-blue-400/15 rounded-full blur-[100px] pointer-events-none\"></div>\r\n            <div className=\"absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-purple-400/10 rounded-full blur-[100px] pointer-events-none\"></div>\r\n\r\n            {/* Main Content Area */}\r\n            <div className=\"flex-1 flex flex-col h-full overflow-hidden z-10\">\r\n                <header className=\"px-8 py-6 flex items-center justify-between border-b border-white/40\">\r\n                    <div className=\"flex flex-col gap-1\">\r\n                        <div className=\"flex items-center gap-2 text-xs font-semibold text-slate-500 mb-1\">\r\n                            <span>Configuración</span>\r\n                            <span className=\"material-symbols-outlined text-[14px]\">chevron_right</span>\r\n                            <span className=\"text-primary\">Categorías</span>\r\n                        </div>\r\n                        <h2 className=\"text-2xl font-black text-slate-900 tracking-tight dark:text-white\">Gestión de Categorías</h2>\r\n                    </div>\r\n                    <div className=\"flex items-center gap-4\">\r\n                        <button\r\n                            onClick={() => setIsModalOpen(true)}\r\n                            className=\"btn-interact bg-primary hover:bg-primary-hover text-white px-5 py-2.5 rounded-xl flex items-center gap-2 shadow-lg shadow-blue-500/20 font-bold text-sm\"\r\n                        >\r\n                            <span className=\"material-symbols-outlined text-[20px]\">add</span>\r\n                            <span>Nueva Categoría</span>\r\n                        </button>\r\n                    </div>\r\n                </header>\r\n\r\n                <div className=\"flex-1 overflow-y-auto p-8 scrollbar-hide pb-32\">\r\n                    <div className=\"max-w-5xl mx-auto space-y-8\">\r\n                        {/* Tabs - Only visual for now unless we filter by type */}\r\n                        <div className=\"flex flex-col md:flex-row justify-between items-center gap-4\">\r\n                            <div className=\"flex bg-slate-200/50 dark:bg-slate-800 p-1 rounded-xl\">\r\n                                <button\r\n                                    onClick={() => setSelectedTab('Gastos')}\r\n                                    className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${selectedTab === 'Gastos' ? 'bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm' : 'text-slate-500'}`}\r\n                                >\r\n                                    Gastos\r\n                                </button>\r\n                                <button\r\n                                    onClick={() => setSelectedTab('Ingresos')}\r\n                                    className={`px-6 py-2 rounded-lg text-sm font-bold transition-all ${selectedTab === 'Ingresos' ? 'bg-white dark:bg-slate-700 text-slate-900 dark:text-white shadow-sm' : 'text-slate-500'}`}\r\n                                >\r\n                                    Ingresos\r\n                                </button>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-200 bg-white/50 dark:bg-slate-800/50 dark:border-slate-700 text-xs font-bold text-slate-500\">\r\n                                    <span className=\"material-symbols-outlined text-[18px]\">folder</span>\r\n                                    {categoryFolders.length} Grupos\r\n                                </div>\r\n                                <div className=\"flex items-center gap-2 px-3 py-1.5 rounded-lg border border-slate-200 bg-white/50 dark:bg-slate-800/50 dark:border-slate-700 text-xs font-bold text-slate-500\">\r\n                                    <span className=\"material-symbols-outlined text-[18px]\">category</span>\r\n                                    {categories.length} Categorías\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                            {foldersUI.map(folder => (\r\n                                <div key={folder.id} className=\"glass-card rounded-[2rem] p-6 shadow-soft group/folder\">\r\n                                    <div className=\"flex items-center justify-between mb-4 pb-4 border-b border-slate-100 dark:border-slate-800\">\r\n                                        <div className=\"flex items-center gap-3\">\r\n                                            <span className=\"material-symbols-outlined text-slate-300 drag-handle\">drag_indicator</span>\r\n                                            <div\n                                                className=\"size-11 rounded-xl flex items-center justify-center\"\n                                                style={{ backgroundColor: withAlpha(folder.color || '#6366f1', 0.15), color: folder.color || '#6366f1' }}\n                                            >\n                                                <span className=\"material-symbols-outlined text-2xl\">{folder.icon}</span>\n                                            </div>\n                                            <div>\r\n                                                <h4 className=\"font-black text-slate-900 dark:text-white text-lg leading-tight\">{folder.name}</h4>\r\n                                                <p className=\"text-[11px] font-bold text-slate-400\">{folder.count} categorías</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    {folder.items.length > 0 ? (\r\n                                        <div className=\"space-y-1\">\r\n                                            {folder.items.map(item => (\r\n                                                <div key={item.id} className=\"flex items-center justify-between p-2 rounded-xl transition-all border border-transparent hover:bg-white hover:border-slate-100 dark:hover:bg-slate-800 dark:hover:border-slate-700 group/row\">\n                                                    <div className=\"flex items-center gap-3 flex-1\">\n                                                        <div\n                                                            className=\"size-8 rounded-full flex items-center justify-center border\"\n                                                            style={{\n                                                                color: item.color || '#64748b',\n                                                                backgroundColor: withAlpha(item.color || '#64748b', 0.15),\n                                                                borderColor: withAlpha(item.color || '#64748b', 0.3)\n                                                            }}\n                                                        >\n                                                            <span className=\"material-symbols-outlined text-[18px]\">{item.icon || 'category'}</span>\n                                                        </div>\n                                                        <span className=\"text-sm font-bold text-slate-600 dark:text-slate-400\">{item.name}</span>\n                                                    </div>\n                                                    <button className=\"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 text-slate-400 transition-opacity opacity-0 group-hover/row:opacity-100\">\r\n                                                        <span className=\"material-symbols-outlined text-[18px]\">edit</span>\r\n                                                    </button>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    ) : (\r\n                                        <div className=\"border-2 border-dashed border-slate-200 dark:border-slate-800 rounded-2xl p-8 flex flex-col items-center justify-center bg-slate-50/50 dark:bg-slate-900/20\">\r\n                                            <p className=\"text-sm font-bold text-slate-400\">Carpeta vacía</p>\r\n                                        </div>\r\n                                    )}\r\n                                </div>\r\n                            ))}\r\n                            {foldersUI.length === 0 && (\r\n                                <div className=\"col-span-full text-center py-20 text-slate-400\">\r\n                                    <p>No hay categorías ni carpetas.</p>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Removed Floating Selection Bar as requested */}\r\n            </div>\r\n\r\n            {/* Modal Logic preserved but simplified for display */}\r\n            {isModalOpen && (\r\n                <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 sm:p-8 bg-slate-900/40 backdrop-blur-sm animate-fade-in\">\r\n                    <div className=\"glass-card w-full max-w-2xl rounded-2xl shadow-premium overflow-hidden flex flex-col animate-slide-up border border-white/80 dark:border-slate-800\">\r\n                        <div className=\"flex items-center justify-between px-8 py-6 border-b border-gray-100 dark:border-gray-800\">\r\n                            <div>\r\n                                <h1 className=\"text-2xl font-black tracking-tight text-gray-900 dark:text-white uppercase tracking-widest\">Nueva Categoría</h1>\r\n                            </div>\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"text-gray-400 hover:text-gray-600 transition-colors\">\r\n                                <span className=\"material-symbols-outlined text-2xl\">close</span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"p-8\">\r\n                            <p className=\"text-center text-gray-500\">Funcionalidad de crear categorías en desarrollo...</p>\r\n                        </div>\r\n                        <div className=\"px-8 py-6 border-t border-gray-100 bg-white/40 flex justify-end gap-4\">\r\n                            <button onClick={() => setIsModalOpen(false)} className=\"px-6 h-12 rounded-xl text-gray-600 font-bold\">Cancelar</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}